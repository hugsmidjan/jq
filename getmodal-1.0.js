// encoding: utf-8
// $.getModal 1.0  -- (c) 2011 Hugsmi√∞jan ehf. 
(function(b,i,f){f=b.getModal=function(a){a=b.extend({},f.defaults,a);var e=b(a.template);var j=b(a.opener||'html').closest('[lang]').attr('lang')||'en',g=e.find(a.closebtnSel),c=f.i18n;c=c[j.substr(0,2)]||c.en;g.attr('title',c.closeT||c.close).html(c.close||c.closeT);if(a.content){e.find(a.bodySel).append(a.content)}if(a.marginTop!==null){e.bind('fickleopen',function(){var d=a.marginTop;d=(d===i)?b(window).scrollTop():b.isFunction(d)?d.call(this):d;b(this).find(a.winSel).css('margin-top',d)})}e.data('popclosebtn',g).data('popbody',e.find(a.bodySel)).addClass(a.className).bind('click',function(d){var h=d.target;if((!a.modal&&(h==this||(a.curtainSel&&h==b(this).find(a.curtainSel)[0])))||b(h).closest(a.closebtnSel)[0]){b(this).fickle('close');return false}}).fickle(b.extend({onOpen:function(){b(this).appendTo(a.appendTo||'body')},onClosed:function(){e.remove()}},a.fickle,{focusTarget:'',opener:a.opener}));j=g=c=i;return e};f.defaults={template:'<div class="modalpop"><span class="curtain"/><div class="popwin"><a class="focustarget" href="#">.</a><div class="popbody"/><a class="closebtn" href="#"/></div></div>',curtainSel:'.curtain',winSel:'.popwin',bodySel:'.popbody',closebtnSel:'.closebtn'};f.i18n={dk:{closeT:'Close popup',close:'Luk'},en:{closeT:'Close popup',close:'Close'},is:{closeT:'Loka glugga',close:'Loka'}}}(jQuery));
