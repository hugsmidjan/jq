// encoding: utf-8
(function(b,h){b.getModal=function(a){a=b.extend({template:'<div class="modalpop"><span class="curtain"/><div class="popwin"><a class="focustarget" href="#">.</a><div class="popbody"/><a class="closebtn" href="#"/></div></div>',winSel:'.popwin',bodySel:'.popbody',closebtnSel:'.closebtn'},b.getModal.defaults,a);var e=b(a.template);var i=b(a.opener||'html').closest('[lang]').attr('lang')||'en',f=e.find(a.closebtnSel),c=b.getModal.i18n;c=c[i.substr(0,2)]||c.en;f.attr('title',c.closeT||c.close).html(c.close||c.closeT);if(a.content){e.find(a.bodySel).append(a.content)}if(a.marginTop!==null){e.bind('fickleopen',function(){var d=a.marginTop;d=(d===h)?b(window).scrollTop():b.isFunction(d)?d.call(this):d b(this).find(a.winSel).css('margin-top',d)})}e.data('popclosebtn',f).data('popbody',e.find(a.bodySel)).addClass(a.className).bind('click',function(d){var g=d.target;if((!a.modal&&(g==this||(a.curtainSel&&g==b(this).find(a.curtainSel)[0])))||b(g).closest(a.closebtnSel)[0]){b(this).fickle('close');return false}}).fickle(b.extend({onOpen:function(){b(this).appendTo(a.appendTo||'body')},onClosed:function(){e.remove()}},a.fickle,{focusTarget:'',opener:a.opener}));i=f=c=h;return e};b.getModal.i18n={dk:{closeT:'Close popup',close:'Luk'},en:{closeT:'Close popup',close:'Close'},is:{closeT:'Loka glugga',close:'Loka'}}}(jQuery));
