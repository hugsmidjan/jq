// encoding: utf-8
(function(b,g){b.getModal=function(a){a=b.extend({template:'<div class="modalpop"><div class="popwin"><a class="focustarget" href="#">.</a><div class="popbody"/><a class="closebtn" href="#"/></div></div>',winSel:'>.popwin',bodySel:'>*>.popbody',closebtnSel:'>*>.closebtn'},b.getModal.defaults,a);var c=b(a.template);var h=b(a.opener||'html').closest('[lang]').attr('lang')||'en',f=c.find(a.closebtnSel),d=b.getModal.i18n;d=d[h.substr(0,2)]||d.en;f.attr('title',d.closeT||d.close).html(d.close||d.closeT);if(a.content){c.find(a.bodySel).append(a.content)}if(a.marginTop!==null){c.bind('fickleopen',function(){var e=a.marginTop;b(this).find(a.winSel).css('margin-top',(e!==g)?e:b(window).scrollTop())})}if(c.curtain&&a.curtain!==null){c.curtain(a.curtain||'')}c.data('popclosebtn',f).data('popbody',c.find(a.bodySel)).addClass(a.className).bind('click',function(e){var i=e.target;if((!a.modal&&i==this)||b(i).closest(a.closeSel)[0]){b(this).fickle('close');return false}}).fickle(b.extend({onOpen:function(){b(this).appendTo(a.appendTo||'body')},onClosed:function(){c.remove()}},a.fickle,{focusTarget:'',opener:a.opener}));h=f=d=g;return c};b.getModal.i18n={dk:{closeT:'Close popup',close:'Luk'},en:{closeT:'Close popup',close:'Close'},is:{closeT:'Loka glugga',close:'Loka'}}}(jQuery));
