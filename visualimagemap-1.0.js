// encoding: utf-8
// $.fn.visualImageMap 1.0  -- (c) 2010 Hugsmi√∞jan ehf.
(function(a,k,n){a.fn[k]=function(d){d=a.extend({overlay:'<div class="imgoverlay" />',area:'<a class="area"/>'},d);this.each(function(){var b=a(this),g=(b.attr('usemap')||'').substr(1),h=g?a('map[name="'+g+'"]').detach():[];if(h[0]){b.removeAttr('usemap').one('load',function(o){var e,l=a(d.area),i=a(d.overlay).insertAfter(b).css({position:'absolute',top:b.position().top,left:b.position().left});h.find('area').each(function(p){var f=a(this),j=f.attr('title'),c=a.map(f.attr('coords').split(','),function(m){return parseInt(m,10)});areaElm=l.clone(true);if(!e){areaElm.prependTo(i);e=[parseInt(areaElm.css('margin-left'),10)||0,parseInt(areaElm.css('margin-top'),10)||0]}areaElm.text(j).attr({href:f.attr('href'),title:j}).css({position:'absolute',left:c[0]+e[0],top:c[1]+e[1],width:c[2]-c[0],height:c[3]-c[1]}).prependTo(i)})});if(b[0].width){b.trigger('load')}}});return this}})(jQuery,'visualImageMap');