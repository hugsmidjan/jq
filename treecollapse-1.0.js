jQuery.fn.treeCollapse=function(c){c=$.extend({activeClass:'collapse-active',openClass:'open',closedClass:'closed',branches:'li.branch',branchlink:'> a',startOpen:'.parent, .selected, .open',linkTemplate:'<a class="expand" href="#">&#8900;</a>',injectLinks:0},c);var d=$(this).click(function(e){var a=e.target,_0=$(a).parents(c.branches).eq(0);if($.inArray(a,_0.find(c.branchlink).get())>-1){var b=_0.hasClass(c.openClass);_0.removeClass(c[(b?'open':'closed')+'Class']).addClass(c[(b?'closed':'open')+'Class'])}return false}).find(c.branches).addClass(c.closedClass).filter(c.startOpen).removeClass(c.closedClass).addClass(c.openClass).end();if(c.injectLinks){d.prepend(c.linkTemplate)}return this};