//encoding: utf-8
(function(c){c.fn.prettySelect=function(a){a=c.extend({selectClass:'prettysel',collapseSpeed:200},a);return this.each(function(){var f=c(this),b=c('<div class="'+a.selectClass+' '+a.selectClass+'-closed"><strong><a href="#"></a></strong><ul></ul></div>'),g,d=false,h=false;setTimeout(function(){f.find('option').each(function(){b.find('ul').append('<li><a href="#">'+c(this).text()+'</a></li>')}).filter(':selected').each(function(){g=c(this);b.find('strong a').text(g.text()).end().find('li').eq(g.index()).addClass('selected')});b.find('ul').hide().end().find('strong a').bind('click',function(e){b.toggleClass(a.selectClass+'-open').toggleClass(a.selectClass+'-closed');b.find('ul')[d?'slideUp':'slideDown'](a.collapseSpeed);d=!d;e.preventDefault()}).end().find('li a').bind('click',function(e){var i=c(this);b.find('.selected').removeClass('selected');i.parent().addClass('selected');b.addClass(a.selectClass+'-closed').removeClass(a.selectClass+'-open').find('strong a').text(i.text()).end().find('ul').slideUp(a.collapseSpeed);f.find('option').eq(i.parent().index()).attr('selected','selected').trigger('change');d=false;e.preventDefault()}).end().bind('mouseenter focusin',function(e){h=true}).bind('mouseleave focusout',function(e){h=false;setTimeout(function(){if(!h&&d){b.find('strong a').trigger('click')}},300)});f.after(b).hide()},50)})}})(jQuery);
