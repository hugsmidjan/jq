// $.fn.delayedHighlight 1.0  -- (c) 2010-2013 Hugsmi√∞jan ehf.
(function(e,t){e.fn.delayedHighlight=function(i){if(this.length){i=e.extend({className:"focused",delay:500,delayOut:300,cancelOff:"a, area, :input"},i);var a=this,l=i.className,c=!("delegate"in i)?"li":i.delegate,r=i.holes,s="highlight",n=s+"on",o=s+"off",f="before"+n,u="before"+o,g="mouseover focusin",d="mouseout focusout",h="isDefaultPrevented",y=clearTimeout,m,v,b,k;if(i.noBubble){a.bind(f+" "+u+" "+n+" "+o,function(e){e.stopPropagation()})}var p=function(t){if(r&&e(t.target).closest(r,this)[0]){O.call(this,t)}else{var a=e(this);y(m);y(v);t.type.charAt(0)==="m"&&(k=this);m=setTimeout(function(){var e=b&&b[0],t;if(a[0]!==e){t=jQuery.Event(f);t.fromTarget=e;a.trigger(t);if(!t[h]()){if(b){b.removeClass(l).trigger(o)}b=a;a.addClass(l).trigger({type:n,fromTarget:e})}}},t.delayOut||i.delay)}},O=function(e){var a=e.type==="click";y(m);y(v);if(!i.sticky||a){e.type.charAt(0)==="m"&&(k=t);v=setTimeout(function(){if(b&&b[0]!==k||a){var e=jQuery.Event(u);b.trigger(e);if(!e[h]()){b.removeClass(l).trigger(o);b=t}}},e.delayOut||i.delayOut)}},T=function(a){var l=!b||this!==b[0]?p:i.clickToggles&&!e(a.target).closest(i.cancelOff||"")[0]?O:t;l&&l.call(this,{type:"click",delayOut:1})};if(c){a.delegate(c,g,p).delegate(c,d,O);i.click&&a.delegate(c,"click",T)}else{a.bind(g,p).bind(d,O);i.click&&a.bind("click",T)}}return this}})(jQuery);
