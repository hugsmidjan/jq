// $.fn.delayedHighlight 1.0  -- (c) 2010-2013 Hugsmi√∞jan ehf.
(function(e,t){e.fn.delayedHighlight=function(i){if(this.length){i=e.extend({className:"focused",delay:500,delayOut:300,cancelOff:"a, area, :input"},i);var l=this,a=i.className,f=!("delegate"in i)?"li":i.delegate,c=i.holes,r=(f?f+" ":"")+c,s="highlight",o="mouseover focusin",n="mouseout focusout",u="isDefaultPrevented",g=clearTimeout,d,h,y,m;if(i.noBubble){l.bind(s+"on "+s+"off",false)}var v=function(t){if(c&&e(t.target).closest(c,this)[0]){b.call(this,t)}else{var l=e(this);g(d);g(h);t.type.charAt(0)=="m"&&(m=this);d=setTimeout(function(){var e=y&&y[0],t;if(l[0]!=e){t=jQuery.Event("before"+s+"on");t.fromTarget=e;l.trigger(t);if(!t[u]()){if(y){y.removeClass(a).trigger(s+"off")}y=l;l.addClass(a).trigger({type:s+"on",fromTarget:e})}}},t.delayOut||i.delay)}},b=function(e){var l=e.type=="click";g(d);g(h);if(!i.sticky||l){e.type.charAt(0)=="m"&&(m=t);h=setTimeout(function(){if(y&&y[0]!=m||l){var e=jQuery.Event("before"+s+"off");y.trigger(e);if(!e[u]()){y.removeClass(a).trigger(s+"off");y=t}}},e.delayOut||i.delayOut)}},k=function(l){var a=!y||this!=y[0]?v:i.clickToggles&&!e(l.target).closest(i.cancelOff||"")[0]?b:t;a&&a.call(this,{type:"click",delayOut:1})};if(f){l.delegate(f,o,v).delegate(f,n,b);i.click&&l.delegate(f,"click",k)}else{l.bind(o,v).bind(n,b);i.click&&l.bind("click",k)}}return this}})(jQuery);
