// encoding: utf-8
// $.fn.delayedHighlight 1.0  -- (c) 2010 Hugsmi√∞jan ehf. 
(function(d){var p=0,q='.dh'+(new Date()).getTime()+'-',h='highlight',l='mouseenter focusin',m='mouseleave focusout',n=/(er|in)$/;d.fn.delayedHighlight=function(a){a=d.extend({className:'focused',delay:500,delayOut:300,cancelOff:'a, area, :input'},a);var b=this,c=q+(p++);className=a.className,delegate=a.delegate||'li';b.bind(h+'on '+h+'off',false).delegate(delegate,m+(a.sticky?'':' '+l),function(e){var i=n.test(e.type)?'out':'in';clearTimeout(b.data('timeout-'+i+c))}).delegate(delegate,l+(a.sticky?'':' '+m)+(a.click?' click':''),function(j){var f=d(this),g=j.type=='click';isInEvent=a.sticky?!g:n.test(j.type),isOutEvent=!isInEvent&&!g,inorout=isInEvent?'in':'out';if((!g&&(!a.sticky||isInEvent))||f[0]!=(b.data('item'+c)||[])[0]||(a.clickToggles&&!d(j.target).closest(a.cancelOff||'',this)[0])){var o='timeout-'+inorout+c;clearTimeout(b.data(o));b.data(o,setTimeout(function(){var e=d(b.data('item'+c)),i=e[0]==f[0],k;if(!i||!a.sticky||(g&&a.clickToggles)){className&&e.removeClass(className);e.trigger(h+'off');k=true}if(!i&&!isOutEvent){className&&f.addClass(className);f.trigger(h+'on');b.data('item'+c,f);k=false}k&&b.removeData('item'+c)},g?0:isInEvent?a.delay:a.delayOut))}});return this}})(jQuery);
