// encoding: utf-8
// $.fn.delayedHighlight 1.0  -- (c) 2010 Hugsmi√∞jan ehf.
(function(f,g){f.fn.delayedHighlight=function(a){a=f.extend({className:'focused',delay:500,delayOut:300,cancelOff:'a, area, :input'},a);var h=this,i=a.className,j=a.delegate||'li',e='highlight',l,m,b,k;if(a.noBubble){h.bind(e+'on '+e+'off',false)}var n=function(d){var c=f(this);clearTimeout(m);(d.type.charAt(0)=='m')&&(k=this);l=setTimeout(function(){if(!b||c[0]!=b[0]){if(b){b.removeClass(i).trigger(e+'off')}b=c;c.addClass(i).trigger(e+'on')}},d.delayOut||a.delay)},o=function(d){var c=d.type=='click';clearTimeout(l);if(!a.sticky||c){(d.type.charAt(0)=='m')&&(k=g);m=setTimeout(function(){if(b&&b[0]!=k||c){b.removeClass(i).trigger(e+'off');b=g}},d.delayOut||a.delayOut)}};h.delegate(j,'mouseover focusin',n).delegate(j,'mouseout focusout',o);if(a.click){h.delegate(j,'click',function(d){var c=(!b||this!=b[0])?n:(a.clickToggles&&!f(d.target).closest(a.cancelOff||'')[0])?o:g;c&&c.call(this,{type:'click',delayOut:1})})}return this}})(jQuery);
