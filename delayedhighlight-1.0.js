// encoding: utf-8
// $.fn.delayedHighlight 1.0  -- (c) 2010 Hugsmi√∞jan ehf.
(function(h,i){h.fn.delayedHighlight=function(a){if(this.length){a=h.extend({className:'focused',delay:500,delayOut:300,cancelOff:'a, area, :input'},a);var e=this,j=a.className,f=!('delegate'in a)?'li':a.delegate,g='highlight',n,o,b,k;if(a.noBubble){e.bind(g+'on '+g+'off',false)}var l=function(d){var c=h(this);clearTimeout(o);(d.type.charAt(0)=='m')&&(k=this);n=setTimeout(function(){if(!b||c[0]!=b[0]){if(b){b.removeClass(j).trigger(g+'off')}b=c;c.addClass(j).trigger(g+'on')}},d.delayOut||a.delay)},m=function(d){var c=d.type=='click';clearTimeout(n);if(!a.sticky||c){(d.type.charAt(0)=='m')&&(k=i);o=setTimeout(function(){if(b&&b[0]!=k||c){b.removeClass(j).trigger(g+'off');b=i}},d.delayOut||a.delayOut)}},p=function(d){var c=(!b||this!=b[0])?l:(a.clickToggles&&!h(d.target).closest(a.cancelOff||'')[0])?m:i;c&&c.call(this,{type:'click',delayOut:1})};if(f){e.delegate(f,'mouseover focusin',l).delegate(f,'mouseout focusout',m)}else{e.bind('mouseover focusin',l).bind('mouseout focusout',m)}if(a.click){f?e.delegate(f,'click',p):e.bind('click',p)}}return this}})(jQuery);
