/* jQuery.fn.delayedHighlight 1.0  -- (c) 2010-2014 Hugsmi√∞jan ehf.   @preserve */
!function(e,t){e.fn.delayedHighlight=function(i){if(this.length){i=e.extend({className:"focused",delay:500,delayOut:300,onFocus:!0,clickGrace:300,cancelOff:"a, area, :input"},i);var o,c,a,n,l,r,s=this,u=i.className,f="delegate"in i?i.delegate:"li",g=i.holes,h="highlight",d=h+"on",y=h+"off",m="before"+d,v="before"+y,k=h+"-wasclicked",p=i.onFocus,T="mouseover"+(p?" focusin":""),O="mouseout"+(p?" focusout":""),D="isDefaultPrevented",b=clearTimeout,C=i.clickGrace;i.noBubble&&s.on(m+" "+v+" "+d+" "+y,function(e){e.stopPropagation()});var j=function(s){if(g&&e(s.target).closest(g,this)[0])w.call(this,s);else{var f=e(this);b(o),b(c),"m"===s.type.charAt(0)&&(n=this),o=setTimeout(function(){var e,i=a&&a[0];f[0]!==i&&(e=jQuery.Event(m),e.fromTarget=i,f.trigger(e),e[D]()||(a&&a.removeClass(u).trigger(y),a=f,f.addClass(u).trigger({type:d,fromTarget:i}),C&&(r=f[0],b(l),l=setTimeout(function(){r=t},C))))},s.delay||"focusin"===s.type&&i.focusDelay||i.delay)}},w=function(e){var l="click"===e.type;b(o),b(c),(!i.sticky||l)&&("m"===e.type.charAt(0)&&(n=t),c=setTimeout(function(){if(a&&a[0]!==n||l){var e=jQuery.Event(v);a.trigger(e),e[D]()||(a.removeClass(u).trigger(y),a=t)}},e.delay||"focusout"===e.type&&i.focusDelayOut||i.delayOut))},Q=function(o,c){var n="highlightOn"!==c&&a&&this===a[0]?"highlightOff"===c||i.clickToggles&&this!==r&&!e(o.target).closest(i.cancelOff||"")[0]?w:t:j;n&&n.call(this,{type:"click",delay:1})},A=function(){if(!a||this!==a[0]){var t=e(this);t.data(k,!0),clearTimeout(t.data(k+"to")),t.data(k+"to",setTimeout(function(){t.removeData(k)},i.delay))}};f?s.on(T,f,j).on(O,f,w).on("click.forced",f,Q):s.on(T,j).on(O,w).on("click.forced",Q),i.click?f?s.on("click",f,Q):s.on("click",Q):i.clickCancels&&(f?s.on("click",f,A):s.on("click",A),s.on(m,function(t){var i=e(t.target);i.data(k)&&(t.preventDefault(),i.removeData(k))}))}return this}}(window.jQuery);
