// encoding: utf-8
// $.fn.autoValidate/.defangEnter/.defangReset  1.0  -- (c) 2009 Hugsmiðjan ehf. 
(function(a){var z='tmp_'+(new Date()).getTime();var A=0;var x={lang:'en',maxLabelLength:35,errorAction:'focus',focusElmClass:'stream',submittedClass:'issubmitted',validateEachField:'',errorMsgType:'alertonly',inlineErrorClass:'errmsg',nextErrorLinkClass:'nexterror',customReqCheck:{},reqClassPattern:'req',reqErrorClass:'reqerror',typeErrorClass:'typeerror',defangReset:true,defangEnter:'auto'};a.extend({av:{lang:{en:{bullet:' • ',errorReqMsg:'Please fill out these fields:\n\n',errorTypeMsg:'These fields contain invalid input:\n\n',inlineMsgPrefix:'Error:',inlineReqMsg:'This field is required ',inlineTypeMsg:'This field contains an invalid value ',inlineNextError:'Next error',resetAlert:'Note: You are about to reset all values in the form...'}},id:function(c){c=a(c);var b=c.attr('id');return(b)?b:c.attr('id',z+'_'+(A++)).attr('id')},cleanLabelString:function(c,b){if(!c){return''}b=b||35;c=c.replace(/\s\s+/g,' ').replace(/ - /g,', ').replace(/\[/g,'(').replace(/\]/g,')').replace(/\([^)]+\)/g,'').replace(/[\s*:#]+$/,'').replace(/^[\s*#]+/,'');if(c.length>(b+2)){c=c.substr(0,(b-2)).replace(/[.,:;\s]+$/,'')+'...'}return c},getLabel:function(c,b,d){var f=c.find(':input:first');var e=f.data('av-labeltext');if(!e){e=a.av.cleanLabelString(f.attr('title'),d.maxLabelLength);var g=f.attr('id');if(!e&&g){var h=f.parents('form').find('label[for='+g+']').text()||f.parent('label').text()||c.find('label').eq(0).text();e=a.av.cleanLabelString(h,d.maxLabelLength)}var j=c.is('fieldset:has(input[name='+f.attr('name')+']:odd)');if(j){var l=c.find(':header, legend, p').eq(0).text();e=(l)?a.av.cleanLabelString(l,d.maxLabelLength):e}if(!e){e=f.attr('name')}var k=b.find('fieldset:has(#'+a.av.id(c)+'):last').children(':header:first-child, legend:first-child, p:first-child');if(k.length){e=e+' ['+a.av.cleanLabelString(k.text(),d.maxLabelLength)+']'}a(f).data('av-labeltext',e)}return e},getText:function(c,b){return a.av.getError(c,b)||a.av.getError(c,'en')||''},getError:function(c,b){return(a.av.lang[b]&&a.av.lang[b][c])||''},config:function(c,b){var d=a(c),f=a(d.filter('form')[0]||d.parents('form')[0]||d.find('form')[0]);if(b){f.data('av-config',b)}else{b=f.data('av-config');if(!b){b=a.extend({},x);f.data('av-config',b)}}return b},addInlineLabels:function(e){var g=a.av.config(e[0]);a.each(e,function(c){var b=a(this);var d=b.attr('lang')||b.parents('[lang]').attr('lang');b.attr('lang',d);var f=a.av.getText('inlineReqMsg',d);if(b.is('.'+g.typeErrorClass)){f=b.data('av-error')||a.av.getText('inlineTypeMsg',d)}b.prepend('<strong class="'+g.inlineErrorClass+'">'+f+'</strong>');if(c<e.length-1){b.append('<a href="#'+a.av.id(e[c+1])+'" class="'+g.nextErrorLinkClass+'">'+a.av.getText('inlineNextError',d)+'</a>')}})},alertErrors:function(e,g){var h=a.av.config(e[0]);var j=a(e[0]).attr('lang')||a(e[0]).parents('[lang]').attr('lang');a(e[0]).attr('lang',j);var l=[];var k=[];var n='';a.each(e,function(c){var b=a(this),d=a.av.getLabel(b,g,h),f=b.data('av-error-short');if(f){d+=' ('+f+')'}if(a(this).is('.'+h.typeErrorClass)){k.push(d)}else{l.push(d)}});var m=a.av.getText('bullet',j);if(l.length){n+=a.av.getText('errorReqMsg',j)+m+l.join('\n'+m)}if(k.length){n+='\n\n';n+=a.av.getText('errorTypeMsg',j)+m+k.join('\n'+m)}alert(a.trim(n))},focusNext:function(e){var g=a(':input').get();g=g.sort(function(c,b){var d=(c.tabIndex>0)?c.tabIndex:99999;var f=(b.tabIndex>0)?b.tabIndex:99999;return((d<f)*-1)+((d>f)*1)});var h=a.inArray(e,g);while(g[++h]&&g[h].tabIndex==-1){}var j=a(g[h]||g[0]);setTimeout(function(){j.trigger('focus')},1);return j}}});var r=function(c){return!!c},y=function(c){var b=a(this);return b.parents('form').find('[name='+b.attr('name')+']').is(':checked')};a.extend(a.av,{type:{'fi_btn':function(c){return true},'fi_txt':r,'fi_sel':r,'fi_bdy':r,'fi_file':r,'fi_chk':y,'fi_rdo':y}});a.fn.extend({defangReset:function(){return this.bind('click',function(c){var b=a(this);var d=b.attr('lang')||b.parents('[lang]').attr('lang')||'en';b.attr('lang',d);if(confirm(a.av.getText('resetAlert',d))){if(b.attr('type')!=="reset"){var f=b.parents('form').get(0);if(f){f.trigger('reset')}}return true}return false})},defangEnter:function(){return this.bind('keydown',function(c){var b=c.target;return(c.which!=13||b.tagName!='INPUT'||/^(button|reset|submit)$/i.test(b.type))})},autoValidate:function(j){return this.each(function(){var e=a(this),g=a(e.filter('form')[0]||e.parents('form')[0]||e.find('form')[0]);if(!g.length){return false}var h=a.extend({},x,j);a.av.config(this,h);if(h.defangReset){g.find(':reset').defangReset(h)}if(!h.emulateTab&&h.defangEnter===true||h.defangEnter==='true'||(h.defangEnter==='auto'&&a(':submit',g).length>1)){g.defangEnter()}if(h.emulateTab){g.bind('keydown',function(c){if(c.keyCode==13&&a(c.target).is(':input:not(:button):not(:reset):not(:submit):not(textarea)')){a.av.focusNext(c.target);return false}})}if(h.maxLengthTab){g.bind('keyup',function(c){var b=a(c.target);var d=c.which;if((d>0&&d!=8&&d!=9&&d!=13&&d!=16&&d!=17)&&b.attr('maxlength')==b.val().length){a.av.focusNext(c.target)}})}if(/blur|change/.test(h.validateEachField)){}g.bind('submit',function(c){var b=a(this);if(!b.data('av.skip')||b.data('av.disabled')){var d=a.av.config(this);var f=b.isValid();if(f){b.addClass(d.submittedClass)}else{c.preventDefault()}return f}b.removeData('av.skip')})})},isValid:function(p){p=!!(p||p==null);var q=[],u='',v=false;this.each(function(){var s=a(this),t=[],B=true,i=a.av.config(this);v=v||/both|alertonly/.test(i.errorMsgType);u=u||'strong.'+i.inlineErrorClass+', a.'+i.nextErrorLinkClass;s.find(u).remove();var C=s.is(':input')?s:s.find(':input');C.not(i.includeDisabled?'':':disabled').each(function(){var c=a(this);c.removeData('av-malformed');var b=(this.type=='checkbox')?{'fi_chk':a.av.type['fi_chk']}:{'fi_txt':a.av.type['fi_txt']},d=c.parents('[class^="fi_"], [class*=" fi_"]').eq(0),f=d.attr('lang')||d.parents('[lang]').attr('lang'),e=d.hasClass(i.reqClassPattern)||c.hasClass(i.reqClassPattern),g=a.trim(c.val());d.removeClass(i.reqErrorClass);d.removeClass(i.typeErrorClass);if(d.length!==0){var h,j=a.trim(d.attr('class')).split(' ');while(h=j.pop()){if(/^fi_/.test(h)&&a.isFunction(a.av.type[h])){b[h]=a.av.type[h]}}}var l=c.attr('name'),k=i.customReqCheck&&i.customReqCheck[l];if(k&&a.isFunction(k)){e=k.call(this,g,d.get(0)||this,f)}else if(k&&typeof(k)==='string'){var n=/^(!)?(.*)$/.exec(k);var m=a(':input[name='+n[2]+']',this.form);if(m.length){e=m.is(':checkbox, :radio')?!n[1]^!m.filter(':checked').length:!n[1]^(m.val()=='')}}if(i.customTypeCheck&&a.isFunction(i.customTypeCheck[l])){b[l]=i.customTypeCheck[l]}for(var D in b){d.attr('lang',f);var o=b[D].call(this,g,d.get(0)||this,f);if(o!==true){B=false;if(o){var w;if(typeof(o)!='string'){w=o.alert;o=o.inline}t.push(d.get(0));d.data('av-error',o);d.data('av-error-short',(typeof w=='string'?w:o));d.removeClass(i.reqErrorClass);d.addClass(i.typeErrorClass)}else if(e){t.push(d.get(0));d.addClass(i.reqErrorClass)}}}});if(p&&/both|inlineonly/.test(i.errorMsgType)){a.av.addInlineLabels(a.unique(t))}q=q.concat(t)});if(p&&v&&q.length){a.av.alertErrors(a.unique(q),this)}return!q.length}})})(jQuery);
// encoding: utf-8
jQuery.av.lang.is={bullet:' • ',errorReqMsg:'Það þarf að fylla út þessa liði:\n\n',errorTypeMsg:'Þessir liðir eru rangt útfylltir:\n\n',inlineMsgPrefix:'Villa:',inlineReqMsg:'Það þarf að fylla út þennan lið ',inlineTypeMsg:'Þessi liður er rangt út fylltur ',inlineNextError:'Næsta villa',resetAlert:'Ath: Þú ert í þann mund að afturkalla öll innslegin gildi...',fi_email:{inline:'Vinsamlega sláðu inn rétt netfang (dæmi: notandi@daemi.is)',alert:'e.g. nafn@domain.is'},fi_url:{inline:'Vinsamlega sláðu inn löggilda vefslóð (dæmi: http://www.example.is)',alert:'e.g. http://www.domain.is'},fi_year:{inline:'Vinsamlega sláðu inn rétt ártal (dæmi: 1998)',alert:'t.d. 1998'},fi_ccnum_noamex:'American Express kort virka ekki'};
// encoding: utf-8
(function(c){c.extend(c.av.lang.en,{fi_email:{inline:'Please provide a valid e-mail address (example: user@example.com)',alert:'e.g. user@example.com'},fi_url:{inline:'Please provide a valid web address (example: http://www.example.is)',alert:'e.g. http://www.example.com'},fi_year:{inline:'Please provide a valid four digit year (example: 1998)',alert:'e.g. 1998'},fi_ccnum_noamex:{inline:'American Express cards not accepted',alert:'AmEx not accepted'}});var k=c.av.type;c.extend(k,{fi_kt:function(a,g,b){var e=c.av.getError('fi_kt',b);if(a){var d=a.replace(/[\s\-]/g,'');c(this).val(d);var f=/010130(2(12|20|39|47|55|63|71|98)|3(01|36)|4(33|92)|506|778)9/.test(d);if(f||!/^\d{9}[90]$/.test(d)){return e}var i=[3,2,7,6,5,4,3,2,1],h=0,j=9;while(j--){h+=(i[j]*d.charAt(j))}if(h%11){return e}}return!!a},fi_email:function(a,g,b){if(a&&!/^[a-z0-9-._+]+@([a-z0-9-_]+\.)+[a-z0-9-_]{2,99}$/i.test(a)){return c.av.getError('fi_email',b)}return!!a},fi_url:function(a,g,b){if(a){var e=a.replace(/^[a-z]+:\/\/.+$/i,'');if(!/^[a-z]+:\/\/.+\..+$/.test(a)||/[\(\)\<\>\,\:\"\[\]\\]/.test(e)){return c.av.getError('fi_url',b)}return true}return false},fi_tel:function(a,g,b){if(a){return!a.replace(/(\s|[-+()]|\d)/g,'')||''}return false},fi_postal_is:function(a,g,b){if(a){var e=c.av.postCodes&&c.av.postCodes.is;if(!e){return/^\d\d\d$/.test(a)||c.av.getError('fi_pnr',b)}else if(e[a]){if(this.nodeType){var d=c(this).siblings('span.unit');if(!d.length){d=c('<span class="unit"></span>');c(this).after(d)}d.html(e[a])}return true}return c.av.getError('fi_pnr',b)}return false},fi_pnrs:function(a,g,b){if(a){var e=a.replace(/(^[ ,;]+|[ ,;]+$)/g,'').split(/[ ,;]+/);var a,d=false;for(var f=0;f<e.length;f++){a=c.av.type['fi_postal_is'](e[f],null,b);if(a!==true){return a}}return true}return false},fi_qty:function(a,g,b){c(this).val(a);return!a||/^\d+$/.test(a)||''},fi_num:function(a,g,b){var a=a.replace(/^-\s+/,'-').replace(/[,.]$/,'');c(this).val(a);return!a||(/\d/.test(a)&&/^-?\d*[.,]?\d*$/.test(a))||''},fi_year:function(a,g,b){if(a&&!/^(19|20)\d\d$/.test(a)){return c.av.getError('fi_year',b)}return!!a},fi_date:function(a,g,b){if(a){var e=c.av.getError('fi_year',b);if(window.datePicker&&datePicker.VERSION<2){var d=c.av.id(this),f=datePicker.fields[d];if(f){var i=datePicker.parseDate(d);if(!i){return e}else{var h=datePicker.printDateValue(i,f.dateFormat,b).replace(/(^\s+|\s+$)/g,'');if(!f.caseSensitive){a=a.toLowerCase();h=h.toLowerCase()}return(h==a)||datePicker.printDateValue(new Date(2000,4,27),f.dateFormat,b)}}}a=a.replace(/[ .-\/]+/g,'.').replace(/\.(\d\d)$/,'.20$1');return/^(3[01]|[12]?[0-9]|(0)?[1-9])\.(1[012]|(0)?[1-9])\.(19|20)?\d\d$/.test(a)||e}return!!a},fi_time:function(a,g,b){if(a){var e=c.av.getError('fi_time',b);if(/^([01]?\d|2[01234])(:([0-5]\d))?(:([0-5]\d))?\s*([ap]\.?m\.?)?$/i.test(a)){var d=parseInt(RegExp.$1,10),f=parseInt(RegExp.$3||'0',10),i=parseInt(RegExp.$5||'0',10),h=(RegExp.$6+'').replace('.','').toLowerCase();if(h=='pm'){d+=12}var j=(d*60*60)+(f*60)+(i*60);return(j<=86400)||e}else{return e}}return!!a},fi_ccnum:function(a,g,b){var e=c.av.getError('fi_ccnum',b);if(a){var d=a.replace(/[ -]/g,'');if(!/^(\d{16}|3[47]\d{13})$/.test(d)){return e}c(this).val(d);var f=0,i,h=d.length;while(h-->0){f+=d.charAt(h--)*1;i=d.charAt(h)*2;f+=Math.floor(i/10)+(i%10)}var j=(f%10)===0;return j||e}return!!a},fi_ccnum_noamex:function(a,g,b){if(a&&a.replace(/[ -]/g,'').length==15){return c.av.getError('fi_ccnum_noamex',b)}return!!a},fi_ccexp:function(a,g,b){if(a){a=a.replace(/(\d\d)\s*[ -\/]?\s*(\d\d)/,'$1/$2').replace(/\s+/g,'');return/^(0\d|1[012])\/(\d\d)$/.test(a)||c.av.getError('fi_ccexp',b)}return!!a}});k.fi_pnr=k.fi_postal_is})(jQuery);
