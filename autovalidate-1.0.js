// $.fn.autoValidate/.defangEnter/.defangReset  1.0  -- (c) 2009-2014 Hugsmiðjan ehf.
(function(e){e.fn.addBack=e.fn.addBack||e.fn.andSelf;var t="tmp_"+(new Date).getTime();var a=0;var r={lang:"en",maxLabelLength:35,errorAction:"focus",focusElmClass:"stream",formInvalidClass:"is-invalid",submittedClass:"issubmitted",validateEachField:"",errorMsgType:"alertonly",inlineErrorClass:"errmsg",nextErrorLinkClass:"nexterror",customReqCheck:{},reqClassPattern:"req",reqErrorClass:"reqerror",typeErrorClass:"typeerror",defangReset:true,defangEnter:"auto"};e.extend({av:{lang:{en:{bullet:" • ",errorReqMsg:"Please fill out these fields:\n\n",errorTypeMsg:"These fields contain invalid input:\n\n",inlineMsgPrefix:"Error:",inlineReqMsg:"This field is required ",inlineTypeMsg:"This field contains an invalid value ",inlineNextError:"Next error",resetAlert:"Note: You are about to reset all values in the form..."}},id:function(r){r=e(r);var n=r.attr("id");return n?n:r.attr("id",t+"_"+a++).attr("id")},cleanLabelString:function(e,t){if(!e){return""}t=t||35;e=e.replace(/\s\s+/g," ").replace(/ - /g,", ").replace(/\[/g,"(").replace(/\]/g,")").replace(/\([^)]+\)/g,"").replace(/[\s*:#]+$/,"").replace(/^[\s*#]+/,"");if(e.length>t+2){e=e.substr(0,t-2).replace(/[.,:;\s]+$/,"")+"..."}return e},getLabel:function(t,a,r){var n=t.find(":input:first");var i=n.data("av-labeltext");if(!i){i=e.av.cleanLabelString(n.attr("title"),r.maxLabelLength);var s=n.attr("id");if(!i&&s){var l=n.closest("form").find("label[for="+s+"]").text()||n.parent("label").text()||t.find("label").eq(0).text();i=e.av.cleanLabelString(l,r.maxLabelLength)}var o=t.is("fieldset")&&t.find("input[name="+n.attr("name")+"]")[1];if(o){var f=t.find(":header,legend,p").eq(0).text()||t.attr("title");i=f?e.av.cleanLabelString(f,r.maxLabelLength):i}if(!i){i=n.attr("name")}var c=a.find("fieldset:has(#"+e.av.id(t)+"):last"),u=c.children(":header,legend,p").eq(0);if(u.length){i+=" ["+e.av.cleanLabelString(u.text()||c.attr("title"),r.maxLabelLength)+"]"}e(n).data("av-labeltext",i)}return i},getText:function(t,a){return e.av.getError(t,a)||e.av.getError(t,"en")||""},getError:function(t,a){return e.av.lang[a]&&e.av.lang[a][t]||""},config:function(t,a){var n=e(t),i=e(n.closest("form")[0]||n.find("form")[0]);if(a){i.data("av-config",a)}else{a=i.data("av-config");if(!a){a=e.extend({},r);i.data("av-config",a)}}return a},addInlineLabels:function(t){var a=e.av.config(t[0]);e.each(t,function(r){var n=e(this);var i=n.closest("[lang]").attr("lang");n.attr("lang",i);var s=e.av.getText("inlineReqMsg",i);if(n.is("."+a.typeErrorClass)){s=n.data("av-error")||e.av.getText("inlineTypeMsg",i)}n.prepend('<strong class="'+a.inlineErrorClass+'">'+s+"</strong>");if(r<t.length-1){n.append('<a href="#'+e.av.id(t[r+1])+'" class="'+a.nextErrorLinkClass+'">'+e.av.getText("inlineNextError",i)+"</a>")}})},alertErrors:function(t,a){var r=e.av.config(t[0]);var n=e(t[0]).closest("[lang]").attr("lang");e(t[0]).attr("lang",n);var i=[];var s=[];var l="";e.each(t,function(){var t=e(this),n=e.av.getLabel(t,a,r),l=t.data("av-error-short");if(l){n+=" ("+l+")"}if(e(this).is("."+r.typeErrorClass)){s.push(n)}else{i.push(n)}});var o=e.av.getText("bullet",n);if(i.length){l+=e.av.getText("errorReqMsg",n)+o+i.join("\n"+o)}if(s.length){l+="\n\n";l+=e.av.getText("errorTypeMsg",n)+o+s.join("\n"+o)}alert(e.trim(l))},focusNext:function(t){var a=e(":input").get();a=a.sort(function(e,t){var a=e.tabIndex>0?e.tabIndex:99999;var r=t.tabIndex>0?t.tabIndex:99999;return(a<r)*-1+(a>r)*1});var r=e.inArray(t,a);while(a[++r]&&a[r].tabIndex===-1){}var n=e(a[r]||a[0]);setTimeout(function(){n.trigger("focus")},1);return n}}});var n=function(e){return!!e},i=function(){var t=e(this),a=t.closest("form").find("input[name="+t.attr("name")+"]:checked");return!!a[0]&&(!a.is(":radio")||!!a.filter(function(){return!!e(this).val()})[0])};e.extend(e.av,{type:{fi_btn:function(){return true},fi_txt:n,fi_sel:n,fi_bdy:n,fi_file:n,fi_chk:i,fi_rdo:i}});(function(e){e.fn.constrainNumberInput=function(e){e=!e?{}:e.charAt?{selector:e}:e;var t=e.selector,a=this;if(e.arrows){t?a.on("keydown",t,r).on("focusin",t,n):a.on("keydown",r).on("focusin",n)}t?a.on("keypress",t,i):a.on("keypress",i);return a};var t="cni_focused",a="cni_changed",r=function(r){var n=this,i=r.which===38?1:r.which===40?-1:0;n.autocomplete="off";if(i){i=i*(n.step||1)*(r.shiftKey?10:1);var s,l,o=e(n),f=(parseInt(e.trim(n.value),10)||0)+i;f=i<0&&n.min&&!isNaN(s=parseInt(n.min,10))?Math.max(f,s):i>0&&n.max&&!isNaN(l=parseInt(n.max,10))?Math.min(f,l):f;if(o.val()!=f){o.val(f);o.data(t)?o.data(a,true):o.trigger("change")}}},n=function(){var r=e(this);r.data(t,true).off(".cni").one("change.cni",function(){r.removeData(t).removeData(a).off("focusout.cni")}).one("focusout.cni",function(){setTimeout(function(){if(r.data(t)&&r.data(a)){r.removeData(t).trigger("change")}r.removeData(a)},100)})},i=function(e){if(!e.ctrlKey&&!e.metaKey&&e.which&&e.which!==8&&e.which!==13&&(e.which<48||e.which>57)){e.preventDefault()}}})(jQuery);e.fn.extend({defangReset:function(){return this.bind("click",function(){var t=e(this);var a=t.closest("[lang]").attr("lang")||"en";t.attr("lang",a);if(confirm(e.av.getText("resetAlert",a))){if(t.attr("type")!=="reset"){t.closest("form").trigger("reset")}return true}return false})},defangEnter:function(){return this.bind("keydown",function(e){var t=e.target;return e.which!==13||t.tagName!=="INPUT"||/^(button|reset|submit)$/i.test(t.type)})},autoValidate:function(t){return this.each(function(){var a=e(this),n=e(a.closest("form")[0]||a.find("form")[0]);if(!n.length){return false}var i=e.extend({},r,t);e.av.config(this,i);if(i.defangReset){n.find(":reset").defangReset(i)}if(!i.emulateTab&&i.defangEnter===true||i.defangEnter==="true"||i.defangEnter==="auto"&&e(":submit",n).length>1){n.defangEnter()}if(i.emulateTab){n.bind("keydown",function(t){if(t.keyCode===13&&e(t.target).is(":input:not(:button):not(:reset):not(:submit):not(textarea)")){e.av.focusNext(t.target);return false}})}if(i.maxLengthTab){n.bind("keyup",function(t){var a=e(t.target);var r=t.which;if(r>0&&r!==8&&r!==9&&r!==13&&r!==16&&r!==17&&a.attr("maxlength")===a.val().length){e.av.focusNext(t.target)}})}n.bind("submit",function(t){var a=e(this);if(!a.data("av.skip")||a.data("av.disabled")){var r=e.av.config(this);var n=a.isValid();if(n){a.addClass(r.submittedClass)}else{t.preventDefault()}return n}a.removeData("av.skip")})})},isValid:function(t){t=!!(t||t==null);var a=[],r="",n=false;this.each(function(){var i=e(this),s=[],l=true,o=e.av.config(this);n=n||/both|alertonly/.test(o.errorMsgType);r=r||"strong."+o.inlineErrorClass+", a."+o.nextErrorLinkClass;if(t){i.find(r).remove()}var f=i.is(":input")?i:i.find(":input");f.not(o.includeDisabled?"":":disabled").not(':submit,:reset,:button,[type="hidden"]').each(function(){var a=e(this);var r=this.type==="checkbox"?{fi_chk:e.av.type.fi_chk}:this.type==="radio"?{fi_rdo:e.av.type.fi_rdo}:{fi_txt:e.av.type.fi_txt},n=a.closest('[class^="fi_"], [class*=" fi_"]'),i=n.closest("[lang]").attr("lang"),f=n.hasClass(o.reqClassPattern)||a.hasClass(o.reqClassPattern);if(t){n.removeClass(o.reqErrorClass);n.removeClass(o.typeErrorClass)}if(n.length!==0){var c,u=e.trim(n.attr("class")).split(/\s+/);while(c=u.pop()){if(/^fi_/.test(c)&&e.isFunction(e.av.type[c])){r[c]=e.av.type[c]}}}var v=a.attr("name"),d=o.customReqCheck&&o.customReqCheck[v];if(d&&e.isFunction(d)){f=d.call(this,e.trim(a.val()),n.get(0)||this,i)}else if(d&&typeof d==="string"){var g=/^(!)?(.*)$/.exec(d);var h=e(":input[name="+g[2]+"]",this.form);if(h.length){f=h.is(":checkbox, :radio")?!g[1]^!h.filter(":checked").length:!g[1]^h.val()===""}}if(o.customTypeCheck&&e.isFunction(o.customTypeCheck[v])){r[v]=o.customTypeCheck[v]}for(var p in r){n.attr("lang",i);var m=r[p].call(this,e.trim(a.val()),n.get(0)||this,i);if(m!==true){l=false;var b=typeof m==="string";if(m||b){s.push(n.get(0));if(t){var x;if(!b){x=m.alert;m=m.inline}n.data("av-error",m);n.data("av-error-short",typeof x==="string"?x:m);n.removeClass(o.reqErrorClass);n.addClass(o.typeErrorClass)}}else if(f){s.push(n.get(0));if(t){n.addClass(o.reqErrorClass)}}}}});if(t&&/both|inlineonly/.test(o.errorMsgType)){e.av.addInlineLabels(e.unique(s))}a=a.concat(s)});var i=!a.length;if(t){if(!i){var s=e(a[0]).find("*").addBack().filter("input, select, textarea");s.focusHere?s.focusHere():s.setFocus?s.focusHere():s[0].focus();if(n){e.av.alertErrors(e.unique(a),this)}}var l=e(a).closest("form"),o=l.data("av-config")||{};l.toggleClass(o.formInvalidClass||"",!i).trigger({type:"autovalidated",isValid:i,invalids:e(a)})}return i}})})(jQuery);
jQuery.av.lang.is={bullet:" \u2022 ",errorReqMsg:"\u00dea\u00f0 \u00fearf a\u00f0 fylla \u00fat \u00feessa li\u00f0i:\n\n",errorTypeMsg:"\u00deessir li\u00f0ir eru rangt \u00fatfylltir:\n\n",inlineMsgPrefix:"Villa:",inlineReqMsg:"\u00dea\u00f0 \u00fearf a\u00f0 fylla \u00fat \u00feennan li\u00f0 ",inlineTypeMsg:"\u00deessi li\u00f0ur er rangt \u00fat fylltur ",inlineNextError:"N\u00e6sta villa",resetAlert:"Ath: \u00de\u00fa ert \u00ed \u00feann mund a\u00f0 afturkalla \u00f6ll innslegin gildi...",fi_kt_fyrirt:"Sl\u00e1\u00f0u inn fyrirt\u00e6kiskennit\u00f6lu", fi_kt_einst:"Sl\u00e1\u00f0u inn kennit\u00f6lu einstaklings",fi_email:{inline:"Vinsamlega sl\u00e1\u00f0u inn r\u00e9tt netfang (d\u00e6mi: notandi@daemi.is)",alert:"e.g. nafn@domain.is"},fi_url:{inline:"Vinsamlega sl\u00e1\u00f0u inn l\u00f6ggilda vefsl\u00f3\u00f0 (d\u00e6mi: http://www.example.is)",alert:"e.g. http://www.domain.is"},fi_year:{inline:"Vinsamlega sl\u00e1\u00f0u inn r\u00e9tt \u00e1rtal (d\u00e6mi: 1998)",alert:"t.d. 1998"},fi_ccnum_noamex:"American Express kort virka ekki",fi_valuemismatch:"Sta\u00f0festing stemmir ekki"};
(function(b){b.extend(b.av.lang.en,{fi_kt_fyrirt:"Only company 'kennitala's allowed",fi_kt_einst:"Only people's 'kennitala's allowed",fi_email:{inline:"Please provide a valid e-mail address (example: user@example.com)",alert:"e.g. user@example.com"},fi_url:{inline:"Please provide a valid web address (example: http://www.example.is)",alert:"e.g. http://www.example.com"},fi_year:{inline:"Please provide a valid four digit year (example: 1998)",alert:"e.g. 1998"},fi_ccnum_noamex:{inline:"American Express cards not accepted", alert:"AmEx not accepted"},fi_valuemismatch:"Confirmation doesn't match"});var p=b.av.type;b.extend(p,{fi_kt:function(a,d,c){if(a){d=b.av.getError("fi_kt",c);c=a.replace(/[\s\-]/g,"");b(this).val(c);if(/010130(2(12|20|39|47|55|63|71|98)|3(01|36)|4(33|92)|506|778)9/.test(c)||!/^\d{9}[90]$/.test(c))return d;for(var e=[3,2,7,6,5,4,3,2,1],h=0,f=9;f--;)h+=e[f]*c.charAt(f);if(h%11)return d}return!!a},fi_kt_einst:function(a,d,c){d=p.fi_kt.call(this,a,d,c);!0===d&&(a=b(this).val(),3<parseInt(a.substr(0,1), 10)&&(d=b.av.getError("fi_kt_einst",c)));return d},fi_kt_fyrirt:function(a,d,c){var e=p.fi_kt.call(this,a,d,c);!0===e&&((e="string"===typeof p.fi_kt_einst.call(this,a,d,c))||(e=b.av.getError("fi_kt_fyrirt",c)));return e},fi_email:function(a,d,c){return a&&!/^[a-z0-9\-._+]+@(?:[a-z0-9\-_]+\.)+[a-z0-9\-_]{2,99}$/i.test(a)?b.av.getError("fi_email",c):!!a},fi_url:function(a,d,c){return a?(/^www\./.test(a)&&(a="http://"+a,b(this).val(a)),!/^[a-z]+:\/\/.+\..+$/.test(a)||/[\(\)<\>\,\"\[\]\\\s]/.test(a)? b.av.getError("fi_url",c):!0):!1},fi_tel:function(a,b){if(a){var c=b.className.match(/(?:^| )fi_tel_min_(\d+)(?: |$)/);return!a.replace(/(?:\s|[\-+()]|\d)/g,"")&&(!c||c[1]<=a.replace(/\D/g,"").length)||""}return!1},fi_tel_is:function(a){return a?/^(?:\+354)?\d{7}$/.test(a.replace(/[ -()]/g,""))||"":!1},fi_postal_is:function(a,d,c){return a?(d=b.av.postCodes&&b.av.postCodes.is,d?d[a]?(this.nodeType&&(c=b(this).siblings("span.unit"),c.length||(c=b('<span class="unit"></span>'),b(this).after(c)),c.html(d[a])), !0):b.av.getError("fi_pnr",c):/^\d\d\d$/.test(a)||b.av.getError("fi_pnr",c)):!1},fi_pnrs:function(a,d,c){if(a){d=a.replace(/(^[ ,;]+|[ ,;]+$)/g,"").split(/[ ,;]+/);for(var e=0;e<d.length;e++)if(a=b.av.type.fi_postal_is(d[e],null,c),!0!==a)return a;return!0}return!1},fi_qty:function(a){b(this).val(a);return!a||/^\d+$/.test(a)||""},fi_num:function(a){a=a.replace(/^-\s+/,"-").replace(/[,.]$/,"");b(this).val(a);return!a||/\d/.test(a)&&/^-?\d*[.,]?\d*$/.test(a)||""},fi_year:function(a,d,c){return a&&!/^(19|20)\d\d$/.test(a)? b.av.getError("fi_year",c):!!a},fi_date:function(a,d,c){if(a){var e=b.av.getError("fi_year",c);if((d=window.datePicker)&&2>d.VERSION){var h=b.av.id(this),f=d.fields[h];if(f)return(h=d.parseDate(h))?(e=d.printDateValue(h,f.dateFormat,c).replace(/(^\s+|\s+$)/g,""),f.caseSensitive||(a=a.toLowerCase(),e=e.toLowerCase()),e===a||d.printDateValue(new Date(2E3,4,27),f.dateFormat,c)):e}a=a.replace(/[ .-\/]+/g,".").replace(/\.(\d\d)$/,".20$1");return/^(3[01]|[12]?[0-9]|(0)?[1-9])\.(1[012]|(0)?[1-9])\.(19|20)?\d\d$/.test(a)|| e}return!!a},fi_time:function(a,d,c){if(a){d=b.av.getError("fi_time",c);if(/^([01]?\d|2[01234])(?:[:.]([0-5]\d))?(?:[:.]([0-5]\d))?\s*([ap]\.?m\.?)?$/i.test(a)){a=RegExp.$1;c=RegExp.$2||"00";var e=RegExp.$3,h=(RegExp.$4+"").replace(/\./g,"").toLowerCase();"pm"===h&&(a=1*a+12);var f=86400>=3600*a+60*c+60*(e||0);f&&b(this).val(a+":"+c+(e?":"+e:"")+h);return f||d}return d}return!!a},fi_ccnum:function(a,d,c){d=b.av.getError("fi_ccnum",c);if(a){a=a.replace(/[ \-]/g,"");if(!/^(\d{16}|3[47]\d{13})$/.test(a))return d; b(this).val(a);c=0;for(var e,h=a.length;0<h--;)c+=1*a.charAt(h--),e=2*a.charAt(h),c+=Math.floor(e/10)+e%10;return 0===c%10||d}return!!a},fi_ccnum_noamex:function(a,d,c){return a&&15===a.replace(/[ \-]/g,"").length?b.av.getError("fi_ccnum_noamex",c):!!a},fi_ccexp:function(a,d,c){return a?(a=a.replace(/(\d\d)\s*[ -\/]?\s*(\d\d)/,"$1/$2").replace(/\s+/g,""),/^(0\d|1[012])\/(\d\d)$/.test(a)||b.av.getError("fi_ccexp",c)):!!a},fi_sameasprev:function(a,d,c){if(a=b(this).val()){d=b(this.form).find(".fi_txt>input,select,textarea"); var e=d.index(this);if((d=0<e?d.eq(e-1).val():"")&&a!==d)return b.av.getError("fi_valuemismatch",c)}return!!a}});p.fi_pnr=p.fi_postal_is})(jQuery);
