// encoding: utf-8
// $.fn.autoValidate/.defangEnter/.defangReset  1.0  -- (c) 2009 Hugsmiðjan ehf. 
(function(a){var y='tmp_'+(new Date()).getTime();var z=0;var w={lang:'en',maxLabelLength:35,errorAction:'focus',focusElmClass:'stream',submittedClass:'issubmitted',validateEachField:'',errorMsgType:'alertonly',inlineErrorClass:'errmsg',nextErrorLinkClass:'nexterror',customReqCheck:{},reqClassPattern:'req',reqErrorClass:'reqerror',typeErrorClass:'typeerror',defangReset:true,defangEnter:'auto'};a.extend({av:{lang:{en:{bullet:' • ',errorReqMsg:'Please fill out these fields:\n\n',errorTypeMsg:'These fields contain invalid input:\n\n',inlineMsgPrefix:'Error:',inlineReqMsg:'This field is required ',inlineTypeMsg:'This field contains an invalid value ',inlineNextError:'Next error',resetAlert:'Note: You are about to reset all values in the form...'}},id:function(c){c=a(c);var b=c.attr('id');return(b)?b:c.attr('id',y+'_'+(z++)).attr('id')},cleanLabelString:function(c,b){if(!c){return''}b=b||35;c=c.replace(/\s\s+/g,' ').replace(/ - /g,', ').replace(/\[/g,'(').replace(/\]/g,')').replace(/\([^)]+\)/g,'').replace(/[\s*:#]+$/,'').replace(/^[\s*#]+/,'');if(c.length>(b+2)){c=c.substr(0,(b-2)).replace(/[.,:;\s]+$/,'')+'...'}return c},getLabel:function(c,b,d){var e=c.find(':input:first');var f=e.data('av-labeltext');if(!f){f=a.av.cleanLabelString(e.attr('title'),d.maxLabelLength);var g=e.attr('id');if(!f&&g){var h=e.parents('form').find('label[for='+g+']').text()||e.parent('label').text()||c.find('label').eq(0).text();f=a.av.cleanLabelString(h,d.maxLabelLength)}var k=c.is('fieldset:has(input[name='+e.attr('name')+']:odd)');if(k){var l=c.find(':header, legend, p').eq(0).text();f=(l)?a.av.cleanLabelString(l,d.maxLabelLength):f}if(!f){f=e.attr('name')}var j=b.find('fieldset:has(#'+a.av.id(c)+'):last').children(':header:first-child, legend:first-child, p:first-child');if(j.length){f=f+' ['+a.av.cleanLabelString(j.text(),d.maxLabelLength)+']'}a(e).data('av-labeltext',f)}return f},getText:function(c,b){return a.av.getError(c,b)||a.av.getError(c,'en')||''},getError:function(c,b){return(a.av.lang[b]&&a.av.lang[b][c])||''},config:function(c,b){var d=a(c),e=a(d.filter('form')[0]||d.parents('form')[0]||d.find('form')[0]);if(b){e.data('av-config',b)}else{b=e.data('av-config');if(!b){b=a.extend({},w);e.data('av-config',b)}}return b},addInlineLabels:function(f){var g=a.av.config(f[0]);a.each(f,function(c){var b=a(this);var d=b.attr('lang')||b.parents('[lang]').attr('lang');b.attr('lang',d);var e=a.av.getText('inlineReqMsg',d);if(b.is('.'+g.typeErrorClass)){e=b.data('av-error')||a.av.getText('inlineTypeMsg',d)}b.prepend('<strong class="'+g.inlineErrorClass+'">'+e+'</strong>');if(c<f.length-1){b.append('<a href="#'+a.av.id(f[c+1])+'" class="'+g.nextErrorLinkClass+'">'+a.av.getText('inlineNextError',d)+'</a>')}})},alertErrors:function(e,f){var g=a.av.config(e[0]);var h=a(e[0]).attr('lang')||a(e[0]).parents('[lang]').attr('lang');a(e[0]).attr('lang',h);var k=[];var l=[];var j='';a.each(e,function(c){var b=a(this);var d=a.av.getLabel(b,f,g);if(a(this).is('.'+g.typeErrorClass)){l.push(d)}else{k.push(d)}});var m=a.av.getText('bullet',h);if(k.length){j+=a.av.getText('errorReqMsg',h)+m+k.join('\n'+m)}if(l.length){j+='\n\n';j+=a.av.getText('errorTypeMsg',h)+m+l.join('\n'+m)}alert(a.trim(j))},focusNext:function(f){var g=a(':input').get();g=g.sort(function(c,b){var d=(c.tabIndex>0)?c.tabIndex:99999;var e=(b.tabIndex>0)?b.tabIndex:99999;return((d<e)*-1)+((d>e)*1)});var h=a.inArray(f,g);while(g[++h]&&g[h].tabIndex==-1){}var k=a(g[h]||g[0]);setTimeout(function(){k.trigger('focus')},1);return k}}});var p=function(c){return!!c},x=function(c){var b=a(this);return b.parents('form').find('[name='+b.attr('name')+']').is(':checked')};a.extend(a.av,{type:{'fi_btn':function(c){return true},'fi_txt':p,'fi_sel':p,'fi_bdy':p,'fi_file':p,'fi_chk':x,'fi_rdo':x}});a.fn.extend({defangReset:function(){return this.bind('click',function(c){var b=a(this);var d=b.attr('lang')||b.parents('[lang]').attr('lang')||'en';b.attr('lang',d);if(confirm(a.av.getText('resetAlert',d))){if(b.attr('type')!=="reset"){var e=b.parents('form').get(0);if(e){e.trigger('reset')}}return true}return false})},defangEnter:function(){return this.bind('keydown',function(c){var b=c.target;return(c.which!=13||b.tagName!='INPUT'||/^(button|reset|submit)$/i.test(b.type))})},autoValidate:function(k){return this.each(function(){var f=a(this),g=a(f.filter('form')[0]||f.parents('form')[0]||f.find('form')[0]);if(!g.length){return false}var h=a.extend({},w,k);a.av.config(this,h);if(h.defangReset){g.find(':reset').defangReset(h)}if(!h.emulateTab&&h.defangEnter===true||h.defangEnter==='true'||(h.defangEnter==='auto'&&a(':submit',g).length>1)){g.defangEnter()}if(h.emulateTab){g.bind('keydown',function(c){if(c.keyCode==13&&a(c.target).is(':input:not(:button):not(:reset):not(:submit):not(textarea)')){a.av.focusNext(c.target);return false}})}if(h.maxLengthTab){g.bind('keyup',function(c){var b=a(c.target);var d=c.which;if((d>0&&d!=8&&d!=9&&d!=13&&d!=16&&d!=17)&&b.attr('maxlength')==b.val().length){a.av.focusNext(c.target)}})}if(/blur|change/.test(h.validateEachField)){}g.bind('submit',function(c){var b=a(this);if(!b.data('av.skip')||b.data('av.disabled')){var d=a.av.config(this);var e=b.isValid();if(e){b.addClass(d.submittedClass)}else{c.preventDefault()}return e}b.removeData('av.skip')})})},isValid:function(n){n=!!(n||n==null);var o=[],t='',u=false;this.each(function(){var q=a(this),r=[],A=true,i=a.av.config(this);u=u||/both|alertonly/.test(i.errorMsgType);t=t||'strong.'+i.inlineErrorClass+', a.'+i.nextErrorLinkClass;q.find(t).remove();var B=q.is(':input')?q:q.find(':input');B.not(i.includeDisabled?'':':disabled').each(function(){var c=a(this);c.removeData('av-malformed');var b=(this.type=='checkbox')?{'fi_chk':a.av.type['fi_chk']}:{'fi_txt':a.av.type['fi_txt']},d=c.parents('[class^="fi_"], [class*=" fi_"]').eq(0),e=d.attr('lang')||d.parents('[lang]').attr('lang'),f=d.hasClass(i.reqClassPattern)||c.hasClass(i.reqClassPattern),g=a.trim(c.val());d.removeClass(i.reqErrorClass);d.removeClass(i.typeErrorClass);if(d.length!==0){var h,k=a.trim(d.attr('class')).split(' ');while(h=k.pop()){if(/^fi_/.test(h)&&a.isFunction(a.av.type[h])){b[h]=a.av.type[h]}}}var l=c.attr('name'),j=i.customReqCheck&&i.customReqCheck[l];if(j&&a.isFunction(j)){f=j.call(this,g,d.get(0)||this,e)}else if(j&&typeof(j)==='string'){var m=/^(!)?(.*)$/.exec(j);var s=a(':input[name='+m[2]+']',this.form);if(s.length){f=s.is(':checkbox, :radio')?!m[1]^!s.filter(':checked').length:!m[1]^(s.val()=='')}}if(i.customTypeCheck&&a.isFunction(i.customTypeCheck[l])){b[l]=i.customTypeCheck[l]}for(var C in b){d.attr('lang',e);var v=b[C].call(this,g,d.get(0)||this,e);if(v!==true){A=false;if(typeof(v)==='string'){r.push(d.get(0));d.data('av-error',v);d.removeClass(i.reqErrorClass);d.addClass(i.typeErrorClass)}else if(f){r.push(d.get(0));d.addClass(i.reqErrorClass)}}}});if(n&&/both|inlineonly/.test(i.errorMsgType)){a.av.addInlineLabels(a.unique(r))}o=o.concat(r)});if(n&&u&&o.length){a.av.alertErrors(a.unique(o),this)}return!o.length}})})(jQuery);
// encoding: utf-8
jQuery.av.lang.is={bullet:' • ',errorReqMsg:'Það þarf að fylla út þessa liði:\n\n',errorTypeMsg:'Þessir liðir eru rangt útfylltir:\n\n',inlineMsgPrefix:'Villa:',inlineReqMsg:'Það þarf að fylla út þennan lið ',inlineTypeMsg:'Þessi liður er rangt út fylltur ',inlineNextError:'Næsta villa',resetAlert:'Ath: Þú ert í þann mund að afturkalla öll innslegin gildi...',fi_email:'Vinsamlega sláðu inn rétt netfang (dæmi: notandi@daemi.is)',fi_url:'Vinsamlega sláðu inn löggilda vefslóð (dæmi: http://www.example.is)',fi_year:'Vinsamlega sláðu inn rétt ártal (dæmi: 1998)',fi_ccnum_noamex:'American Express kort virka ekki'};
// encoding: utf-8
(function(c){c.extend(c.av.lang.en,{fi_email:'Please provide a valid e-mail address (example: user@example.com)',fi_url:'Please provide a valid web address (example: http://www.example.is)',fi_year:'Please provide a valid four digit year (example: 1998)',fi_ccnum_noamex:'American Express cards not accepted'});var k=c.av.type;c.extend(k,{fi_kt:function(a,g,b){var e=c.av.getError('fi_kt',b);if(a){var d=a.replace(/[\s\-]/g,'');c(this).val(d);var f=/010130(2(12|20|39|47|55|63|71|98)|3(01|36)|4(33|92)|506|778)9/.test(d);if(f||!/^\d{9}[90]$/.test(d)){return e}var i=[3,2,7,6,5,4,3,2,1],h=0,j=9;while(j--){h+=(i[j]*d.charAt(j))}if(h%11){return e}}return!!a},fi_email:function(a,g,b){if(a&&!/^[a-z0-9-._+]+@([a-z0-9-_]+\.)+[a-z0-9-_]{2,99}$/i.test(a)){return c.av.getError('fi_email',b)}return!!a},fi_url:function(a,g,b){if(a){var e=a.replace(/^[a-z]+:\/\/.+$/i,'');if(!/^[a-z]+:\/\/.+\..+$/.test(a)||/[\(\)\<\>\,\:\"\[\]\\]/.test(e)){return c.av.getError('fi_url',b)}return true}return false},fi_tel:function(a,g,b){if(a){return!a.replace(/(\s|[-+()]|\d)/g,'')||''}return false},fi_postal_is:function(a,g,b){if(a){var e=c.av.postCodes&&c.av.postCodes.is;if(!e){return/^\d\d\d$/.test(a)||c.av.getError('fi_pnr',b)}else if(e[a]){if(this.nodeType){var d=c(this).siblings('span.unit');if(!d.length){d=c('<span class="unit"></span>');c(this).after(d)}d.html(e[a])}return true}return c.av.getError('fi_pnr',b)}return false},fi_pnrs:function(a,g,b){if(a){var e=a.replace(/(^[ ,;]+|[ ,;]+$)/g,'').split(/[ ,;]+/);var a,d=false;for(var f=0;f<e.length;f++){a=c.av.type['fi_postal_is'](e[f],null,b);if(a!==true){return a}}return true}return false},fi_qty:function(a,g,b){c(this).val(a);return!a||/^\d+$/.test(a)||''},fi_num:function(a,g,b){var a=a.replace(/^-\s+/,'-').replace(/[,.]$/,'');c(this).val(a);return!a||(/\d/.test(a)&&/^-?\d*[.,]?\d*$/.test(a))||''},fi_year:function(a,g,b){if(a&&!/^(19|20)\d\d$/.test(a)){return c.av.getError('fi_year',b)}return!!a},fi_date:function(a,g,b){if(a){var e=c.av.getError('fi_year',b);if(window.datePicker&&datePicker.VERSION<2){var d=c.av.id(this),f=datePicker.fields[d];if(f){var i=datePicker.parseDate(d);if(!i){return e}else{var h=datePicker.printDateValue(i,f.dateFormat,b).replace(/(^\s+|\s+$)/g,'');if(!f.caseSensitive){a=a.toLowerCase();h=h.toLowerCase()}return(h==a)||datePicker.printDateValue(new Date(2000,4,27),f.dateFormat,b)}}}a=a.replace(/[ .-\/]+/g,'.').replace(/\.(\d\d)$/,'.20$1');return/^(3[01]|[12]?[0-9]|(0)?[1-9])\.(1[012]|(0)?[1-9])\.(19|20)?\d\d$/.test(a)||e}return!!a},fi_time:function(a,g,b){if(a){var e=c.av.getError('fi_time',b);if(/^([01]?\d|2[01234])(:([0-5]\d))?(:([0-5]\d))?\s*([ap]\.?m\.?)?$/i.test(a)){var d=parseInt(RegExp.$1,10),f=parseInt(RegExp.$3||'0',10),i=parseInt(RegExp.$5||'0',10),h=(RegExp.$6+'').replace('.','').toLowerCase();if(h=='pm'){d+=12}var j=(d*60*60)+(f*60)+(i*60);return(j<=86400)||e}else{return e}}return!!a},fi_ccnum:function(a,g,b){var e=c.av.getError('fi_ccnum',b);if(a){var d=a.replace(/[ -]/g,'');if(!/^(\d{16}|3[47]\d{13})$/.test(d)){return e}c(this).val(d);var f=0,i,h=d.length;while(h-->0){f+=d.charAt(h--)*1;i=d.charAt(h)*2;f+=Math.floor(i/10)+(i%10)}var j=(f%10)===0;return j||e}return!!a},fi_ccnum_noamex:function(a,g,b){if(a&&a.replace(/[ -]/g,'').length==15){return c.av.getError('fi_ccnum_noamex',b)}return!!a},fi_ccexp:function(a,g,b){if(a){a=a.replace(/(\d\d)\s*[ -\/]?\s*(\d\d)/,'$1/$2').replace(/\s+/g,'');return/^(0\d|1[012])\/(\d\d)$/.test(a)||c.av.getError('fi_ccexp',b)}return!!a}});k.fi_pnr=k.fi_postal_is})(jQuery);
