// $.fn.autoValidate/.defangEnter/.defangReset  1.0  -- (c) 2009-2013 HugsmiÃ°jan ehf.
(function(b){b.fn.addBack=b.fn.addBack||b.fn.andSelf;var p="tmp_"+(new Date).getTime(),a=0,d={lang:"en",maxLabelLength:35,errorAction:"focus",focusElmClass:"stream",submittedClass:"issubmitted",validateEachField:"",errorMsgType:"alertonly",inlineErrorClass:"errmsg",nextErrorLinkClass:"nexterror",customReqCheck:{},reqClassPattern:"req",reqErrorClass:"reqerror",typeErrorClass:"typeerror",defangReset:!0,defangEnter:"auto"};b.extend({av:{lang:{en:{bullet:" \u2022 ",errorReqMsg:"Please fill out these fields:\n\n", errorTypeMsg:"These fields contain invalid input:\n\n",inlineMsgPrefix:"Error:",inlineReqMsg:"This field is required ",inlineTypeMsg:"This field contains an invalid value ",inlineNextError:"Next error",resetAlert:"Note: You are about to reset all values in the form..."}},id:function(h){h=b(h);var f=h.attr("id");return f?f:h.attr("id",p+"_"+a++).attr("id")},cleanLabelString:function(b,a){if(!b)return"";a=a||35;b=b.replace(/\s\s+/g," ").replace(/ - /g,", ").replace(/\[/g,"(").replace(/\]/g,")").replace(/\([^)]+\)/g, "").replace(/[\s*:#]+$/,"").replace(/^[\s*#]+/,"");b.length>a+2&&(b=b.substr(0,a-2).replace(/[.,:;\s]+$/,"")+"...");return b},getLabel:function(a,f,c){var d=a.find(":input:first"),g=d.data("av-labeltext");if(!g){var g=b.av.cleanLabelString(d.attr("title"),c.maxLabelLength),m=d.attr("id");!g&&m&&(g=d.closest("form").find("label[for="+m+"]").text()||d.parent("label").text()||a.find("label").eq(0).text(),g=b.av.cleanLabelString(g,c.maxLabelLength));a.is("fieldset")&&a.find("input[name="+d.attr("name")+ "]")[1]&&(g=(m=a.find(":header,legend,p").eq(0).text()||a.attr("title"))?b.av.cleanLabelString(m,c.maxLabelLength):g);g||(g=d.attr("name"));a=f.find("fieldset:has(#"+b.av.id(a)+"):last");f=a.children(":header,legend,p").eq(0);f.length&&(g+=" ["+b.av.cleanLabelString(f.text()||a.attr("title"),c.maxLabelLength)+"]");b(d).data("av-labeltext",g)}return g},getText:function(a,f){return b.av.getError(a,f)||b.av.getError(a,"en")||""},getError:function(a,f){return b.av.lang[f]&&b.av.lang[f][a]||""},config:function(a, f){var c=b(a),c=b(c.closest("form")[0]||c.find("form")[0]);f?c.data("av-config",f):(f=c.data("av-config"),f||(f=b.extend({},d),c.data("av-config",f)));return f},addInlineLabels:function(a){var f=b.av.config(a[0]);b.each(a,function(c){var d=b(this),g=d.closest("[lang]").attr("lang");d.attr("lang",g);var m=b.av.getText("inlineReqMsg",g);d.is("."+f.typeErrorClass)&&(m=d.data("av-error")||b.av.getText("inlineTypeMsg",g));d.prepend('<strong class="'+f.inlineErrorClass+'">'+m+"</strong>");c<a.length-1&& d.append('<a href="#'+b.av.id(a[c+1])+'" class="'+f.nextErrorLinkClass+'">'+b.av.getText("inlineNextError",g)+"</a>")})},alertErrors:function(a,c){var d=b.av.config(a[0]),e=b(a[0]).closest("[lang]").attr("lang");b(a[0]).attr("lang",e);var g=[],m=[],q="";b.each(a,function(){var a=b(this),h=b.av.getLabel(a,c,d);(a=a.data("av-error-short"))&&(h+=" ("+a+")");b(this).is("."+d.typeErrorClass)?m.push(h):g.push(h)});var k=b.av.getText("bullet",e);g.length&&(q+=b.av.getText("errorReqMsg",e)+k+g.join("\n"+ k));m.length&&(q=q+"\n\n"+(b.av.getText("errorTypeMsg",e)+k+m.join("\n"+k)));alert(b.trim(q))},focusNext:function(a){var c=b(":input").get(),c=c.sort(function(a,b){var c=0<a.tabIndex?a.tabIndex:99999,d=0<b.tabIndex?b.tabIndex:99999;return-1*(c<d)+1*(c>d)});for(a=b.inArray(a,c);c[++a]&&-1===c[a].tabIndex;);var d=b(c[a]||c[0]);setTimeout(function(){d.trigger("focus")},1);return d}}});var c=function(a){return!!a},e=function(){var a=b(this),a=a.closest("form").find("input[name="+a.attr("name")+"]:checked"); return!!a[0]&&(!a.is(":radio")||!!a.filter(function(){return!!b(this).val()})[0])};b.extend(b.av,{type:{fi_btn:function(){return!0},fi_txt:c,fi_sel:c,fi_bdy:c,fi_file:c,fi_chk:e,fi_rdo:e}});(function(a){a.fn.constrainNumberInput=function(a){a=a?a.charAt?{selector:a}:a:{};var h=a.selector;a.arrows&&(h?this.on("keydown",h,b).on("focusin",h,c):this.on("keydown",b).on("focusin",c));h?this.on("keypress",h,d):this.on("keypress",d);return this};var b=function(b){var c=38===b.which?1:40===b.which?-1:0;this.autocomplete= "off";if(c){var c=c*(this.step||1)*(b.shiftKey?10:1),d,f;b=a(this);var e=(parseInt(a.trim(this.value),10)||0)+c,e=0>c&&this.min&&!isNaN(d=parseInt(this.min,10))?Math.max(e,d):0<c&&this.max&&!isNaN(f=parseInt(this.max,10))?Math.min(e,f):e;b.val()!=e&&(b.val(e),b.data("cni_focused")?b.data("cni_changed",!0):b.trigger("change"))}},c=function(){var b=a(this);b.data("cni_focused",!0).off(".cni").one("change.cni",function(){b.removeData("cni_focused").removeData("cni_changed").off("focusout.cni")}).one("focusout.cni", function(){setTimeout(function(){b.data("cni_focused")&&b.data("cni_changed")&&b.removeData("cni_focused").trigger("change");b.removeData("cni_changed")},100)})},d=function(a){!a.ctrlKey&&!a.metaKey&&a.which&&8!==a.which&&13!==a.which&&(48>a.which||57<a.which)&&a.preventDefault()}})(jQuery);b.fn.extend({defangReset:function(){return this.bind("click",function(){var a=b(this),c=a.closest("[lang]").attr("lang")||"en";a.attr("lang",c);return confirm(b.av.getText("resetAlert",c))?("reset"!==a.attr("type")&& a.closest("form").trigger("reset"),!0):!1})},defangEnter:function(){return this.bind("keydown",function(a){var b=a.target;return 13!==a.which||"INPUT"!==b.tagName||/^(button|reset|submit)$/i.test(b.type)})},autoValidate:function(a){return this.each(function(){var c=b(this),c=b(c.closest("form")[0]||c.find("form")[0]);if(!c.length)return!1;var e=b.extend({},d,a);b.av.config(this,e);e.defangReset&&c.find(":reset").defangReset(e);(!e.emulateTab&&!0===e.defangEnter||"true"===e.defangEnter||"auto"===e.defangEnter&& 1<b(":submit",c).length)&&c.defangEnter();e.emulateTab&&c.bind("keydown",function(a){if(13===a.keyCode&&b(a.target).is(":input:not(:button):not(:reset):not(:submit):not(textarea)"))return b.av.focusNext(a.target),!1});e.maxLengthTab&&c.bind("keyup",function(a){var c=b(a.target),d=a.which;0<d&&8!==d&&9!==d&&13!==d&&16!==d&&17!==d&&c.attr("maxlength")===c.val().length&&b.av.focusNext(a.target)});c.bind("submit",function(a){var c=b(this);if(!c.data("av.skip")||c.data("av.disabled")){var d=b.av.config(this), e=c.isValid();e?c.addClass(d.submittedClass):a.preventDefault();return e}c.removeData("av.skip")})})},isValid:function(a){a=!(!a&&null!=a);var c=[],d="",e=!1;this.each(function(){var g=b(this),q=[],k=b.av.config(this);e=e||/both|alertonly/.test(k.errorMsgType);d=d||"strong."+k.inlineErrorClass+", a."+k.nextErrorLinkClass;a&&g.find(d).remove();(g.is(":input")?g:g.find(":input")).not(k.includeDisabled?"":":disabled").not(':submit,:reset,:button,[type="hidden"]').each(function(){var c=b(this),d="checkbox"=== this.type?{fi_chk:b.av.type.fi_chk}:"radio"===this.type?{fi_rdo:b.av.type.fi_rdo}:{fi_txt:b.av.type.fi_txt},e=c.closest('[class^="fi_"], [class*=" fi_"]'),f=e.closest("[lang]").attr("lang"),g=e.hasClass(k.reqClassPattern)||c.hasClass(k.reqClassPattern);a&&(e.removeClass(k.reqErrorClass),e.removeClass(k.typeErrorClass));if(0!==e.length)for(var l,n=b.trim(e.attr("class")).split(/\s+/);l=n.pop();)/^fi_/.test(l)&&b.isFunction(b.av.type[l])&&(d[l]=b.av.type[l]);l=c.attr("name");if((n=k.customReqCheck&& k.customReqCheck[l])&&b.isFunction(n))g=n.call(this,b.trim(c.val()),e.get(0)||this,f);else if(n&&"string"===typeof n){var n=/^(!)?(.*)$/.exec(n),m=b(":input[name="+n[2]+"]",this.form);m.length&&(g=m.is(":checkbox, :radio")?!n[1]^!m.filter(":checked").length:!n[1]^""===m.val())}k.customTypeCheck&&b.isFunction(k.customTypeCheck[l])&&(d[l]=k.customTypeCheck[l]);for(var p in d)if(e.attr("lang",f),l=d[p].call(this,b.trim(c.val()),e.get(0)||this,f),!0!==l)if(n="string"===typeof l,l||n){if(q.push(e.get(0)), a){var r;n||(r=l.alert,l=l.inline);e.data("av-error",l);e.data("av-error-short","string"===typeof r?r:l);e.removeClass(k.reqErrorClass);e.addClass(k.typeErrorClass)}}else g&&(q.push(e.get(0)),a&&e.addClass(k.reqErrorClass))});a&&/both|inlineonly/.test(k.errorMsgType)&&b.av.addInlineLabels(b.unique(q));c=c.concat(q)});if(a&&c.length){var g=b(c[0]).find("*").addBack().filter("input, select, textarea");g.focusHere?g.focusHere():g.setFocus?g.focusHere():g[0].focus()}a&&e&&c.length&&b.av.alertErrors(b.unique(c), this);return!c.length}})})(jQuery);
jQuery.av.lang.is={bullet:" \u2022 ",errorReqMsg:"\u00dea\u00f0 \u00fearf a\u00f0 fylla \u00fat \u00feessa li\u00f0i:\n\n",errorTypeMsg:"\u00deessir li\u00f0ir eru rangt \u00fatfylltir:\n\n",inlineMsgPrefix:"Villa:",inlineReqMsg:"\u00dea\u00f0 \u00fearf a\u00f0 fylla \u00fat \u00feennan li\u00f0 ",inlineTypeMsg:"\u00deessi li\u00f0ur er rangt \u00fat fylltur ",inlineNextError:"N\u00e6sta villa",resetAlert:"Ath: \u00de\u00fa ert \u00ed \u00feann mund a\u00f0 afturkalla \u00f6ll innslegin gildi...",fi_kt_fyrirt:"Sl\u00e1\u00f0u inn fyrirt\u00e6kiskennit\u00f6lu", fi_kt_einst:"Sl\u00e1\u00f0u inn kennit\u00f6lu einstaklings",fi_email:{inline:"Vinsamlega sl\u00e1\u00f0u inn r\u00e9tt netfang (d\u00e6mi: notandi@daemi.is)",alert:"e.g. nafn@domain.is"},fi_url:{inline:"Vinsamlega sl\u00e1\u00f0u inn l\u00f6ggilda vefsl\u00f3\u00f0 (d\u00e6mi: http://www.example.is)",alert:"e.g. http://www.domain.is"},fi_year:{inline:"Vinsamlega sl\u00e1\u00f0u inn r\u00e9tt \u00e1rtal (d\u00e6mi: 1998)",alert:"t.d. 1998"},fi_ccnum_noamex:"American Express kort virka ekki",fi_valuemismatch:"Sta\u00f0festing stemmir ekki"};
(function(b){b.extend(b.av.lang.en,{fi_kt_fyrirt:"Only company 'kennitala's allowed",fi_kt_einst:"Only people's 'kennitala's allowed",fi_email:{inline:"Please provide a valid e-mail address (example: user@example.com)",alert:"e.g. user@example.com"},fi_url:{inline:"Please provide a valid web address (example: http://www.example.is)",alert:"e.g. http://www.example.com"},fi_year:{inline:"Please provide a valid four digit year (example: 1998)",alert:"e.g. 1998"},fi_ccnum_noamex:{inline:"American Express cards not accepted", alert:"AmEx not accepted"},fi_valuemismatch:"Confirmation doesn't match"});var p=b.av.type;b.extend(p,{fi_kt:function(a,d,c){if(a){d=b.av.getError("fi_kt",c);c=a.replace(/[\s\-]/g,"");b(this).val(c);if(/010130(2(12|20|39|47|55|63|71|98)|3(01|36)|4(33|92)|506|778)9/.test(c)||!/^\d{9}[90]$/.test(c))return d;for(var e=[3,2,7,6,5,4,3,2,1],h=0,f=9;f--;)h+=e[f]*c.charAt(f);if(h%11)return d}return!!a},fi_kt_einst:function(a,d,c){d=p.fi_kt.call(this,a,d,c);!0===d&&(a=b(this).val(),3<parseInt(a.substr(0,1), 10)&&(d=b.av.getError("fi_kt_einst",c)));return d},fi_kt_fyrirt:function(a,d,c){var e=p.fi_kt.call(this,a,d,c);!0===e&&((e="string"===typeof p.fi_kt_einst.call(this,a,d,c))||(e=b.av.getError("fi_kt_fyrirt",c)));return e},fi_email:function(a,d,c){return a&&!/^[a-z0-9\-._+]+@(?:[a-z0-9\-_]+\.)+[a-z0-9\-_]{2,99}$/i.test(a)?b.av.getError("fi_email",c):!!a},fi_url:function(a,d,c){return a?(/^www\./.test(a)&&(a="http://"+a,b(this).val(a)),!/^[a-z]+:\/\/.+\..+$/.test(a)||/[\(\)<\>\,\"\[\]\\\s]/.test(a)? b.av.getError("fi_url",c):!0):!1},fi_tel:function(a,b){if(a){var c=b.className.match(/(?:^| )fi_tel_min_(\d+)(?: |$)/);return!a.replace(/(?:\s|[\-+()]|\d)/g,"")&&(!c||c[1]<=a.replace(/\D/g,"").length)||""}return!1},fi_tel_is:function(a){return a?/^(?:\+354)?\d{7}$/.test(a.replace(/[ -()]/g,""))||"":!1},fi_postal_is:function(a,d,c){return a?(d=b.av.postCodes&&b.av.postCodes.is,d?d[a]?(this.nodeType&&(c=b(this).siblings("span.unit"),c.length||(c=b('<span class="unit"></span>'),b(this).after(c)),c.html(d[a])), !0):b.av.getError("fi_pnr",c):/^\d\d\d$/.test(a)||b.av.getError("fi_pnr",c)):!1},fi_pnrs:function(a,d,c){if(a){d=a.replace(/(^[ ,;]+|[ ,;]+$)/g,"").split(/[ ,;]+/);for(var e=0;e<d.length;e++)if(a=b.av.type.fi_postal_is(d[e],null,c),!0!==a)return a;return!0}return!1},fi_qty:function(a){b(this).val(a);return!a||/^\d+$/.test(a)||""},fi_num:function(a){a=a.replace(/^-\s+/,"-").replace(/[,.]$/,"");b(this).val(a);return!a||/\d/.test(a)&&/^-?\d*[.,]?\d*$/.test(a)||""},fi_year:function(a,d,c){return a&&!/^(19|20)\d\d$/.test(a)? b.av.getError("fi_year",c):!!a},fi_date:function(a,d,c){if(a){var e=b.av.getError("fi_year",c);if((d=window.datePicker)&&2>d.VERSION){var h=b.av.id(this),f=d.fields[h];if(f)return(h=d.parseDate(h))?(e=d.printDateValue(h,f.dateFormat,c).replace(/(^\s+|\s+$)/g,""),f.caseSensitive||(a=a.toLowerCase(),e=e.toLowerCase()),e===a||d.printDateValue(new Date(2E3,4,27),f.dateFormat,c)):e}a=a.replace(/[ .-\/]+/g,".").replace(/\.(\d\d)$/,".20$1");return/^(3[01]|[12]?[0-9]|(0)?[1-9])\.(1[012]|(0)?[1-9])\.(19|20)?\d\d$/.test(a)|| e}return!!a},fi_time:function(a,d,c){if(a){d=b.av.getError("fi_time",c);if(/^([01]?\d|2[01234])(?:[:.]([0-5]\d))?(?:[:.]([0-5]\d))?\s*([ap]\.?m\.?)?$/i.test(a)){a=RegExp.$1;c=RegExp.$2||"00";var e=RegExp.$3,h=(RegExp.$4+"").replace(/\./g,"").toLowerCase();"pm"===h&&(a=1*a+12);var f=86400>=3600*a+60*c+60*(e||0);f&&b(this).val(a+":"+c+(e?":"+e:"")+h);return f||d}return d}return!!a},fi_ccnum:function(a,d,c){d=b.av.getError("fi_ccnum",c);if(a){a=a.replace(/[ \-]/g,"");if(!/^(\d{16}|3[47]\d{13})$/.test(a))return d; b(this).val(a);c=0;for(var e,h=a.length;0<h--;)c+=1*a.charAt(h--),e=2*a.charAt(h),c+=Math.floor(e/10)+e%10;return 0===c%10||d}return!!a},fi_ccnum_noamex:function(a,d,c){return a&&15===a.replace(/[ \-]/g,"").length?b.av.getError("fi_ccnum_noamex",c):!!a},fi_ccexp:function(a,d,c){return a?(a=a.replace(/(\d\d)\s*[ -\/]?\s*(\d\d)/,"$1/$2").replace(/\s+/g,""),/^(0\d|1[012])\/(\d\d)$/.test(a)||b.av.getError("fi_ccexp",c)):!!a},fi_sameasprev:function(a,d,c){if(a=b(this).val()){d=b(this.form).find(".fi_txt>input,select,textarea"); var e=d.index(this);if((d=0<e?d.eq(e-1).val():"")&&a!==d)return b.av.getError("fi_valuemismatch",c)}return!!a}});p.fi_pnr=p.fi_postal_is})(jQuery);
