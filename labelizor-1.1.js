// $.fn.labelizor 1.1  -- (c) 2011 Hugsmi√∞jan ehf.
(function(c){var h='labelizor',k=h+'label';c.fn[h]=function(b,s){var p=b&&b.charAt?b:'',b=c.extend({lRe:/(\*|:[\W\S]*$)/g,useLabel:true,blurClass:s||'labelized',hideClass:p||'stream'},!p&&b),t='placeholder'in c('<input/>')[0],o=b.hideClass,l=b.blurClass,m=b.labelFilter,n=b.useLabel,q=function(d){var a=c(this),f=a.val(),j=a.data(k),e=!f||(d==h&&f==j);if(e){a.val(j)}a.toggleClass(l,e)},u=function(d){var a=c(this),f=a.val();if(!f||(a.is('.'+l)&&f==a.data(k))){a.val('').removeClass(l)}},v=function(f){c(this).find('.'+l).filter(function(){var d=c(this),a=d.data(k);return a&&d.val()==a}).val('')};this.filter('textarea, input:not(:checkbox,:radio,:submit,:button,:reset)').each(function(){var d=this,a=c(d),f=c(d.form);if(!a.data(h)){var j=a.attr('placeholder'),e=b.labelText||j,i=d.title,g=c([]),r;a.data(h,!0);if(o||(n&&!(e||i))){g=a.closest('label',f);if(!g[0]&&d.id){g=f.find('label[for="'+d.id+'"]').eq(0)}}if(!e){e=!(n&&m)?(b.preferTitle&&i)||(n&&g.text())||i:c.isFunction(m)?m(g,a):g.find(m).text();r=e!=i;e=c.trim(e.replace(b.lRe||'',b.lPlace||''))}if(o&&(!b.condHide||(n&&r))){g.addClass(o)}if(!t){a.data(k,e);f.on('submit',v)}else if(!j){a.attr('placeholder',e)}if(i){a.attr('title',i||e)}a.on('focus',u).on('blur change',q);q.call(d,h)}});return this}})(jQuery);
