// encoding: utf-8
// $.fn.labelizor 1.1  -- (c) 2011 Hugsmi√∞jan ehf.
(function(c){var e='labelizor';c.fn[e]=function(b,r){var o=b&&b.charAt?b:'',b=c.extend({lRe:/(\*|:[\W\S]*$)/g,useLabel:true,blurClass:r||'labelized',hideClass:o||'stream'},!o&&b),s='placeholder'in c('<input/>')[0],n=b.hideClass,k=b.blurClass,l=b.labelFilter,m=b.useLabel,p=function(d){var a=c(this),f=a.val(),j=a.data(e+'label');if(!f||(d==e&&f==j)){a.val(j).addClass(k)}},t=function(d){var a=c(this),f=a.val();if(!f||(a.is('.'+k)&&f==a.data(e+'label'))){a.val('').removeClass(k)}},u=function(d){c(this).find('.'+k).filter(function(){return c(this).data(e)}).val('')};this.filter(':text, :password, textarea').each(function(){var d=this,a=c(d),f=c(d.form);if(!a.data(e)){var j=a.attr('placeholder'),g=b.labelText||j,i=d.title,h=c([]),q;a.data(e,!0);if(n||(m&&!(g||i))){h=a.closest('label',f);if(!h[0]&&d.id){h=f.find('label[for="'+d.id+'"]').eq(0)}}if(!g){g=!(m&&l)?(b.preferTitle&&i)||(m&&h.text())||i:c.isFunction(l)?l(h,a):h.find(l).text();q=g!=i;g=c.trim(g.replace(b.lRe||'',b.lPlace||''))}if(n&&(!b.condHide||(m&&q))){h.addClass(n)}if(!s){a.data(e+'label',g);f.bind('submit',u)}else if(!j){a.attr('placeholder',g)}if(i){a.attr('title',i||g)}a.bind('focus',t).bind('blur',p);p.call(d,e)}});return this}})(jQuery);
