// $.fn.labelizor 1.1  -- (c) 2011 Hugsmi√∞jan ehf.
!function(a){var t="labelizor",e=t+"label";a.fn[t]=function(l,i){var r=l&&l.charAt?l:"";l=a.extend({lRe:/(\*|:[\W\S]*$)/g,useLabel:true,blurClass:i||"labelized",hideClass:r||"stream"},!r&&l);var n="placeholder"in a("<input/>")[0],s=l.hideClass,f=l.blurClass,o=l.labelFilter,d=l.useLabel,u=function(l){var i=a(this),r=i.val(),n=i.data(e),s=!r||l===t&&r===n;if(s){i.val(n)}i.toggleClass(f,s)},c=function(t){var l=a(this),i=l.val();if(!i||l.is("."+f)&&i===l.data(e)){l.val("").removeClass(f)}},b=function(t){a(this).find("."+f).filter(function(){var t=a(this),l=t.data(e);return l&&t.val()===l}).val("")};this.filter("textarea, input:not(:checkbox,:radio,:submit,:button,:reset)").each(function(){var i=this,r=a(i),f=a(i.form);if(!r.data(t)){var h=r.attr("placeholder"),v=l.labelText||h,p=i.title,C=a([]),m;r.data(t,!0);if(s||d&&!(v||p)){C=r.closest("label",f);if(!C[0]&&i.id){C=f.find('label[for="'+i.id+'"]').eq(0)}}if(!v){v=!(d&&o)?l.preferTitle&&p||d&&C.text()||p:a.isFunction(o)?o(C,r):C.find(o).text();m=v!==p;v=a.trim(v.replace(l.lRe||"",l.lPlace||""))}if(s&&(!l.condHide||d&&m)){C.addClass(s)}if(!n){r.data(e,v);f.on("submit",b)}else if(!h){r.attr("placeholder",v)}if(!p){r.attr("title",v)}r.on("focus",c).on("blur change",u);u.call(i,t)}});return this}}(jQuery);