/* $.fn.fakeFile  -- (c) 2014 Hugsmiðjan ehf.  @preserve */
!function(c){c.fn.fakeFile=function(e){var a={cloneField:!1,textLength:40,useAElm:!0,removeText:"is"==c.lang()?"Fjarlægja skrá":"Remove file",nofileText:"is"==c.lang()?"Engin skrá valin":"No file selected",fileUploadedText:""},l=c.extend(a,e);return this.each(function(){!function(t,i){var f,n,e=t.find("input"),s=e.wrap('<div class="fakefile__filewrap filewrap" />').parent();c(i.useAElm?'<a class="fakefile" href="#" />':'<div class="fakefile" />').on("click",function(e){e.preventDefault()}).appendTo(s);i.cloneField&&(f=e.attr("id").replace(/\d+$/,""),n=(n=e.attr("id").match(/(\d+)$/))?n[0]:0,c('<a class="fakefile__remove remove" href="#" title="'+i.removeText+'">X</a>').appendTo(s).on("click",function(e){e.preventDefault(),c(this).parent()[c(this).closest(".filewrap").is(s)?"detach":"remove"]()})),s.on("change.file","input",function(){if(a=c(this).val().replace("C:\\fakepath\\","")){var e=a.toLowerCase().match(/[a-z0-9]+$/);e=e?e[0]:"default";var a=a.length>i.textLength?c.cropText(a,i.textLength-3):a,l=i.fileUploadedText?'<span class="fakefile__title">'+i.fileUploadedText+"</span>":"";c(this).next(".fakefile").html(l+'<span class="fakefile__filename">'+a+"</span>")[0].className="fakefile file_"+e}else c(this).next(".fakefile").html(i.nofileText)[0].className="fakefile fakefile__empty file_empty";i.cloneField&&c(this).closest(".filewrap").is(":last-child")&&c(this).val()&&(n++,s.clone(!0,!0).appendTo(t).find("input").attr("id",f+n).attr("name",f+n).end().find(".fakefile").html(i.nofileText)[0].className="fakefile fakefile__empty file_empty")}).find("input").trigger("change.file")}(c(this),l)})}}(jQuery);
