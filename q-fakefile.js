// // $.fn.fakeFile -- (c) 20124Hugsmiðjan ehf.
(function(a){var j=function(g,d){var h=g.find('input').data('data-fileNo',c),f=h.wrap('<div class="filewrap" />').parent(),i,c,k=a('<a href="#" />').on('click',function(b){b.preventDefault()}).appendTo(f);if(d.cloneField){i=h.attr('id').replace(/\d+$/,'');c=h.attr('id').match(/(\d+)$/);c=c?c[0]:0;a('<a class="remove" href="#" title="'+d.removeText+'">X</a>').appendTo(f).on('click',function(b){b.preventDefault();a(this).parent()[a(this).closest('.filewrap').is(f)?'detach':'remove']()})}f.on('change.file','input',function(){var b=a(this).val().replace("C:\\fakepath\\","");if(b){var e=b.toLowerCase().match(/[a-z0-9]+$/)[0];e=e?e[0]:'default';a(this).next('.fakefile').text(b.length>d.textLength?a.cropText(b,(d.textLength-3)):b)[0].className='fakefile file_'+e}else{a(this).next('.fakefile').text(d.nofileText)[0].className='fakefile file_empty'}if(d.cloneField&&a(this).closest('.filewrap').is(':last-child')&&a(this).val()){c++;f.clone(true,true).appendTo(g).find('input').attr('id',i+c).attr('name',i+c).end().find('.fakefile').text(d.nofileText)[0].className='fakefile file_empty'}}).find('input').trigger('change.file')};a.fn.fakeFile=function(b){var e={cloneField:false,textLength:40,removeText:a.lang()=='is'?'Fjarlægja skrá':'Remove file',nofileText:a.lang()=='is'?'Engin skrá valin':'No file selected'},g=a.extend(e,b);return this.each(function(){j(a(this),g)})}})(jQuery);
