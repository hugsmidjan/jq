/* jQuery MobileMenu and StickyHeader 1.0  -- (c) 2014 HugsmiÃ°jan ehf.  @preserve */
!function(e){var t,n=e(window),r=e(document),i=e("html"),o=!window.FormatChange;e.initMobileMenu=function(a){a=e.extend({stickyHeader:!0,startOpen:!1,mediaGroup:"Small",name:"menu",evPrefix:"mobile",menuButton:".skiplink a"},a);var s="function"==typeof a.mediaGroup?a.mediaGroup:function(e,t){return!a.mediaGroup||e[t+a.mediaGroup]},l="formatchange."+a.evPrefix+a.name,d=a.startOpen,u="is-"+a.name,m=u+"-closed",c=u+"-open",f=u+"-active",g=a.evPrefix+a.name;return n.on(l,function(o,u){if(s(u,"became")){var f;i.addClass(a.startOpen?c:m),e(a.menuButton).on("click.toggleMenu",function(o){var a=this;if(o.preventDefault(),d)t=null,r.trigger(g+"close"),i.removeClass(c),i.addClass(m),n.scrollTop(f),a.blur(),r.trigger(g+"closed");else{t&&e(t).trigger("click.toggleMenu"),t=a,r.trigger(g+"open"),f=n.scrollTop()||1,i.addClass(c),i.removeClass(m);var s=e(e(a).attr("href"));s.focusHere(),n.scrollTop(1),r.trigger(g+"opened")}d=!d}),!u&&n.off(l)}else s(u,"left")&&(d&&(t=null,r.trigger(g+"close"),d=!1,i.removeClass(c+" "+m),r.trigger(g+"closed")),e(a.menuButton).off("click.toggleMenu"))}),o&&n.trigger(l,[e.formatChange.media]),i.addClass(f),a.stickyHeader&&e.initStickyHeader(e.extend({},a,{name:"header"})),e},e.initStickyHeader=function(r){r=e.extend({name:"header",upLimit:70,downLimit:50,mediaGroup:"Small",headerHeight:function(){return parseInt(i.css("padding-top"),10)}},r);var a="function"==typeof r.mediaGroup?r.mediaGroup:function(e,t){return!r.mediaGroup||e[t+r.mediaGroup]},s="formatchange.stickyheader",l="scroll.stickyheader",d="is-"+r.name,u=d+"-fixed",m=d+"-hidden",c=d+"-shown";return n.on(s,function(o,d){if(a(d,"became")){var f,g=0,p=r.headerHeight(),v="pageXOffset"in window,h=!1,C=!1;n.on(l,e.throttleFn(function(){if(!t){var e=v?window.pageYOffset:window.document.documentElement.scrollTop,n=e>p;if(f&&clearTimeout(f),n!==h&&(h=n,g=e,i.toggleClass(u+" "+m,h),h||(i.removeClass(c),C=!1)),h){var o,a=e-g;(o=a>r.downLimit)?C&&(i.removeClass(c).addClass(m),C=!1):(o=a<-r.upLimit)&&(C||(i.removeClass(m).addClass(c),C=!0)),o?g=e:f=setTimeout(function(){g=e},1e3)}}},!0,50)).trigger(l),!d&&n.off(s)}else a(d,"left")&&(n.off(l),i.removeClass(u+" "+c))}),o&&n.trigger(s,[e.formatChange.media]),e}}(jQuery);
