// jQuery MobileMenu and StickyHeader 1.0  -- (c) 2014 HugsmiÃ°jan ehf.
(function(e){var a=e(window);var r=e(document);var i=e("html");var n;e.initMobileMenu=function(o){o=e.extend({stickyHeader:true,mediaGroup:"Small",name:"menu",evPrefix:"mobile",menuButton:".skiplink a"},o);var t="formatchange."+o.evPrefix+o.name;var s="media"in o?o.media:e.formatChange&&e.formatChange.media;var l;var f="is-"+o.name;var d=f+"-closed";var m=f+"-open";var u=f+"-active";var c=o.evPrefix+o.name;a.on(t,function(){if(!s||s["became"+o.mediaGroup]){var f;i.addClass(d);e(o.menuButton).on("click.toggleMenu",function(o){var t=this;o.preventDefault();if(!l){n&&e(n).trigger("click.toggleMenu");n=t;r.trigger(c+"open");f=a.scrollTop()||1;i.addClass(m);i.removeClass(d);var s=e(e(t).attr("href"));s.focusHere();a.scrollTop(1);r.trigger(c+"opened")}else{n=null;r.trigger(c+"close");i.removeClass(m);i.addClass(d);a.scrollTop(f);t.blur();r.trigger(c+"closed")}l=!l});!s&&a.off(t)}else if(s["left"+o.mediaGroup]){if(l){n=null;r.trigger(c+"close");l=false;i.removeClass(m);r.trigger(c+"closed")}e(o.menuButton).off("click.toggleMenu")}}).trigger(t);i.addClass(u);o.stickyHeader&&e.initStickyHeader(o);return e};e.initStickyHeader=function(r){r=e.extend({upDelay:50,mediaGroup:"Small",headerHeight:function(){return parseInt(i.css("padding-top"),10)}},r);var o="formatchange.stickyheader";var t="scroll.stickyheader";var s="media"in r?r.media:e.formatChange&&e.formatChange.media;a.on(o,function(){if(!s||s["became"+r.mediaGroup]){var l=0;var f=r.headerHeight();var d="pageXOffset"in window;var m=false;var u=false;a.on(t,e.throttleFn(function(){if(!n){var e=d?window.pageYOffset:window.document.documentElement.scrollTop;var a=e>f;if(a!==m){i.toggleClass("is-header-fixed",a);if(m){i.removeClass("is-header-shown");u=false}l=e;m=a}if(m){var o=e-l;if(o>0){if(u){i.removeClass("is-header-shown");u=false}l=e}else if(o<-r.upDelay){if(!u){i.addClass("is-header-shown");u=true}l=e}}}},true,50)).trigger(t);!s&&a.off(o)}else if(s["left"+r.mediaGroup]){a.off(t);i.removeClass("is-header-fixed is-header-shown")}}).trigger(o);return e}})(jQuery);
