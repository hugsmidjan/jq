// jQuery MobileMenu and StickyHeader 1.0  -- (c) 2014 HugsmiÃ°jan ehf.
(function(e){var a=e(window);var i=e(document);var r=e("html");var o;e.initMobileMenu=function(n){n=e.extend({stickyHeader:true,mediaGroup:"Small",menuButton:".skiplink a"},n);var s="formatchange.mobileMenu";var t="media"in n?n.media:e.formatChange&&e.formatChange.media;a.on(s,function(){if(!t||t["became"+n.mediaGroup]){var l;r.addClass("is-menu-closed");e(n.menuButton).on("click.toggleMenu",function(n){n.preventDefault();if(!o){l=a.scrollTop()||1;r.addClass("is-menu-open");r.removeClass("is-menu-closed");var s=e(e(this).attr("href"));s.focusHere();a.scrollTop(1);i.trigger("mobilemenuopened")}else{r.removeClass("is-menu-open");r.addClass("is-menu-closed");a.scrollTop(l);this.blur();i.trigger("mobilemenuclosed")}o=!o});!t&&a.off(s)}else if(n.media["left"+n.mediaGroup]){if(o){o=false;r.removeClass("is-menu-open");i.trigger("mobilemenuclosed")}e(n.menuButton).off("click.toggleMenu")}}).trigger(s);r.addClass("is-menu-active");n.stickyHeader&&e.initStickyHeader(n)};e.initStickyHeader=function(i){i=e.extend({upDelay:50,mediaGroup:"Small",headerHeight:function(){return parseInt(r.css("padding-top"),10)}},i);var n="formatchange.stickyheader";var s="scroll.stickyheader";var t="media"in i?i.media:e.formatChange&&e.formatChange.media;a.on(n,function(){if(!t||t["became"+i.mediaGroup]){var l=0;var d=i.headerHeight();var f="pageXOffset"in window;var m=false;var u=false;a.on(s,e.throttleFn(function(){if(!o){var e=f?window.pageYOffset:window.document.documentElement.scrollTop;var a=e>d;if(a!==m){r.toggleClass("is-header-fixed",a);if(m){r.removeClass("is-header-shown");u=false}l=e;m=a}if(m){var n=e-l;if(n>0){if(u){r.removeClass("is-header-shown");u=false}l=e}else if(n<-i.upDelay){if(!u){r.addClass("is-header-shown");u=true}l=e}}}},true,50)).trigger(s);!t&&a.off(n)}else if(i.media["left"+i.mediaGroup]){a.off(s);r.removeClass("is-header-fixed is-header-shown")}}).trigger(n)}})(jQuery);