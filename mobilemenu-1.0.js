// jQuery MobileMenu and StickyHeader 1.0  -- (c) 2013-2014 HugsmiÃ°jan ehf.
!function(a){var b,c=a(window),d=a(document),e=a("html");a.initMobileMenu=function(f){f=a.extend({stickyHeader:!0,startOpen:!1,mediaGroup:"Small",name:"menu",evPrefix:"mobile",menuButton:".skiplink a"},f);var g="formatchange."+f.evPrefix+f.name,h="media"in f?f.media:a.formatChange&&a.formatChange.media,i=f.startOpen,j="is-"+f.name,k=j+"-closed",l=j+"-open",m=j+"-active",n=f.evPrefix+f.name;return c.on(g,function(){if(!h||h["became"+f.mediaGroup]){var j;e[f.startOpen?"addClass":"removeClass"](l),e[f.startOpen?"removeClass":"addClass"](k),a(f.menuButton).on("click.toggleMenu",function(f){var g=this;if(f.preventDefault(),i)b=null,d.trigger(n+"close"),e.removeClass(l),e.addClass(k),c.scrollTop(j),g.blur(),d.trigger(n+"closed");else{b&&a(b).trigger("click.toggleMenu"),b=g,d.trigger(n+"open"),j=c.scrollTop()||1,e.addClass(l),e.removeClass(k);var h=a(a(g).attr("href"));h.focusHere(),c.scrollTop(1),d.trigger(n+"opened")}i=!i}),!h&&c.off(g)}else h["left"+f.mediaGroup]&&(i&&(b=null,d.trigger(n+"close"),i=!1,e.removeClass(l),d.trigger(n+"closed")),a(f.menuButton).off("click.toggleMenu"))}).trigger(g),e.addClass(m),f.stickyHeader&&a.initStickyHeader(f),a},a.initStickyHeader=function(d){d=a.extend({upDelay:50,mediaGroup:"Small",headerHeight:function(){return parseInt(e.css("padding-top"),10)}},d);var f="formatchange.stickyheader",g="scroll.stickyheader",h="media"in d?d.media:a.formatChange&&a.formatChange.media;return c.on(f,function(){if(!h||h["became"+d.mediaGroup]){var i=0,j=d.headerHeight(),k="pageXOffset"in window,l=!1,m=!1;c.on(g,a.throttleFn(function(){if(!b){var a=k?window.pageYOffset:window.document.documentElement.scrollTop,c=a>j;if(c!==l&&(e.toggleClass("is-header-fixed",c),l&&(e.removeClass("is-header-shown"),m=!1),i=a,l=c),l){var f=a-i;f>0?(m&&(e.removeClass("is-header-shown"),m=!1),i=a):f<-d.upDelay&&(m||(e.addClass("is-header-shown"),m=!0),i=a)}}},!0,50)).trigger(g),!h&&c.off(f)}else h["left"+d.mediaGroup]&&(c.off(g),e.removeClass("is-header-fixed is-header-shown"))}).trigger(f),a}}(jQuery);
