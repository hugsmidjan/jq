// $.formatChange  -- (c) 2012 Hugsmi√∞jan ehf. - MIT/GPL
!function(e,t,r,n,o,i,a,f,s,u,l,g){i=t.getComputedStyle;f=function(){for(var e in a.groups){var t=a.groups[e],r=!!(t&&t[a.format]),n=!!(t&&t[a.lastFormat]);a["is"+e]=r;a["was"+e]=n;a["became"+e]=r&&!n;a["left"+e]=!r&&n;!t&&delete a.groups[e]}};s=function(e,t){return e===t||!!(a.groups[e]&&a.groups[e][t])};e.formatChange=function(c,d){if(c==="disengage"){e(t).off(r);l&&l.remove();a=l=g}else{var m=c===true;if(!a){c=e.extend({},c);a=e.extend({groups:{Small:{narrow:1,mobile:1},Large:{tablet:1,full:1,wide:1}},is:function(e){return s(e,this[n])},was:function(e){return s(e,this[o])},became:function(e){return s(e,this[n])&&!s(e,this[o])},left:function(e){return!s(e,this[n])&&s(e,this[o])}},!m&&d);e.each(c,function(e,t){if(/^[A-Z]/.test(e)){a.groups[e]=t}});l=e("<"+(c.$tagName||"del")+' style="position:absolute;visibility:hidden;width:0;height:0;overflow:hidden;"/>').attr("id",c.$elmId||"mediaformat").appendTo("body");e(t).on(r,function(r,s){s=s||{};var g=(i&&i(l[0],c.$before?":before":":after").getPropertyValue("content")||l.css("font-family")).replace(/['"]/g,"");if(g!==u){a[n]=g;a[o]=u;u=g;f();e(t).trigger("formatchange"+(s.ns||""),[a,u])}else if(s){f()}})}m&&(u=g);e(t).trigger(r,[{refresh:1,ns:d?"."+d:""}])}return a}}(jQuery,window,"resize.formatchange","format","lastFormat");
