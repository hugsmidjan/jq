// $.formatChange  -- (c) 2012 Hugsmi√∞jan ehf. - MIT/GPL
(function(e,t,r,o,n,i,a,f,s,u,g,l){i=t.getComputedStyle;f=function(){for(var e in a.groups){var t=a.groups[e],r=!!(t&&t[a.format]),o=!!(t&&t[a.lastFormat]);a["is"+e]=r;a["was"+e]=o;a["became"+e]=r&&!o;a["left"+e]=!r&&o;!t&&delete a.groups[e]}};s=function(e,t){return e===t||!!(a.groups[e]&&a.groups[e][t])};var c=e.formatChange=function(d,m){if(d==="disengage"){e(t).off(r);g&&g.remove();a=g=l}else{var h=d===true;if(!a){d=e.extend(c.config,d);a=e.extend({groups:c.groups,is:function(e){return s(e,this[o])},was:function(e){return s(e,this[n])},became:function(e){return s(e,this[o])&&!s(e,this[n])},left:function(e){return!s(e,this[o])&&s(e,this[n])}},!h&&m);e.each(d,function(e,t){if(/^[A-Z]/.test(e)){a.groups[e]=t}});g=e("<"+(d.$tagName||"del")+' style="position:absolute;visibility:hidden;width:0;height:0;overflow:hidden;"/>').attr("id",d.$elmId||"mediaformat").appendTo("body");e(t).on(r,function(r,s){s=s||{};var l=(i&&i(g[0],d.$before?":before":":after").getPropertyValue("content")||g.css("font-family")).replace(/['"]/g,"");if(l!==u){a[o]=l;a[n]=u;u=l;f();e(t).trigger("formatchange"+(s.ns||""),[a,u])}else if(s){f()}})}h&&(u=l);e(t).trigger(r,[{refresh:1,ns:m?"."+m:""}])}return a};c.config={};c.groups={Small:{narrow:1,mobile:1},Large:{tablet:1,full:1,wide:1}}})(jQuery,window,"resize.formatchange","format","lastFormat");
