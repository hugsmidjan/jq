/* datepicker 0.9 -- (c) 2011 Hugsmiðjan ehf.  @preserve */
!window.datePicker&&function(e){var t=function(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)},a=function(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e};datePicker={VERSION:.9,defaultCssFile:null,cssTriggers:["fi_date","fi_dmy"],openOnFieldClick:!0,wDLength:1,is:{months:"janúar,febrúar,mars,apríl,maí,júní,júlí,ágúst,september,október,nóvember,desember".split(","),wdays:"sunnudagur,mánudagur,þriðjudagur,miðvikudagur,fimmtudagur,föstudagur,laugardagur".split(","),popBtn:"Veldu dag",popBtnLong:"Veldu dagsetningu",close:"Fela",closeLong:"Fela dagatalið",prevM:"Fyrri",prevMLong:"Fyrri mánuður",nextM:"Næsti",nextMLong:"Næsti mánuður",prevY:"Fyrra ár",prevYLong:"Fyrra ár",nextY:"Næsta ár",nextYLong:"Næsta ár"},en:{months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),wdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),popBtn:"Pick date",popBtnLong:"Pick date",close:"Close",closeLong:"Close Calendar",prevM:"Prev",prevMLong:"Previous month",nextM:"Next",nextMLong:"Next month",prevY:"Prev year",prevYLong:"Previous year",nextY:"Next year",nextYLong:"Next year"},defaults:{dateActiveSrc:new Date,dateMinSrc:null,dateMaxSrc:null,dateFormat:"%d.%m.%yyyy",flipYears:!1,caseSensitive:!1,lang:"en"},idDefaults:{},fields:{},_initDone:!1,init:function(t){this._initDone||""===this.defaultCssFile||(this.defaultCssFile=this.defaultCssFile||"https://eplica-cdn.is/jquery/datepicker/0.9/dp.css",e("head").append('<link href="'+this.defaultCssFile+'" media="screen" rel="stylesheet" type="text/css" />')),this._today=a(new Date),t=t||e("body");for(var n,s=e(t).find("input"),r=new RegExp(" "+this.cssTriggers.join(" | ")+" "),l=0;n=s[l];l++)if(!(n.id&&this.fields[n.id]&&this.fields[n.id]._input==n||n.type&&"text"!=n.type)){for(var d=e.aquireId(n),o="",u=n;!/^(form|body)$/.test(u.tagName.toLowerCase());)o+=" "+u.className,u=u.parentNode;r.test(o+" ")&&(this.fields[d]=new i(d),this.fields[d].init())}this._initDone=!0},getMY:function(e,a){return t(this[a].months[e.getMonth()])+" "+e.getFullYear()},_normalizeDateFormat:function(e){return-1==e.indexOf("%")&&(e=e.replace(/(d+)/i,"%$1").replace(/(m+)/i,"%$1").replace(/(y+)/i,"%$1")),e.toLowerCase()},printDateValue:function(e,t,a){if(!e)return"";var i=this[a||this.defaults.lang]||this.en;t=this._normalizeDateFormat(t||this.defaults.dateFormat);var n=e.getFullYear()+"",s=e.getMonth()+1+"",r=e.getDate()+"",l=t.match(/\%d+/)?t.match(/\%(d+)/)[1].length:0;return l>=2&&10>r&&(r="0"+r),l=t.match(/\%m+/)?t.match(/\%(m+)/)[1].length:0,2==l&&10>s?s="0"+s:l>2&&(s=i.months[e.getMonth()]),3==l&&(s=s.substr(0,3)),l=t.match(/\%y+/)?t.match(/\%(y+)/)[1].length:0,2==l&&(n=n.substr(2,2)),t.replace(/\%y+/,n).replace(/\%m+/,s).replace(/\%d+/,r)},parseDate:function(e){var t=this.fields[e]._input.value;if(!t)return null;var a,i,n,s,r=this._normalizeDateFormat(this.fields[e].dateFormat),l=1,d=0,o=null;if(r.indexOf("%m")>-1){if(n=r.substr(0,r.indexOf("%m")).replace(/\%(d|m|y)/g,"$1").length,i=r.match(/\%(m+)/)[1].length,i>2){var u=this[this.fields[e].lang].months;a=t.substr(n).toLowerCase();for(var c=0;c<u.length;c++){var f=u[c].toLowerCase();if(3==i&&(f=f.substr(0,3)),a.indexOf(f)>-1){d=c,t=t.substr(0,n+1)+t.substr(n+f.length+1);break}}}else a=t.substr(n,3).replace(/^\D/,"").substr(0,2),d=parseInt(a,10),(isNaN(d)||1>d)&&(d=1),d-=1,s=new RegExp("(.{"+n+"})\\d\\d?(.*)$"),t=t.replace(s,"$1$2");r=r.replace(/\%m+/,"")}if(r.indexOf("%d")>-1&&(n=r.substr(0,r.indexOf("%d")).replace(/\%(d|m|y)/g,"$1").length,a=t.substr(n,3).replace(/^\D/,"").substr(0,2),l=parseInt(a,10),(isNaN(l)||1>l)&&(l=1),s=new RegExp("(.{"+n+"})\\d\\d?(.*)$"),t=t.replace(s,"$1$2"),r=r.replace(/\%d+/,"")),r.indexOf("%y")>-1){if(n=r.substr(0,r.indexOf("%y")).replace(/\%(d|m|y)/g,"$1").length,i=r.match(/y+/)[0].length,a=t.substr(n,i+2).replace(/^.?\D/,"").substr(0,i),o=parseInt(a,10),isNaN(o)||0>=o)return null;4!=i&&(o+=70>o?2e3:1900),s=new RegExp("(.{"+n+"})\\d{"+i+"}(.*)$"),t=t.replace(s,"$1$2"),r=r.replace(/\%y+/,"")}return new Date(o,d,l)},buildCalendar:function(a){var i=this.fields[a],n=i.dateActive,s=i.lang,r=this[s],l=e('<div id="'+a+'-cal" class="pickdate'+(i.flipYears?" pickdate-yearnav":"")+'"><div class="pickdatewrap"><h4>'+this.getMY(n,s)+"</h4></div></div>");l[0].fieldId=a,l.on("click",function(e){e.preventDefault(),e.stopPropagation()});var d=e(l).find("div"),o=e('<ul class="month"><li class="prev"><a href="#" title="'+(r.prevMLong||r.prevM)+'">'+r.prevM+'</a></li><li class="next"><a href="#" title="'+(r.nextMLong||r.nextM)+'">'+r.nextM+"</a></li></ul>");if(o.find(".prev a").on("click",function(e){datePicker.flipCal(a,-1,"m"),e.preventDefault()}),o.find(".next a").on("click",function(e){datePicker.flipCal(a,1,"m"),e.preventDefault()}),d.append(o),i.flipYears){var u=e('<ul class="year"><li class="prev"><a href="#" title="'+(r.prevYLong||r.prevY)+'">'+r.prevY+'</a></li><li class="next"><a href="#" title="'+(r.nextYLong||r.nextY)+'">'+r.nextY+"</a></li></ul>");u.find(".prev a").on("click",function(e){datePicker.flipCal(a,-1,"y"),e.preventDefault()}),u.find(".next a").on("click",function(e){datePicker.flipCal(a,1,"y"),e.preventDefault()}),d.append(u)}for(var c='<table cellspacing="0" summary=""><thead><tr>',f=0;7>f;f++){var p=t(r.wdays[f]);c+='<th><acronym title="'+p+'">'+p.substr(0,this.wDLength)+"</acronym></th>"}c+='</tr></thead><tbody><tr><td colspan="7"></td></tr></tbody></table>',d.append(c);var h=e('<a href="#" class="close" title="'+(r.closeLong||r.close)+'">'+r.close+"</a>");return d.append(h),h.on("click",function(e){datePicker.closeCalendar(a),e.preventDefault()}),l},buildCalendarDays:function(t){for(var a=this.fields[t],i=a.dateActive,n=i.getMonth(),s=a._selectedDate,r=new Date(i.getFullYear(),n,1),l=e("<tbody />"),d=function(e){return datePicker.doPickDate(t,e.newDay)};r.getMonth()==n;){var o=e("<tr />");l.append(o);for(var u=1;8>u;u++){var c=e("<td />");if(r.getMonth()!=n||1==r.getDate()&&u<=r.getDay())c.addClass("o"),c.append(String.fromCharCode(160));else{r.getTime()==this._today.getTime()&&c.addClass("today"),s&&r.getTime()==s.getTime()&&c.addClass("active");var f;this.isValidChoice(r,t)?(f=e("<a />"),f[0].href="#",f[0].fieldId=t,f[0].newDay=r.getDate(),f.on("click",function(e){d(this),e.preventDefault()})):f=e("<i />"),f.append(r.getDate()+""),c.append(f),r.setDate(r.getDate()+1)}1==u?c.addClass("su"):7==u&&c.addClass("sa"),o.append(c)}}return l},isValidChoice:function(e,t){var a=this.fields[t],i=a.dateMin,n=a.dateMax,s=!i||e.getTime()>=i.getTime(),r=!n||e.getTime()<=n.getTime();return s&&r},openCalendar:function(t){var a=this.fields[t];return a._input.disabled?!1:(a.dateMin=a.getDateBoundry("min"),a.dateMax=a.getDateBoundry("max"),this.updateCalendar(t),a.isOpen?!1:(a.isOpen=!0,e(a._button).after(a._calendar),void e("body").on("click",this.delayedCloseAll)))},closeCalendar:function(t){var a=this.fields[t];return a.isOpen?(a.isOpen=!1,e(a._calendar).detach(),e("body").off("click",this.delayedCloseAll),!1):!1},toggleCalendar:function(e){this[(this.fields[e].isOpen?"close":"open")+"Calendar"](e)},flipCal:function(e,t,a){var i=this.fields[e],n=i.dateMin,s=i.dateMax,r=i.dateActive,l=new Date(r);l.setDate(1),"y"==a?l.setFullYear(l.getFullYear()+t):l.setMonth(l.getMonth()+t),0>t&&(l.setMonth(l.getMonth()+1),l.setDate(0));var d=!1,o=l.getTime();return(!n||o>=n.getTime())&&(!s||o<=s.getTime())?d=!0:n&&o<n.getTime()&&t>0?(l=n,d=!0):s&&o>s.getTime()&&0>t&&(l=s,d=!0),d?(i.dateActive=new Date(l),this.updateCalendar(e),i._button.focus(),!0):!1},updateCalendar:function(t){var a=this.fields[t],i=a._calendar;e(i).find("h4").text(this.getMY(a.dateActive,a.lang)),e(i).find("tbody").replaceWith(this.buildCalendarDays(t))},doPickDate:function(t,a){var i=e("#"+t)[0],n=this.fields[t],s=n.dateActive;s.setDate(a);var r=n._selectedDate;return r.setTime(s.getTime()),i.value=this.printDateValue(r,n.dateFormat,n.lang),this.closeCalendar(t),this.updateCalendar(t),i.focus(),!1},closeAll:function(){for(var e in this.fields)this.fields[e].isHovered||this.closeCalendar(e);return!1},delayedCloseAll:function(e){setTimeout(datePicker.closeAll,10)}};var i=function(t){var i=datePicker;this._input=e("#"+t)[0],i.openOnFieldClick&&(e(this._input).on("mouseup",function(e){i.fields[this.id].isOpen||(setTimeout("datePicker.openCalendar('"+this.id+"')",20),e.stopPropagation())}),e(this._input).on("blur",function(e){var t="if (!datePicker.fields['"+this.id+"'].isHovered) { datePicker.closeCalendar('"+this.id+"'); }";setTimeout(t,20)})),this.getDateBoundry=function(e){var t="min"==e?this.dateMinSrc:"max"==e?this.dateMaxSrc:this.dateActiveSrc;if(!t)return null;var a,n,s,r,l={};if(t.join?(a=t[0],t[1]&&"string"==typeof t[1]&&t[1].match(/^[-+]?\d+[dmy]$/)&&(s=parseInt(t[1],10),r=t[1].match(/[dmy]$/)[0])):a=t,"string"==typeof a){if(!i.fields[a])return null;n=i.parseDate(a)}else n=a;return n?(l.y=n.getFullYear(),l.m=n.getMonth(),l.d=n.getDate(),l[r]+=s||0,new Date(l.y,l.m,l.d)):null},this.isOpen=!1,e.extend(this,i.defaults,i.idDefaults[t]||{});var n=e(this._input).lang();i[n]&&(this.lang=n),this.dateActive=this.getDateBoundry("active"),this.init=function(){var n=i.parseDate(t)||this.dateActive||a(new Date);this._selectedDate=n,this.dateActive=new Date(n),this.dateMin=this.getDateBoundry("min"),this.dateMax=this.getDateBoundry("max");var s=e('<a href="#" class="pickdatelink">'+i[this.lang].popBtn+"</a>");s[0].title=i[this.lang].popBtnLong||i[this.lang].popBtn,s[0].fieldId=t,s.on("click",function(e){return i.toggleCalendar(this.fieldId),e.stopPropagation(),!1}),e(this._input).after(s),this._button=s,this._calendar=i.buildCalendar(t),this.isHovered=!1,s.on("focus",function(e){datePicker.fields[this.fieldId].isHovered=!0}),s.on("mouseout",function(e){datePicker.fields[this.fieldId].isHovered=!1}),e(this._calendar).on("mouseover",function(e){datePicker.fields[this.fieldId].isHovered=!0}),e(this._calendar).on("mouseout",function(e){datePicker.fields[this.fieldId].isHovered=!1})}}}(jQuery);
