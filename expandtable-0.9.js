// encoding: utf-8
// $.fn.zebraLists 1.0  -- (c) 2009 Hugsmiðjan ehf. 
(function(b){b.fn.detach||(b.fn.detach=function(){return this.each(function(){var e=this.parentNode;e&&e.nodeType==1&&e.removeChild(this)})});b.fn.expandTable=function(a){a=b.extend({getUrl:function(e){return e.href},openTrClass:'subrow-open',rowSelector:'tbody tr',togglerSelector:'a:first',subrowHtml:'<tr class="subrow"><td colspan="%{colspan}"><a class="closebtn"/><div class="loading"/></td></tr>',subrowSelector:'tr.subrow',closebtnSelector:'a.closebtn',loadMsgSelector:'.loading',multiOpen:1},a||{});return this.each(function(){var h=b(this),j=h.closest('[lang]').attr('lang').toLowerCase(),g=i[j]||i[j.substr(0,2)]||i.en;h.find(a.rowSelector).each(function(n,d){d=b(d);b(this).find(a.togglerSelector).bind('click',function(o){if(!a.multiOpen){h.find(a.subrowSelector+' '+a.closebtnSelector).trigger('click')}var c=d.data(k),l=c&&c.parent().length;if(!c){var m=0;d.children().each(function(){m+=this.colSpan||0});c=b(a.subrowHtml.replace("%{colspan}",m));c.find(a.loadMsgSelector).html(g.loadingMsg);c.find(a.closebtnSelector).attr({href:'#',title:g.closeTooltip||g.closeLabel}).text(g.closeLabel).bind('click',function(e){d.next().slideUp(a.slideUp||0,function(){d.removeClass(a.openTrClass);b(this).detach()});return false});d.data(k,c);b.get(a.getUrl(this),a.getParams||'',function(e){var f=b(e.replace(/<script( |>)[\s\S]*?<\/script>/ig,''));a.getSelector&&(f=b('<body>').append(f).find(a.getSelector));a.getRemove&&f.find(a.getRemove).remove();a.onLoad&&a.onLoad.call(f,a);c.find(a.loadMsgSelector).replaceWith(f)})}if(l){c.find(a.closebtnSelector).trigger('click')}else{d.toggleClass(a.openTrClass,!l);c.insertAfter(d).slideDown(a.slideDown||0)}return false})})})};var k='expandTable.subrow',i=b.fn.expandTable.i18n={is:{loadingMsg:'Sæki gögn...',closeLabel:'Loka'},en:{loadingMsg:'Loading...',closeLabel:'Close'}}})(jQuery);