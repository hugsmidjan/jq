/* $.fn.alistDateSplit  -- (c) 2009 Hugsmiðjan ehf.  @preserve */
!function(e){e.alistDateSplit={i18n:{en:{months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan.,Feb.,Mar.,Apr.,May,June,July,Aug.,Sept.,Oct.,Nov.,Dec.".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(",")},is:{months:"janúar,febrúar,mars,apríl,maí,júní,júlí,ágúst,september,október,nóvember,desember".split(","),shortMonths:"jan.,febr.,mars,apr.,maí,júní,júlí,ág.,sept.,okt.,nóv.,des.".split(","),weekdays:"Sunnudagur,Mánudagur,Þriðjudagur,Miðvikudagur,Fimmtudagur,Föstudagur,Laugardagur".split(",")}}},e.fn.alistDateSplit=function(a){return a=e.extend({shortMonths:!0,monthAfterDate:!0,dateSel:".item .date",showWeekday:!1,showTime:!1,allowRange:!1,collapseDupeMonths:!0,rangeSplitter:/(?:[\s\n]+|)-(?:[\s\n]+|)/g,dateSplitter:/\.|\s+/},a),this.each(function(){var t=e(this),s=e.alistDateSplit.i18n[t.lang()]||e.alistDateSplit.i18n.en;t.find(a.dateSel).each(function(){for(var t=e(this),n=t.text().trim().split(a.rangeSplitter),l=e('<span class="js-date" />'),r=0;r<n.length;r++){var p=n[r].trim().split(a.dateSplitter);n[r]=[new Date(p[2],p[1]-1,p[0]),p[3]]}for(var o=0;o<n.length;o++){var i=n[o][0],d=a.allowRange?e('<span class="day'+(o+1)+'" />'):l,u=i.getDay(),h=i.getDate(),g=i.getMonth(),c=i.getFullYear(),m=(a.shortMonths&&s.shortMonths?s.shortMonths[g].replace(".","<i>.</i>"):s.months[g])||"",y=s.weekdays[u]||"",M=a.monthAfterDate?"append":"prepend",w='<span class="m">'+m+"</span> ",b='<span class="y">'+c+"</span> ",D=a.showTime&&n[o][1]?'<span class="t">'+n[o][1]+"</span>":"",S="short"===a.showWeekday?'<span class="wd">'+y.substr(0,3)+"<i>.</i></span> ":a.showWeekday?'<span class="wd">'+y+"</span> ":"",f=0!==o&&n[o-1]?n[o-1][0].getMonth():null,v=o!==n.length&&n[o+1]?n[o+1][0].getMonth():null,k=o!==n.length&&n[o+1]?n[o+1][0].getFullYear():null;if(d.append('<span class="d">'+h+"<i>.</i></span> "),a.allowRange&&a.collapseDupeMonths&&c===k&&("prepend"!==M||0!==o&&g===f)?"append"!==M||o!==n.length&&g===v||d[M](w):d[M](w),a.allowRange&&a.collapseDupeMonths&&(!a.collapseDupeMonths||o!==n.length&&c===k)||d.append(b),d.append(D).prepend(S),!a.allowRange)break;o>0&&l.append('<span class="sep"> - </span>'),l.append(d)}t.before(l).remove()})})}}(jQuery);
