/* $.fn.alistDateSplit  -- (c) 2009 Hugsmiðjan ehf.  @preserve */
!function(e){e.alistDateSplit={i18n:{en:{months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(",")},is:{months:"janúar,febrúar,mars,apríl,maí,júní,júlí,ágúst,september,október,nóvember,desember".split(","),weekdays:"Sunnudagur,Mánudagur,Þriðjudagur,Miðvikudagur,Fimmtudagur,Föstudagur,Laugardagur".split(",")}}},e.fn.alistDateSplit=function(a){return a=e.extend({shortMonths:!0,monthAfterDate:!0,dateSel:".item .date",showWeekday:!1,showTime:!1,allowRange:!1,collapseDupeMonths:!0,rangeSplitter:/(?:[\s\n]+|)-(?:[\s\n]+|)/g,dateSplitter:/\.|\s+/},a),this.each(function(){var t=e(this),s=e.alistDateSplit.i18n[t.lang()]||e.alistDateSplit.i18n.en;t.find(a.dateSel).each(function(){for(var t=e(this),n=t.text().trim().split(a.rangeSplitter),l=e('<span class="js-date" />'),r=0;r<n.length;r++){var p=n[r].trim().split(a.dateSplitter);n[r]=[new Date(p[2],p[1]-1,p[0]),p[3]]}for(var i=0;i<n.length;i++){var o=n[i][0],d=a.allowRange?e('<span class="day'+(i+1)+'" />'):l,u=o.getDay(),h=o.getDate(),g=o.getMonth(),c=o.getFullYear(),m=s.months[g]||"",y=s.weekdays[u]||"",w=a.shortMonths&&m.length>4?m.substr(0,3):m,M=a.shortMonths&&m.length>4?"<i>.</i> ":" ",b=a.monthAfterDate?"append":"prepend",D='<span class="m">'+w+M+"</span>",S='<span class="y">'+c+"</span> ",f=a.showTime&&n[i][1]?'<span class="t">'+n[i][1]+"</span>":"",k="short"===a.showWeekday?'<span class="wd">'+y.substr(0,3)+"<i>.</i></span> ":a.showWeekday?'<span class="wd">'+y+"</span> ":"",v=0!==i&&n[i-1]?n[i-1][0].getMonth():null,j=i!==n.length&&n[i+1]?n[i+1][0].getMonth():null,F=i!==n.length&&n[i+1]?n[i+1][0].getFullYear():null;if(d.append('<span class="d">'+h+"<i>.</i></span> "),a.allowRange&&a.collapseDupeMonths&&c===F&&("prepend"!==b||0!==i&&g===v)?"append"!==b||i!==n.length&&g===j||d[b](D):d[b](D),a.allowRange&&a.collapseDupeMonths&&(!a.collapseDupeMonths||i!==n.length&&c===F)||d.append(S),d.append(f).prepend(k),!a.allowRange)break;i>0&&l.append('<span class="sep"> - </span>'),l.append(d)}t.before(l).remove()})})}}(jQuery);
