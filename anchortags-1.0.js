(function(e){var k,h=document.location,p=h.hostname,q=h.port;var i=e.fn.anchorTags=function(f){var u=this,l=this.length;if(l){var a=e.extend({patterns:{}},i.config),g=f.localDomains,r,s=f.patterns;delete f.patterns;e.extend(a,f);e.extend(a.patterns,i.patterns,s);f.patterns=s;g=(g.charAt?g.split(/\s*,\s*/):g).concat(a.baseDomains);k=k||new RegExp("^("+h.href.replace(/^https?:/,'https?:').split('#')[0]+")?#.",'i');r=new RegExp('^([a-z]{3,12}):\/\/('+g.join('|').replace(/\./g,'\.').replace(/\\\\\./g,'.')+')(/|$)','i');while(l--){var b=u[l],d=e(b),j=b.href,m=0;if(b.protocol=='mailto:'){d.addClass(a.emailClass)}else{if(/^[a-z]{3,12}:\/\//i.test(j)){var t=b.protocol=='https:';_0=b.protocol=='http:';if(_0||t){if(t){d.addClass(a.secureClass)}if(!r.test(j)){d.addClass(a.externalClass);m=1}}else if(h.protocol!=b.protocol){d.addClass(a.externalClass);m=1}}if(!m&&k.test(j)){d.addClass(a.internalClass)}for(var n in a.patterns){var c=a.patterns[n],o;if(c.splice){c=c[0];o=c[1]}if(c&&c.test(j)){d.addClass(o?o(b,c,n):n)}}}}return this}};i.config={baseDomains:p?[p+(q?':'+q:'')]:[],localDomains:[],emailClass:'mailto',externalClass:'external',internalClass:'withinpage',secureClass:'secure'};i.patterns={file_image:/\.(jpe?g|png|gif)($|#|\?)/i,file_audio:/\.(mp3|ogg|wav)($|#|\?)/i,file_video:/\.(m(ov|pg)|avi|wmv)($|#|\?)/i,file_pdf:/\.(pdf)($|#|\?)/i,file_doc:/\.(docx?|rtf|wri)(#|$|\?)/i}})(jQuery);
