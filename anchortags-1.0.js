// encoding: utf-8
// $.fn.anchorTags 1.0  -- (c) 2009 Hugsmi√∞jan ehf.
(function(b){var i,f=document.location,u=f.hostname,v=f.port;var g=b.fn.anchorTags=function(d){d=d||{};var w=this.filter('[href]'),j=w.length;if(j){var a=b.extend({patterns:{}},g.config),k=d.localDomains||[],x,y=d.patterns,l=g.patterns;delete d.patterns;b.extend(a,d);if(a.usePatterns){b.each(a.usePatterns,function(B,m){l[m]&&(a.patterns[m]=l[m])})}else{b.extend(a.patterns,l)}b.extend(a.patterns,y);d.patterns=y;k=k.concat(a.baseDomains);x=new RegExp('^([a-z]{3,12}):\/\/('+k.join('|').replace(/\./g,'\.').replace(/\\\./g,'.')+')(/|$)','i');var n=b('<a />').hide().appendTo('body')[0];while(j--){var o=w[j],e=b(o),p=n.href=o.href,z=0,c=n.protocol;if(c=='mailto:'){e.addClass(a.emailClass)}else if(c=='tel:'||c=='callto:'){e.addClass(a.telClass)}else{if(!/^(javascript|data):/.test(c)){if(c){var q=c=='https:',A=c=='http:';if(q){e.addClass(a.secureClass)}if(a.externalClass&&(((A||q)&&!x.test(p))||(!A&&!q&&f.protocol!=c))){e.addClass(a.externalClass);z=1}}if(!z&&a.internalClass){i=i||new RegExp("^("+f.toString().replace(/^https?:/,'https?:').split('#')[0].replace(/\./g,'\.')+")?#.",'i');i.test(p)&&e.addClass(a.internalClass)}}for(var r in a.patterns){var s=a.patterns[r]||{},t=s.check||s,h=b.isFunction(t)?t(o,r):null;if(h||t.test(p)){e.addClass(s.tag||(h&&h.charAt&&h)||a.patternClassPrefix+r)}}}}b(n).detach()}return this};g.config={baseDomains:u?[u+(v?':'+v:'')]:[],localDomains:[],emailClass:'mailto',telClass:'tel',externalClass:'external',internalClass:'withinpage',patternClassPrefix:'file_',secureClass:'secure'};g.patterns={image:{check:/\.(jpe?g|png|gif)($|#|\?)/i},audio:{check:/\.(mp3|wav|aac|wma|flac|ogg)($|#|\?)/i},video:{check:/\.(m(ov|pe?g|p4)|avi|wmv)($|#|\?)/i},pdf:{check:/\.(pdf)($|#|\?)/i},doc:{check:/\.(docx?|rtf|wri|odt|sxw)(#|$|\?)/i},xls:{check:/\.(xlsx?|csv|ods|sxc)(#|$|\?)/i},pack:{check:/\.(zip|rar|7z|gz)(#|$|\?)/i}}})(jQuery);
