/* $.fn.anchorTags 1.0  -- (c) 2009-2013 Hugsmi√∞jan ehf. @preserve*/
!function(a){var e,t=document.location,s=t.hostname,n=t.port,l=a.fn.anchorTags=function(s){s=s||{};var n=window.anchorTags_config,r=this.filter("[href]"),i=[];if(r[0]){var c=a.extend(!0,{patterns:{}},{patterns:l.patterns},l.config,n),o=s.localDomains;delete s.localDomains;var p=s.patterns;if(delete s.patterns,a.extend(c,s),c.usePatterns){var d={};a.each(c.usePatterns,function(a,e){c.patterns[e]&&(d[e]=c.patterns[e])}),c.patterns=d}p&&(a.extend(c.patterns,p),s.patterns=p),o&&(s.localDomains=o),r=c.skipFilter?r.not(c.skipFilter):r,o=(c.baseDomains||[]).concat(c.localDomains||[],o||[]).join("|").replace(/\./g,"\\.").replace(/\\\\\./g,".");var h=new RegExp("^(?:[a-z]{3,12})://(?:"+o+")(?:/|$)","i");r.each(function(){var s=this,n=a(s),l=s.href,r=s.protocol,o=0,p={a:{}};if(p.type=p.a,":"===r&&(s.href+="",r=s.protocol),"mailto:"===r)n.addClass(c.emailClass),p.mailto=!0,++o;else if("tel:"===r||"callto:"===r)n.addClass(c.telClass),p.tel=!0,++o;else{if(!/^(javascript|data):/.test(r)){if(r){var d="https:"===r,f="http:"===r;d&&(n.addClass(c.secureClass),p.secure=!0,++o),c.externalClass&&((f||d)&&!h.test(l)||!f&&!d&&t.protocol!==r)&&(n.addClass(c.externalClass),p.external=!0,++o)}!p.external&&c.internalClass&&(e=e||new RegExp("^(?:"+t.toString().replace(/^https\\?:/,"https?:").split("#")[0].replace(/([\\\^\$*+\[\]?{}.=!:(|)])/g,"\\$1")+")?#.","i"),e.test(l)&&(n.addClass(c.internalClass),p.internal=!0,++o))}for(var g in c.patterns){var C=c.patterns[g]||{},m=C.check||C,x=a.isFunction(m)?m(s,g):null;(x||m.test(l))&&(n.addClass(x||C.tag||c.patternClassPrefix+g),(p.pattern||(p.pattern=[])).push(g),p.a[g]=!0,++o)}}o&&(i.push(n[0]),c.onTag&&c.onTag.call(c,n,p))})}return this.taggedAnchors=a(i),this};l.config={baseDomains:s?[s+(n?":"+n:"")]:[],localDomains:[],skipFilter:".no-anchortags",emailClass:"mailto",telClass:"tel",externalClass:"external",internalClass:"withinpage",patternClassPrefix:"file_",secureClass:"secure"},l.patterns={image:{check:/\.(jpe?g|png|gif)($|#|\?)/i},audio:{check:/\.(mp3|wav|aac|wma|flac|ogg)($|#|\?)/i},video:{check:/\.(m(ov|pe?g|p4)|avi|wmv)($|#|\?)/i},pdf:{check:/\.(pdf)($|#|\?)/i},doc:{check:/\.(docx?|rtf|wri|odt|sxw)(#|$|\?)/i},xls:{check:/\.(xlsx?|csv|ods|sxc)(#|$|\?)/i},pack:{check:/\.(zip|rar|7z|gz)(#|$|\?)/i}}}(window.jQuery);

