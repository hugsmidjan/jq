// encoding: utf-8
// $.fn.anchorTags 1.0  -- (c) 2009 Hugsmi√∞jan ehf. 
(function(b){var j,f=document.location,t=f.hostname,u=f.port;var g=b.fn.anchorTags=function(c){c=c||{};var v=this.filter('[href]'),k=v.length;if(k){var a=b.extend({patterns:{}},g.config),l=c.localDomains||[],w,x=c.patterns,m=g.patterns;delete c.patterns;b.extend(a,c);if(a.usePatterns){b.each(a.usePatterns,function(A,n){m[n]&&(a.patterns[n]=m[n])})}else{b.extend(a.patterns,m)}b.extend(a.patterns,x);c.patterns=x;l=l.concat(a.baseDomains);w=new RegExp('^([a-z]{3,12}):\/\/('+l.join('|').replace(/\./g,'\.').replace(/\\\./g,'.')+')(/|$)','i');while(k--){var h=v[k],e=b(h),o=h.href,y=0,d=h.protocol;if(d=='mailto:'){e.addClass(a.emailClass)}else{if(!/^(javascript|data):/.test(d)){if(d){var p=d=='https:',z=d=='http:';if(p){e.addClass(a.secureClass)}if(a.externalClass&&(((z||p)&&!w.test(o))||(!z&&!p&&f.protocol!=d))){e.addClass(a.externalClass);y=1}}if(!y&&a.internalClass){j=j||new RegExp("^("+f.toString().replace(/^https?:/,'https?:').split('#')[0].replace(/\./g,'\.')+")?#.",'i');j.test(o)&&e.addClass(a.internalClass)}}for(var q in a.patterns){var r=a.patterns[q]||{},s=r.check||r,i=b.isFunction(s)?s(h,q):null;if(i||s.test(o)){e.addClass(r.tag||(i&&i.charAt&&i)||a.patternClassPrefix+q)}}}}}return this};g.config={baseDomains:t?[t+(u?':'+u:'')]:[],localDomains:[],emailClass:'mailto',externalClass:'external',internalClass:'withinpage',patternClassPrefix:'file_',secureClass:'secure'};g.patterns={image:{check:/\.(jpe?g|png|gif)($|#|\?)/i},audio:{check:/\.(mp3|wav|aac|wma|flac|ogg)($|#|\?)/i},video:{check:/\.(m(ov|pe?g|p4)|avi|wmv)($|#|\?)/i},pdf:{check:/\.(pdf)($|#|\?)/i},doc:{check:/\.(docx?|rtf|wri|odt|sxw)(#|$|\?)/i},xls:{check:/\.(xlsx?|csv|ods|sxc)(#|$|\?)/i}}})(jQuery);
