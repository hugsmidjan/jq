/* $.fn.paginazor  -- (c) 2018 Hugsmiðjan ehf.  @preserve */
!function(e){var a={pagingSel:".paging",triggerSel:".next a",ajaxSel:".articlelist",itemSel:".item",ajaxParams:"justPicPos=pgmain",loadingClassTarget:"html",loadLazyImages:!1,infinityLoad:!1,showPagesLeft:!1,maintainStatusOnBack:!0,clearStatusSelector:"a:not(.pgmain a)",articleIdAttr:"data-aid",scrollOffset:100,scrollSpeed:1,pagesLeftText:"is"===e.lang()?"síður eftir":"pages left",loadMoreText:"is"===e.lang()?"Hlaða fleiri greinum":"Load more articles"},t=window.sessionStorage,i=JSON.parse(t.getItem("pagingTarget")),n=i&&i.listId,r=i&&parseInt(i.pageNo,10),l=i&&i.itemNo,g=function(a,i){var g=i.infinityLoad&&"notfirst"!==i.infinityLoad,d=1,c=document.location.pathname;n!==c&&(t.removeItem("pagingTarget"),r=l=null),i.loadLazyImages&&o(a.find(i.itemSel)),s(a.find(i.pagingSel),g,i),a.on("click.loadmore",i.pagingSel+" "+i.triggerSel,function(t){t.preventDefault(),e(i.loadingClassTarget).addClass("ajax-wait"),d++,e.get(e(this).attr("href"),i.ajaxParams).done(function(t){if(t=e(t).find(i.ajaxSel).find(i.itemSel+","+i.pagingSel),a.find(i.pagingSel).replaceWith(t),i.loadLazyImages&&o(t),a.trigger("listupdated",[{itemlist:t,page:d}]),s(a.find(i.pagingSel),i.infinityLoad,i),i.maintainStatusOnBack&&r)if(r>d)a.find(i.pagingSel+" "+i.triggerSel).trigger("click.loadmore");else if(r===d){var n=a.find('.item[data-aid="'+l+'"]');if(n.length){var g=n.offset().top-i.scrollOffset;e("html, body").animate({scrollTop:g},i.scrollSpeed),n.focusHere()}}}).always(function(){e(i.loadingClassTarget).removeClass("ajax-wait")})}),i.maintainStatusOnBack&&(a.on("click.setstatus",i.itemSel,function(){var a=e(this).attr(i.articleIdAttr);t.setItem("pagingTarget",JSON.stringify({pageNo:d,itemNo:a,listId:c}))}),r&&r>d&&a.find(i.pagingSel+" "+i.triggerSel).trigger("click.loadmore"),e(document).on("click.cleartarget",i.clearStatusSelector,function(){t.removeItem("pagingTarget")}))},s=function(e,a,t){if(e.find(t.triggerSel).length){e.addClass("pagelist-active");var i=t.loadMoreText;if(t.showPagesLeft){var n=e.find(".status").text().match(/\d+/g);n&&n[1]&&(i+=" <span>"+(parseInt(n[1],10)-parseInt(n[0],10))+" "+t.pagesLeftText+"</span>")}e.find(t.triggerSel).html(i)}else e.remove();a&&e.on("whenonscreen",function(){e.find(t.triggerSel).trigger("click.loadmore")}).whenOnScreen({live:!0,ranges:{visible:{top:"75%s"}}})},o=function(a){a.find("ins.image").on("whenonscreen",function(){e(this).off("whenonscreen").css({"background-image":"url("+e(this).attr("data-src")+")"}).parent().addClass("lazy-loaded")}).whenOnScreen({live:!0})};e.fn.paginazor=function(t){return t=e.extend(a,t),this.each(function(){g(e(this),t)})}}(jQuery);
