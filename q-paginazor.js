/* $.fn.paginazor  -- (c) 2018 Hugsmiðjan ehf.  @preserve */
!function(e){var a={pagingSel:"> .paging",triggerSel:".next a",ajaxSel:".articlelist .boxbody",itemSel:"> .item",ajaxParams:"justPicPos=pgmain",loadingClassTarget:"html",loadLazyImages:!1,infinityLoad:!1,showPagesLeft:!1,maintainStatusOnBack:!0,clearStatusSelector:"a:not(.pgmain a)",articleIdAttr:"data-aid",scrollOffset:100,scrollSpeed:250,pagesLeftText:"is"===e.lang()?"síður eftir":"pages left",loadMoreText:"is"===e.lang()?"Hlaða fleiri greinum":"Load more articles"},t=window.sessionStorage,i=JSON.parse(t.getItem("pagingTarget")),n=i&&parseInt(i.pageNo,10),r=i&&i.itemNo,l=function(a,i){var l=i.infinityLoad&&"notfirst"!==i.infinityLoad,o=1;i.loadLazyImages&&g(a.find(i.itemSel)),s(a.find(i.pagingSel),l,i),a.on("click.loadmore",i.pagingSel+" "+i.triggerSel,function(t){t.preventDefault(),e(i.loadingClassTarget).addClass("ajax-wait"),o++,e.get(e(this).attr("href"),i.ajaxParams).done(function(t){if(t=e(t).find(i.ajaxSel).find(i.itemSel+","+i.pagingSel),a.find(i.pagingSel).replaceWith(t),i.loadLazyImages&&g(t),a.trigger("listupdated",[{itemlist:t,page:o}]),s(a.find(i.pagingSel),i.infinityLoad,i),i.maintainStatusOnBack)if(n>o)a.find(i.pagingSel+" "+i.triggerSel).trigger("click.loadmore");else if(n===o){var l=a.find('.item[data-aid="'+r+'"]');if(l.length){var d=l.offset().top-i.scrollOffset;e("html, body").animate({scrollTop:d},i.scrollSpeed),l.focusHere()}}}).always(function(){e(i.loadingClassTarget).removeClass("ajax-wait")})}),i.maintainStatusOnBack&&(a.on("click.setstatus",i.itemSel,function(){var a=e(this).attr(i.articleIdAttr);t.setItem("pagingTarget",JSON.stringify({pageNo:o,itemNo:a}))}),n>o&&a.find(i.pagingSel+" "+i.triggerSel).trigger("click.loadmore"),e(document).on("click",i.clearStatusSelector,function(){t.removeItem("pagingTarget")}))},s=function(e,a,t){if(e.find(t.triggerSel).length){e.addClass("pagelist-active");var i=t.loadMoreText;if(t.showPagesLeft){var n=e.find(".status").text().match(/\d+/g);n&&n[1]&&(i+=" <span>"+(parseInt(n[1],10)-parseInt(n[0],10))+" "+t.pagesLeftText+"</span>")}e.find(t.triggerSel).html(i)}else e.remove();a&&e.on("whenonscreen",function(){e.find(t.triggerSel).trigger("click.loadmore")}).whenOnScreen({live:!0,ranges:{visible:{top:"75%s"}}})},g=function(a){a.find("ins.image").on("whenonscreen",function(){e(this).off("whenonscreen").css({"background-image":"url("+e(this).attr("data-src")+")"}).parent().addClass("lazy-loaded")}).whenOnScreen({live:!0})};e.fn.paginazor=function(t){return t=e.extend(a,t),this.each(function(){l(e(this),t)})}}(jQuery);
