/* $.fn.editedSeach 1.0  -- (c) 2016 Hugsmiðjan ehf. @preserve */
!function(e){var a=function(a,t){var c,n=a.find("input:text"),r=/^\.\//.test(Req.localPath),s=window.ga&&window.ga.eventPing?window.ga.eventPing:function(){},i=e.debounceFn(function(e){s("sitessearch-box","ac-result",e)},800);n.autocomplete({minLength:t.minSearchLength,delay:t.searchDelay,autoFocus:t.autoFocus,appendTo:a,source:function(a,n){var s=this.element,o=e(s[0].form),u=r?"searchresults.html":t.ajaxSearchUrl;i.cancel(),c&&c.abort(),c=e.ajax({url:u,data:o.serialize()+"&"+e.param(t.ajaxParams)}).done(function(c){var r=[];e(e.imgSuppress(c)).find(t.editedSearchSelextor+" a").each(function(a){var t=e(this);r.push({label:t.html(),url:t.attr("href"),pos:a+1})}),t.useGaPing&&i(a.term+" | curated:"+r.length),r.push({label:t.searchForText+' <strong>"'+a.term+'"</strong>',className:"search",searchAction:!0}),n(r)})},position:{},html:!0}).on("autocompletefocus",function(e){e.preventDefault()}).on("autocompleteselect",function(a,c){if(a.preventDefault(),c.item.searchAction){var n=e(this).autocomplete("widget").children().length;t.useGaPing&&s("sitessearch-box","ac-click-search",this.value+" | curated:"+n),e(this).closest("form").submit()}else t.useGaPing&&s("sitessearch-box","ac-click",this.value+" | listPos:"+c.item.pos+" | "+c.item.url),location.href=c.item.url})};e.fn.editedSeach=function(t){var c={ajaxSearchUrl:"/search",useGaPing:!1,searchForText:"is"===e.lang()?"Leita að ":"Search for ",ajaxParams:{justPicPos:"pgmain"},editedSearchSelextor:".curatedsearch",minSearchLength:1,searchDelay:200,autoFocus:!1},n=e.extend(c,t);return this.each(function(){a(e(this),n)})}}(jQuery);
