/* $.fn.editedSeach 1.0  -- (c) 2016 Hugsmiðjan ehf. @preserve */
!function(e){var a=function(a,t){var r,c=a.find("input:text"),s=/^\.\//.test(Req.localPath),i=e.debounceFn(function(e){gaPing("sitessearch-box","ac-result",e)},800);c.autocomplete({minLength:t.minSearchLength,delay:t.searchDelay,autoFocus:t.autoFocus,appendTo:a,source:function(a,c){var n=this.element,o=e(n[0].form),u=s?"searchresults.html":t.ajaxSearchUrl;i.cancel(),r&&r.abort(),r=e.ajax({url:u,data:o.serialize()+"&"+e.param(t.ajaxParams)}).done(function(r){var s=[];e(e.imgSuppress(r)).find(t.editedSearchSelextor+" a").each(function(a){var t=e(this);s.push({label:t.html(),url:t.attr("href"),pos:a+1})}),t.useGaPing&&i(a.term+" | curated:"+s.length),s.push({label:t.searchForText+' <strong>"'+a.term+'"</strong>',className:"search",searchAction:!0}),c(s)})},position:{},html:!0}).on("autocompletefocus",function(e){e.preventDefault()}).on("autocompleteselect",function(a,r){if(a.preventDefault(),r.item.searchAction){var c=e(this).autocomplete("widget").children().length;t.useGaPing&&gaPing("sitessearch-box","ac-click-search",this.value+" | curated:"+c),e(this).closest("form").submit()}else t.useGaPing&&gaPing("sitessearch-box","ac-click",this.value+" | listPos:"+r.item.pos+" | "+r.item.url),location.href=r.item.url})};e.fn.editedSeach=function(t){var r={ajaxSearchUrl:"/search",useGaPing:!1,searchForText:"is"===e.lang()?"Leita að ":"Search for ",ajaxParams:{justPicPos:"pgmain"},editedSearchSelextor:".curatedsearch",minSearchLength:1,searchDelay:200,autoFocus:!1},c=e.extend(r,t);return this.each(function(){a(e(this),c)})}}(jQuery);
