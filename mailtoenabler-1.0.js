// $.fn.mailtoEnabler 1.0  -- (c) 2009 Hugsmiðjan ehf.
(function(b){b.fn.mailtoEnabler=function(c){var e=this;if(e.length){c=b.extend({dotSymbols:['dot','punktur','period','\\.'],atSymbols:['at','hj[aá]','@'],openBracket:[' ','\\-','_','{','\\[','('],closeBracket:[' ','\\-','_','}','\\]',')'],createLinks:true},c);var g='['+c.openBracket.join('')+']+(',h=')['+c.closeBracket.join('')+']+',l=new RegExp(g+c.atSymbols.join('|')+h,'i'),m=new RegExp(g+c.dotSymbols.join('|')+h,'gi'),i=/^.*\/?mailto\s*:\s*/,j=window.decodeURI||function(a){return a};return e.each(function(){var a=b('a',this)[0]||this,f=a.tagName==='A',d=(a.href)?j(a.href).replace(i,''):'',k=!d||d===j(a.href);if(k){b('img',a).each(function(){b(this).replaceWith(this.alt)});d=b(a).text().replace(i,'')}if(d){d=d.replace(l,'@').replace(m,'.');c.successClass&&b(a).addClass(c.successClass);if(c.createLinks&&!f){a=b(a).wrapInner('<a />').find('a')[0];f=1}if(f){a.href='mailto:'+d}if(k){b(a).text(d)}}})}return e}})(jQuery);
