/* Copyright (c) 2009 Simo Kinnunen. Licensed under the MIT license. */
var Cufon=(function(){var k=function(){return k.replace.apply(null,arguments)};var F=k.DOM={ready:(function(){var b=false,d={loaded:1,complete:1};var c=[],f=function(){if(b)return;b=true;for(var a;a=c.shift();a())};if(document.addEventListener){document.addEventListener('DOMContentLoaded',f,false);window.addEventListener('pageshow',f,false)}if(!window.opera&&document.readyState)(function(){d[document.readyState]?f():setTimeout(arguments.callee,10)})();if(document.readyState&&document.createStyleSheet)(function(){try{document.body.doScroll('left');f()}catch(e){setTimeout(arguments.callee,1)}})();w(window,'load',f);return function(a){if(!arguments.length)f();else b?a():c.push(a)}})(),root:function(){return document.documentElement||document.body}};var n=k.CSS={Size:function(b,d){this.value=parseFloat(b);this.unit=String(b).match(/[a-z%]*$/)[0]||'px';this.convert=function(a){return a/d*this.value};this.convertFrom=function(a){return a/this.value*d};this.toString=function(){return this.value+this.unit}},addClass:function(a,b){a.className=(a.className&&' ')+b;return a},color:A(function(c){var f={};f.color=c.replace(/^rgba\((.*?),\s*([\d.]+)\)/,function(a,b,d){f.opacity=parseFloat(d);return'rgb('+b+')'});return f}),fontStretch:A(function(a){if(typeof a=='number')return a;if(/%$/.test(a))return parseFloat(a)/100;return{'ultra-condensed':0.5,'extra-condensed':0.625,condensed:0.75,'semi-condensed':0.875,'semi-expanded':1.125,expanded:1.25,'extra-expanded':1.5,'ultra-expanded':2}[a]||1}),getStyle:function(a){var b=document.defaultView;if(b&&b.getComputedStyle)return new G(b.getComputedStyle(a,null));if(a.currentStyle)return new G(a.currentStyle);return new G(a.style)},gradient:A(function(a){var b={id:a,type:a.match(/^-([a-z]+)-gradient\(/)[1],stops:[]},d=a.substr(a.indexOf('(')).match(/([\d.]+=)?(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)/ig);for(var c=0,f=d.length,g;c<f;++c){g=d[c].split('=',2).reverse();b.stops.push([g[1]||c/(f-1),g[0]])}return b}),quotedList:A(function(a){var b=[],d=/\s*((["'])([\s\S]*?[^\\])\2|[^,]+)\s*/g,c;while(c=d.exec(a))b.push(c[3]||c[1]);return b}),recognizesMedia:A(function(a){var b=document.createElement('style'),d,c,f;b.type='text/css';b.media=a;try{b.appendChild(document.createTextNode('/**/'))}catch(e){}c=B('head')[0];c.insertBefore(b,c.firstChild);d=(b.sheet||b.styleSheet);f=d&&!d.disabled;c.removeChild(b);return f}),removeClass:function(a,b){var d=RegExp('(?:^|\\s+)'+b+'(?=\\s|$)','g');a.className=a.className.replace(d,'');return a},supports:function(a,b){var d=document.createElement('span').style;if(d[a]===undefined)return false;d[a]=b;return d[a]===b},textAlign:function(a,b,d,c){if(b.get('textAlign')=='right'){if(d>0)a=' '+a}else if(d<c-1)a+=' ';return a},textDecoration:function(a,b){if(!b)b=this.getStyle(a);var d={underline:null,overline:null,'line-through':null};for(var c=a;c.parentNode&&c.parentNode.nodeType==1;){var f=true;for(var g in d){if(!H(d,g)||d[g])continue;if(b.get('textDecoration').indexOf(g)!=-1)d[g]=b.get('color');f=false}if(f)break;b=this.getStyle(c=c.parentNode)}return d},textShadow:A(function(a){if(a=='none')return null;var b=[],d={},c,f=0;var g=/(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)|(-?[\d.]+[a-z%]*)|,/ig;while(c=g.exec(a)){if(c[0]==','){b.push(d);d={};f=0}else if(c[1]){d.color=c[1]}else{d[['offX','offY','blur'][f++]]=c[2]}}b.push(d);return b}),textTransform:(function(){var c={uppercase:function(a){return a.toUpperCase()},lowercase:function(a){return a.toLowerCase()},capitalize:function(b){return b.replace(/\b./g,function(a){return a.toUpperCase()})}};return function(a,b){var d=c[b.get('textTransform')];return d?d(a):a}})(),whiteSpace:(function(){var c={inline:1,'inline-block':1,'run-in':1};return function(a,b,d){if(c[b.get('display')])return a;if(!d.previousSibling)a=a.replace(/^\s+/,'');if(!d.nextSibling)a=a.replace(/\s+$/,'');return a}})()};n.ready=(function(){var j=!n.recognizesMedia('all'),i=false;var h=[],l=function(){j=true;for(var a;a=h.shift();a())};var q=B('link'),m=B('style');function o(a){return a.disabled||I(a.sheet,a.media||'screen')}function I(a,b){if(!n.recognizesMedia(b||'all'))return true;if(!a||a.disabled)return false;try{var d=a.cssRules,c;if(d){search:for(var f=0,g=d.length;c=d[f],f<g;++f){switch(c.type){case 2:break;case 3:if(!I(c.styleSheet,c.media.mediaText))return false;break;default:break search}}}}catch(e){}return true}function x(){if(document.createStyleSheet)return true;var a,b;for(b=0;a=q[b];++b){if(a.rel.toLowerCase()=='stylesheet'&&!o(a))return false}for(b=0;a=m[b];++b){if(!o(a))return false}return true}F.ready(function(){if(!i)i=n.getStyle(document.body).isUsable();if(j||(i&&x()))l();else setTimeout(arguments.callee,10)});return function(a){if(j)a();else h.push(a)}})();function K(d){var c=this.face=d.face;this.glyphs=d.glyphs;this.w=d.w;this.baseSize=parseInt(c['units-per-em'],10);this.family=c['font-family'].toLowerCase();this.weight=c['font-weight'];this.style=c['font-style']||'normal';this.viewBox=(function(){var a=c.bbox.split(/\s+/);var b={minX:parseInt(a[0],10),minY:parseInt(a[1],10),maxX:parseInt(a[2],10),maxY:parseInt(a[3],10)};b.width=b.maxX-b.minX;b.height=b.maxY-b.minY;b.toString=function(){return[this.minX,this.minY,this.width,this.height].join(' ')};return b})();this.ascent=-parseInt(c.ascent,10);this.descent=-parseInt(c.descent,10);this.height=-this.ascent+this.descent}function U(){var q={},m={oblique:'italic',italic:'oblique'};this.add=function(a){(q[a.style]||(q[a.style]={}))[a.weight]=a};this.get=function(d,c){var f=q[d]||q[m[d]]||q.normal||q.italic||q.oblique;if(!f)return null;c={normal:400,bold:700}[c]||parseInt(c,10);if(f[c])return f[c];var g={1:1,99:0}[c%100],j=[],i,h;if(g===undefined)g=c>400;if(c==500)c=400;for(var l in f){if(!H(f,l))continue;l=parseInt(l,10);if(!i||l<i)i=l;if(!h||l>h)h=l;j.push(l)}if(c<i)c=i;if(c>h)c=h;j.sort(function(a,b){return(g?(a>c&&b>c)?a<b:a>b:(a<c&&b<c)?a>b:a<b)?-1:1});return f[j[0]]}}function s(){function d(a,b){if(a.contains)return a.contains(b);return a.compareDocumentPosition(b)&16}function c(a){var b=a.relatedTarget;if(!b||d(this,b))return;g(this)}function f(a){g(this)}function g(a){setTimeout(function(){k.replace(a,r.get(a).options,true)},10)}this.attach=function(a){if(a.onmouseenter===undefined){w(a,'mouseover',c);w(a,'mouseout',c)}else{w(a,'mouseenter',f);w(a,'mouseleave',f)}}}function M(){var f=[],g={};function j(a){var b=[],d;for(var c=0;d=a[c];++c)b[c]=f[g[d]];return b}this.add=function(a,b){g[a]=f.push(b)-1};this.repeat=function(){var a=arguments.length?j(arguments):f,b;for(var d=0;b=a[d++];)k.replace(b[0],b[1],true)}}function P(){var d={},c=0;function f(a){return a.cufid||(a.cufid=++c)}this.get=function(a){var b=f(a);return d[b]||(d[b]={})}}function G(d){var c={},f={};this.extend=function(a){for(var b in a){if(H(a,b))c[b]=a[b]}return this};this.get=function(a){return c[a]!=undefined?c[a]:d[a]};this.getSize=function(a,b){return f[a]||(f[a]=new n.Size(this.get(a),b))};this.isUsable=function(){return!!d}}function w(a,b,d){if(a.addEventListener){a.addEventListener(b,d,false)}else if(a.attachEvent){a.attachEvent('on'+b,function(){return d.call(a,window.event)})}}function V(a,b){var d=r.get(a);if(d.options)return a;if(b.hover&&b.hoverables[a.nodeName.toLowerCase()]){y.attach(a)}d.options=b;return a}function A(b){var d={};return function(a){if(!H(d,a))d[a]=b.apply(null,arguments);return d[a]}}function u(a,b){if(!b)b=n.getStyle(a);var d=n.quotedList(b.get('fontFamily').toLowerCase()),c;for(var f=0,g=d.length;f<g;++f){c=d[f];if(z[c])return z[c].get(b.get('fontStyle'),b.get('fontWeight'))}return null}function B(a){return document.getElementsByTagName(a)}function H(a,b){return a.hasOwnProperty(b)}function J(){var a={},b,d;for(var c=0,f=arguments.length;b=arguments[c],c<f;++c){for(d in b){if(H(b,d))a[d]=b[d]}}return a}function N(a,b,d,c,f,g){var j=c.separate;if(j=='none')return C[c.engine].apply(null,arguments);var i=document.createDocumentFragment(),h;var l=b.split(X[j]),q=(j=='words');if(q&&Q){if(/^\s/.test(b))l.unshift('');if(/\s$/.test(b))l.push('')}for(var m=0,o=l.length;m<o;++m){h=C[c.engine](a,q?n.textAlign(l[m],d,m,o):l[m],d,c,f,g,m<o-1);if(h)i.appendChild(h)}return i}function R(a,b){var d,c,f,g,j,i;for(f=V(a,b).firstChild;f;f=j){g=f.nodeType;j=f.nextSibling;i=false;if(g==1){if(!f.firstChild)continue;if(!/cufon/.test(f.className)){arguments.callee(f,b);continue}else i=true}else if(g!=3)continue;if(!c)c=n.getStyle(a).extend(b);if(!d)d=u(a,c);if(!d)continue;if(i){C[b.engine](d,null,c,b,f,a);continue}var h=n.whiteSpace(f.data,c,f);if(h==='')continue;var l=N(d,h,c,b,f,a);if(l)f.parentNode.replaceChild(l,f);else f.parentNode.removeChild(f)}}var Q=' '.split(/\s+/).length==0;var r=new P();var y=new s();var t=new M();var D=false;var C={},z={},S={enableTextDecoration:false,engine:null,forceHitArea:false,hover:false,hoverables:{a:true},printable:true,selector:(window.Sizzle||(window.jQuery&&function(a){return jQuery(a)})||(window.dojo&&dojo.query)||(window.$$&&function(a){return $$(a)})||(window.$&&function(a){return $(a)})||(document.querySelectorAll&&function(a){return document.querySelectorAll(a)})||(window.Ext&&Ext.query)||B),separate:'words',textShadow:'none'};var X={words:/[^\S\u00a0]+/,characters:''};k.now=function(){F.ready();return k};k.refresh=function(){t.repeat.apply(t,arguments);return k};k.registerEngine=function(a,b){if(!b)return k;C[a]=b;return k.set('engine',a)};k.registerFont=function(a){var b=new K(a),d=b.family;if(!z[d])z[d]=new U();z[d].add(b);return k.set('fontFamily','"'+d+'"')};k.replace=function(c,f,g){f=J(S,f);if(!f.engine)return k;if(!D){n.addClass(F.root(),'cufon-active cufon-loading');n.ready(function(){n.removeClass(F.root(),'cufon-loading')});D=true}if(f.hover)f.forceHitArea=true;if(f.autoDetect){delete f.fontFamily}if(typeof f.textShadow=='string')f.textShadow=n.textShadow(f.textShadow);if(typeof f.color=='string'&&/^-/.test(f.color))f.textGradient=n.gradient(f.color);if(!g)t.add(c,arguments);if(c.nodeType||typeof c=='string')c=[c];n.ready(function(){for(var a=0,b=c.length;a<b;++a){var d=c[a];if(typeof d=='string')k.replace(f.selector(d),f,true);else R(d,f)}});return k};k.set=function(a,b){S[a]=b;return k};return k})();Cufon.registerEngine('canvas',(function(){var L=document.createElement('canvas');if(!L||!L.getContext||!L.getContext.apply)return;L=null;var W=Cufon.CSS.supports('display','inline-block');var bj=!W&&(document.compatMode=='BackCompat'||/frameset|transitional/i.test(document.doctype.publicId));var bb=document.createElement('style');bb.type='text/css';bb.appendChild(document.createTextNode(('.cufon-canvas{text-indent:0;}@media screen,projection{.cufon-canvas{display:inline;display:inline-block;position:relative;vertical-align:middle;'+(bj?'':'font-size:1px;line-height:1px;')+'}.cufon-canvas .cufon-alt{display:-moz-inline-box;display:inline-block;width:0;height:0;overflow:hidden;text-indent:-10000in;}'+(W?'.cufon-canvas canvas{position:relative;}':'.cufon-canvas canvas{position:absolute;}')+'}@media print{.cufon-canvas{padding:0;}.cufon-canvas canvas{display:none;}.cufon-canvas .cufon-alt{display:inline;}}').replace(/;/g,'!important;')));document.getElementsByTagName('head')[0].appendChild(bb);function bc(a,b){var d=0,c=0;var f=[],g=/([mrvxe])([^a-z]*)/g,j;generate:for(var i=0;j=g.exec(a);++i){var h=j[2].split(',');switch(j[1]){case'v':f[i]={m:'bezierCurveTo',a:[d+~~h[0],c+~~h[1],d+~~h[2],c+~~h[3],d+=~~h[4],c+=~~h[5]]};break;case'r':f[i]={m:'lineTo',a:[d+=~~h[0],c+=~~h[1]]};break;case'm':f[i]={m:'moveTo',a:[d=~~h[0],c=~~h[1]]};break;case'x':f[i]={m:'closePath'};break;case'e':break generate}b[f[i].m].apply(b,f[i].a)}return f}function bd(a,b){for(var d=0,c=a.length;d<c;++d){var f=a[d];b[f.m].apply(b,f.a)}}return function(f,g,j,i,h,l){var q=(g===null);if(q)g=h.alt;var m=f.viewBox;var o=j.getSize('fontSize',f.baseSize);var I=j.get('letterSpacing');I=(I=='normal')?0:o.convertFrom(parseInt(I,10));var x=0,k=0,F=0,n=0;var K=i.textShadow,U=[];if(K){for(var s=K.length;s--;){var M=K[s];var P=o.convertFrom(parseFloat(M.offX));var G=o.convertFrom(parseFloat(M.offY));U[s]=[P,G];if(G<x)x=G;if(P>k)k=P;if(G>F)F=G;if(P<n)n=P}}var w=Cufon.CSS.textTransform(g,j).split(''),V;var A=f.glyphs,u,B,H;var J=0,N,R=[];for(var s=0,Q=0,r=w.length;s<r;++s){u=A[V=w[s]]||f.missingGlyph;if(!u)continue;if(B){J-=H=B[V]||0;R[Q-1]-=H}J+=N=R[Q++]=~~(u.w||f.w)+I;B=u.k}if(N===undefined)return null;k+=m.width-N;n+=m.minX;var y,t;if(q){y=h;t=h.firstChild}else{y=document.createElement('span');y.className='cufon cufon-canvas';y.alt=g;t=document.createElement('canvas');y.appendChild(t);if(i.printable){var D=document.createElement('span');D.className='cufon-alt';D.appendChild(document.createTextNode(g));y.appendChild(D)}}var C=y.style;var z=t.style;var S=o.convert(m.height);var X=Math.ceil(S);var be=X/S;var bf=be*Cufon.CSS.fontStretch(j.get('fontStretch'));var bk=J*bf;var bg=Math.ceil(o.convert(bk+k-n));var bh=Math.ceil(o.convert(m.height-x+F));t.width=bg;t.height=bh;z.width=bg+'px';z.height=bh+'px';x+=m.minY;z.top=Math.round(o.convert(x-f.ascent))+'px';z.left=Math.round(o.convert(n))+'px';var Y=Math.ceil(o.convert(bk))+'px';if(W){C.width=Y;C.height=o.convert(f.height)+'px'}else{C.paddingLeft=Y;C.paddingBottom=(o.convert(f.height)-1)+'px'}var p=t.getContext('2d'),bi=S/m.height;p.scale(bi,bi*be);p.translate(-n,-x);p.lineWidth=f.face['underline-thickness'];p.save();function T(a,b){p.strokeStyle=b;p.beginPath();p.moveTo(0,a);p.lineTo(J,a);p.stroke()}var v=i.enableTextDecoration?Cufon.CSS.textDecoration(l,j):{};if(v.underline)T(-f.face['underline-position'],v.underline);if(v.overline)T(f.ascent,v.overline);function E(){p.scale(bf,1);for(var a=0,b=0,d=w.length;a<d;++a){var c=A[w[a]]||f.missingGlyph;if(!c)continue;if(c.d){p.beginPath();if(c.code)bd(c.code,p);else c.code=bc('m'+c.d,p);p.fill()}p.translate(R[b++],0)}p.restore()}if(K){for(var s=K.length;s--;){var M=K[s];p.save();p.fillStyle=M.color;p.translate.apply(p,U[s]);E()}}var Z=i.textGradient;if(Z){var ba=Z.stops,O=p.createLinearGradient(0,m.minY,0,m.maxY);for(var s=0,r=ba.length;s<r;++s){O.addColorStop.apply(O,ba[s])}p.fillStyle=O}else p.fillStyle=j.get('color');E();if(v['line-through'])T(-f.descent,v['line-through']);return y}})());Cufon.registerEngine('vml',(function(){if(!document.namespaces)return;if(document.namespaces.cvml==null){document.namespaces.add('cvml','urn:schemas-microsoft-com:vml')}var W=document.createElement('cvml:shape');W.style.behavior='url(#default#VML)';if(!W.coordsize)return;W=null;var bj=(document.documentMode||0)<8;document.write(('<style type="text/css">.cufon-vml-canvas{text-indent:0;}@media screen{cvml\\:shape,cvml\\:rect,cvml\\:fill,cvml\\:shadow{behavior:url(#default#VML);display:block;antialias:true;position:absolute;}.cufon-vml-canvas{position:absolute;text-align:left;}.cufon-vml{display:inline-block;position:relative;vertical-align:'+(bj?'middle':'text-bottom')+';}.cufon-vml .cufon-alt{position:absolute;left:-10000in;font-size:1px;}a .cufon-vml{cursor:pointer}}@media print{.cufon-vml *{display:none;}.cufon-vml .cufon-alt{display:inline;}}</style>').replace(/;/g,'!important;'));function bb(a,b){return bc(a,/(?:em|ex|%)$|^[a-z-]+$/i.test(b)?'1em':b)}function bc(a,b){if(/px$/i.test(b))return parseFloat(b);var d=a.style.left,c=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b.replace('%','em');var f=a.style.pixelLeft;a.style.left=d;a.runtimeStyle.left=c;return f}var bd={};function bl(a){var b=a.id;if(!bd[b]){var d=a.stops,c=document.createElement('cvml:fill'),f=[];c.type='gradient';c.angle=180;c.focus='0';c.method='sigma';c.color=d[0][1];for(var g=1,j=d.length-1;g<j;++g){f.push(d[g][0]*100+'% '+d[g][1])}c.colors=f.join(',');c.color2=d[j][1];bd[b]=c}return bd[b]}return function(a,b,d,c,f,g,j){var i=(b===null);if(i)b=f.alt;var h=a.viewBox;var l=d.computedFontSize||(d.computedFontSize=new Cufon.CSS.Size(bb(g,d.get('fontSize'))+'px',a.baseSize));var q=d.computedLSpacing;if(q==undefined){q=d.get('letterSpacing');d.computedLSpacing=q=(q=='normal')?0:~~l.convertFrom(bc(g,q))}var m,o;if(i){m=f;o=f.firstChild}else{m=document.createElement('span');m.className='cufon cufon-vml';m.alt=b;o=document.createElement('span');o.className='cufon-vml-canvas';m.appendChild(o);if(c.printable){var I=document.createElement('span');I.className='cufon-alt';I.appendChild(document.createTextNode(b));m.appendChild(I)}if(!j)m.appendChild(document.createElement('cvml:shape'))}var x=m.style;var k=o.style;var F=l.convert(h.height),n=Math.ceil(F);var K=n/F;var U=K*Cufon.CSS.fontStretch(d.get('fontStretch'));var s=h.minX,M=h.minY;k.height=n;k.top=Math.round(l.convert(M-a.ascent));k.left=Math.round(l.convert(s));x.height=l.convert(a.height)+'px';var P=c.enableTextDecoration?Cufon.CSS.textDecoration(g,d):{};var G=d.get('color');var w=Cufon.CSS.textTransform(b,d).split(''),V;var A=a.glyphs,u,B,H;var J=0,N=[],R=0,Q;var r,y=c.textShadow;for(var t=0,D=0,C=w.length;t<C;++t){u=A[V=w[t]]||a.missingGlyph;if(!u)continue;if(B){J-=H=B[V]||0;N[D-1]-=H}J+=Q=N[D++]=~~(u.w||a.w)+q;B=u.k}if(Q===undefined)return null;var z=-s+J+(h.width-Q);var S=l.convert(z*U),X=Math.round(S);var be=z+','+h.height,bf;var bk='r'+be+'ns';var bg=c.textGradient&&bl(c.textGradient);for(t=0,D=0;t<C;++t){u=A[w[t]]||a.missingGlyph;if(!u)continue;if(i){r=o.childNodes[D];while(r.firstChild)r.removeChild(r.firstChild)}else{r=document.createElement('cvml:shape');o.appendChild(r)}r.stroked='f';r.coordsize=be;r.coordorigin=bf=(s-R)+','+M;r.path=(u.d?'m'+u.d+'xe':'')+'m'+bf+bk;r.fillcolor=G;if(bg)r.appendChild(bg.cloneNode(false));var bh=r.style;bh.width=X;bh.height=n;if(y){var Y=y[0],p=y[1];var bi=Cufon.CSS.color(Y.color),T;var v=document.createElement('cvml:shadow');v.on='t';v.color=bi.color;v.offset=Y.offX+','+Y.offY;if(p){T=Cufon.CSS.color(p.color);v.type='double';v.color2=T.color;v.offset2=p.offX+','+p.offY}v.opacity=bi.opacity||(T&&T.opacity)||1;r.appendChild(v)}R+=N[D++]}var E=r.nextSibling,Z,ba;if(c.forceHitArea){if(!E){E=document.createElement('cvml:rect');E.stroked='f';E.className='cufon-vml-cover';Z=document.createElement('cvml:fill');Z.opacity=0;E.appendChild(Z);o.appendChild(E)}ba=E.style;ba.width=X;ba.height=n}else if(E)o.removeChild(E);x.width=Math.max(Math.ceil(l.convert(J*U)),0);if(bj){var O=d.computedYAdjust;if(O===undefined){var L=d.get('lineHeight');if(L=='normal')L='1em';else if(!isNaN(L))L+='em';d.computedYAdjust=O=0.5*(bc(g,L)-parseFloat(x.height))}if(O){x.marginTop=Math.ceil(O)+'px';x.marginBottom=O+'px'}}return m}})());
