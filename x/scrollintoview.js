/*
 * jQuery scrollintoview() plugin and :scrollable selector filter
 *
 * Version 1.8 (14 Jul 2011)
 * Requires jQuery 1.4 or newer
 *
 * Copyright (c) 2011 Robert Koritnik
 * Licensed under the terms of the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(f){var j={vertical:{x:false,y:true},horizontal:{x:true,y:false},both:{x:true,y:true},x:{x:true,y:false},y:{x:false,y:true}};var n={duration:"fast",direction:"both"};var k=/^(?:html)$/i;var o=function(c,a){a=a||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(c,null):c.currentStyle);var g=document.defaultView&&document.defaultView.getComputedStyle?true:false;var b={top:(parseFloat(g?a.borderTopWidth:f.css(c,"borderTopWidth"))||0),left:(parseFloat(g?a.borderLeftWidth:f.css(c,"borderLeftWidth"))||0),bottom:(parseFloat(g?a.borderBottomWidth:f.css(c,"borderBottomWidth"))||0),right:(parseFloat(g?a.borderRightWidth:f.css(c,"borderRightWidth"))||0)};return{top:b.top,left:b.left,bottom:b.bottom,right:b.right,vertical:b.top+b.bottom,horizontal:b.left+b.right}};var l=function(a){var g=f(window);var b=k.test(a[0].nodeName);return{border:b?{top:0,left:0,bottom:0,right:0}:o(a[0]),scroll:{top:(b?g:a).scrollTop(),left:(b?g:a).scrollLeft()},scrollbar:{right:b?0:a.innerWidth()-a[0].clientWidth,bottom:b?0:a.innerHeight()-a[0].clientHeight},rect:(function(){var c=a[0].getBoundingClientRect();return{top:b?0:c.top,left:b?0:c.left,bottom:b?a[0].clientHeight:c.bottom,right:b?a[0].clientWidth:c.right}})()}};f.fn.extend({scrollintoview:function(a){a=f.extend({},n,a);a.direction=j[typeof(a.direction)==="string"&&a.direction.toLowerCase()]||j.both;var g="";if(a.direction.x===true)g="horizontal";if(a.direction.y===true)g=g?"both":"vertical";var b=this.eq(0);var h=b.parent().closest(":scrollable("+g+")");if(h.length>0){h=h.eq(0);h.scrollintoview(f.extend({},arguments[0],{complete:null}));var d={e:l(b),s:l(h)};var e={top:d.e.rect.top-(d.s.rect.top+d.s.border.top),bottom:d.s.rect.bottom-d.s.border.bottom-d.s.scrollbar.bottom-d.e.rect.bottom,left:d.e.rect.left-(d.s.rect.left+d.s.border.left),right:d.s.rect.right-d.s.border.right-d.s.scrollbar.right-d.e.rect.right};var i={};if(a.direction.y===true){if(e.top<0){i.scrollTop=d.s.scroll.top+e.top}else if(e.top>0&&e.bottom<0){i.scrollTop=d.s.scroll.top+Math.min(e.top,-e.bottom)}}if(a.direction.x===true){if(e.left<0){i.scrollLeft=d.s.scroll.left+e.left}else if(e.left>0&&e.right<0){i.scrollLeft=d.s.scroll.left+Math.min(e.left,-e.right)}}if(!f.isEmptyObject(i)){if(k.test(h[0].nodeName)){h=f("html,body")}h.animate(i,a.duration).eq(0).queue(function(c){f.isFunction(a.complete)&&a.complete.call(h[0]);c()})}else{f.isFunction(a.complete)&&a.complete.call(h[0])}}else if(b.length>0){f.isFunction(a.complete)&&a.complete.call()}return this}});var m={auto:true,scroll:true,visible:false,hidden:false};f.extend(f.expr[":"],{scrollable:function(c,a,g,b){if(c==document){return false}var h=j[typeof(g[3])==="string"&&g[3].toLowerCase()]||j.both;var d=(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(c,null):c.currentStyle);var e={x:m[d.overflowX.toLowerCase()]||false,y:m[d.overflowY.toLowerCase()]||false,isRoot:k.test(c.nodeName)};if(!e.x&&!e.y&&!e.isRoot){return false}var i={height:{scroll:c.scrollHeight,client:c.clientHeight},width:{scroll:c.scrollWidth,client:c.clientWidth},scrollableX:function(){return(e.x||e.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(e.y||e.isRoot)&&this.height.scroll>this.height.client}};return h.y&&i.scrollableY()||h.x&&i.scrollableX()}})})(jQuery);
