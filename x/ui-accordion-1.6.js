(function($){$.widget("ui.accordion",{_2:function(){var b=this.options;if(b.navigation){var c=this.element.find("a").filter(b.navigationFilter);if(c.length){if(c.filter(b.header).length){b.active=c}else{b.active=c.parent().parent().prev();c.addClass("current")}}}this.element.addClass("ui-accordion ui-widget ui-helper-reset");var d=this.element.children().addClass("ui-accordion-group");var e=b.headers=d.find("> :first-child").addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){$(this).addClass('ui-state-hover')}).bind("mouseleave.accordion",function(){$(this).removeClass('ui-state-hover')});e.next().wrap("<div></div>").addClass("ui-accordion-content").parent().addClass("ui-accordion-content-wrap ui-helper-reset ui-widget-content ui-corner-bottom");var f=b.active=findActive(e,b.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");f.parent().addClass("selected");$("<span/>").addClass("ui-icon "+this.options.icons.header).prependTo(e);f.find(".ui-icon").toggleClass(this.options.icons.header).toggleClass(this.options.icons.headerSelected);if($.browser.msie){this.element.find('a').css('zoom','1')}this.resize();this.element.attr('role','tablist');var g=this;b.headers.attr('role','tab').bind('keydown',function(a){return g._1(a)}).next().attr('role','tabpanel');b.headers.not(b.active||"").attr('aria-expanded','false').attr("tabIndex","-1").next().hide();if(!b.active.length){b.headers.eq(0).attr('tabIndex','0')}else{b.active.attr('aria-expanded','true').attr("tabIndex","0")}if(!$.browser.safari)b.headers.find('a').attr('tabIndex','-1');if(b.event){this.element.bind((b.event)+".accordion",clickHandler)}},destroy:function(){this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind(".accordion");$.removeData(this.element[0],"accordion");var a=this.element.children().removeClass("ui-accordion-group selected");var b=this.options.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabindex");b.find("a").removeAttr("tabindex");b.children(".ui-icon").remove();b.next().children().removeClass("ui-accordion-content").each(function(){$(this).parent().replaceWith(this)})},_1:function(a){if(this.options.disabled||a.altKey||a.ctrlKey)return;var b=$.ui.keyCode;var c=this.options.headers.length;var d=this.options.headers.index(a.target);var e=false;switch(a.keyCode){case b.RIGHT:case b.DOWN:e=this.options.headers[(d+1)%c];break;case b.LEFT:case b.UP:e=this.options.headers[(d-1+c)%c];break;case b.SPACE:case b.ENTER:return clickHandler.call(this.element[0],{target:a.target})}if(e){$(a.target).attr('tabIndex','-1');$(e).attr('tabIndex','0');e.focus();return false}return true},resize:function(){var a=this.options,maxHeight;if(a.fillSpace){maxHeight=this.element.parent().height();a.headers.each(function(){maxHeight-=$(this).outerHeight()});var b=0;a.headers.next().each(function(){b=Math.max(b,$(this).innerHeight()-$(this).height())}).height(maxHeight-b).css('overflow','auto')}else if(a.autoHeight){maxHeight=0;a.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).outerHeight())}).height(maxHeight)}},activate:function(a){clickHandler.call(this.element[0],{target:findActive(this.options.headers,a)[0]})}});function scopeCallback(a,b){return function(){return a.apply(b,arguments)}};function completed(a){if(!$.data(this,"accordion")){return}var b=$.data(this,"accordion");var c=b.options;c.running=a?0:--c.running;if(c.running){return}if(c.clearStyle){c.toShow.add(c.toHide).css({height:"",overflow:""})}b._0('change',null,c.data)}function toggle(b,c,d,e,f){var g=$.data(this,"accordion").options;g.toShow=b;g.toHide=c;g.data=d;var h=scopeCallback(completed,this);$.data(this,"accordion")._0("changestart",null,g.data);g.running=c.size()===0?b.size():c.size();if(g.animated){var i={};if(!g.alwaysOpen&&e){i={toShow:$([]),toHide:c,complete:h,down:f,autoHeight:g.autoHeight||g.fillSpace}}else{i={toShow:b,toHide:c,complete:h,down:f,autoHeight:g.autoHeight||g.fillSpace}}if(!g.proxied){g.proxied=g.animated}if(!g.proxiedDuration){g.proxiedDuration=g.duration}g.animated=$.isFunction(g.proxied)?g.proxied(i):g.proxied;g.duration=$.isFunction(g.proxiedDuration)?g.proxiedDuration(i):g.proxiedDuration;var j=$.ui.accordion.animations,duration=g.duration,easing=g.animated;if(!j[easing]){j[easing]=function(a){this.slide(a,{easing:easing,duration:duration||700})}}j[easing](i)}else{if(!g.alwaysOpen&&e){b.toggle()}else{c.hide();b.show()}h(true)}c.prev().attr('aria-expanded','false').attr("tabIndex","-1");b.prev().attr('aria-expanded','true').attr("tabIndex","0").focus()}function clickHandler(a){var b=$.data(this,"accordion").options;if(b.disabled){return false}if(!a.target&&!b.alwaysOpen){b.active.parent().toggleClass(b.selectedClass);var c=b.active.next(),data={options:b,newHeader:$([]),oldHeader:b.active,newContent:$([]),oldContent:c},f=(b.active=$([]));toggle.call(this,f,c,data);return false}var d=$(a.target);d=$(d.parents(b.header)[0]||d);var e=d[0]==b.active[0];if(b.running||(b.alwaysOpen&&e)){return false}if(!d.is(b.header)){return}b.active.parent().toggleClass(b.selectedClass);b.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(b.icons.headerSelected).addClass(b.icons.header);if(!e){d.parent().addClass(b.selectedClass);d.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(b.icons.header).addClass(b.icons.headerSelected)}var f=d.next(),c=b.active.next(),data={options:b,newHeader:e&&!b.alwaysOpen?$([]):d,oldHeader:b.active,newContent:e&&!b.alwaysOpen?$([]):f,oldContent:c},down=b.headers.index(b.active[0])>b.headers.index(d[0]);b.active=e?$([]):d;toggle.call(this,f,c,data,e,down);return false};function findActive(a,b){return b?typeof b=="number"?a.filter(":eq("+b+")"):a.not(a.not(b)):b===false?$([]):a.filter(":eq(0)")}$.extend($.ui.accordion,{version:"1.6rc4",defaults:{autoHeight:true,alwaysOpen:true,animated:'slide',event:"click",header:"a",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()},running:0,selectedClass:"selected"},animations:{slide:function(c,d){c=$.extend({easing:"swing",duration:300},c,d);if(!c.toHide.size()){c.toShow.animate({height:"show"},c);return}var e=c.toHide.height(),showHeight=c.toShow.height(),difference=showHeight/e,overflow=c.toShow.css('overflow');c.toShow.css({height:0,overflow:'hidden'}).show();c.toHide.filter(":hidden").each(c.complete).end().filter(":visible").animate({height:"hide"},{step:function(a){var b=(e-a)*difference;if($.browser.msie||$.browser.opera){b=Math.ceil(b)}c.toShow.height(b)},duration:c.duration,easing:c.easing,complete:function(){if(!c.autoHeight){c.toShow.css("height","auto")}c.toShow.css({overflow:overflow});c.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1000:200})},easeslide:function(a){this.slide(a,{easing:"easeinout",duration:700})}}})})(jQuery);
