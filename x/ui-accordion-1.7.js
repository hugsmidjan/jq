(function(e){e.widget("ui.accordion",{_7:function(){var a=this.options,d=this;this.running=0;if(a.collapsible==e.ui.accordion.defaults.collapsible&&a.alwaysOpen!=e.ui.accordion.defaults.alwaysOpen){a.collapsible=!a.alwaysOpen}if(a.navigation){var b=this.element.find("a").filter(a.navigationFilter);if(b.length){if(b.filter(a.header).length){this.active=b}else{this.active=b.parent().parent().prev();b.addClass("ui-accordion-content-active")}}}this.element.addClass("ui-accordion ui-widget ui-helper-reset");if(this.element[0].nodeName=="UL"){this.element.children("li").addClass("ui-accordion-li-fix")}this.headers=this.element.find(a.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){e(this).addClass('ui-state-hover')}).bind("mouseleave.accordion",function(){e(this).removeClass('ui-state-hover')}).bind("focus.accordion",function(){e(this).addClass('ui-state-focus')}).bind("blur.accordion",function(){e(this).removeClass('ui-state-focus')});this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");this.active=this._1(this.active||a.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");this.active.next().addClass('ui-accordion-content-active');e("<span/>").addClass("ui-icon "+a.icons.header).prependTo(this.headers);this.active.find(".ui-icon").toggleClass(a.icons.header).toggleClass(a.icons.headerSelected);if(e.browser.msie){this.element.find('a').css('zoom','1')}this.resize();this.element.attr('role','tablist');this.headers.attr('role','tab').bind('keydown',function(c){return d._3(c)}).next().attr('role','tabpanel');this.headers.not(this.active||"").attr('aria-expanded','false').attr("tabIndex","-1").next().hide();if(!this.active.length){this.headers.eq(0).attr('tabIndex','0')}else{this.active.attr('aria-expanded','true').attr('tabIndex','0')}if(!e.browser.safari)this.headers.find('a').attr('tabIndex','-1');if(a.event){this.headers.bind((a.event)+".accordion",function(c){return d._0.call(d,c,this)})}},destroy:function(){var c=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind('.accordion').removeData('accordion');this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabindex");this.headers.find("a").removeAttr("tabindex");this.headers.children(".ui-icon").remove();var a=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active");if(c.autoHeight||c.fillHeight){a.css("height","")}},_4:function(c,a){if(c=='alwaysOpen'){c='collapsible';a=!a}e.widget.prototype._4.apply(this,arguments)},_3:function(c){var a=this.options,d=e.ui.keyCode;if(a.disabled||c.altKey||c.ctrlKey)return;var b=this.headers.length;var i=this.headers.index(c.target);var g=false;switch(c.keyCode){case d.RIGHT:case d.DOWN:g=this.headers[(i+1)%b];break;case d.LEFT:case d.UP:g=this.headers[(i-1+b)%b];break;case d.SPACE:case d.ENTER:return this._0({target:c.target},c.target)}if(g){e(c.target).attr('tabIndex','-1');e(g).attr('tabIndex','0');g.focus();return false}return true},resize:function(){var c=this.options,a;if(c.fillSpace){if(e.browser.msie){var d=this.element.parent().css('overflow');this.element.parent().css('overflow','hidden')}a=this.element.parent().height();if(e.browser.msie){this.element.parent().css('overflow',d)}this.headers.each(function(){a-=e(this).outerHeight()});var b=0;this.headers.next().each(function(){b=Math.max(b,e(this).innerHeight()-e(this).height())}).height(Math.max(0,a-b)).css('overflow','auto')}else if(c.autoHeight){a=0;this.headers.next().each(function(){a=Math.max(a,e(this).outerHeight())}).height(a)}},activate:function(c){var a=this._1(c)[0];this._0({target:a},a)},_1:function(c){return c?typeof c=="number"?this.headers.filter(":eq("+c+")"):this.headers.not(this.headers.not(c)):c===false?e([]):this.headers.filter(":eq(0)")},_0:function(c,a){var d=this.options;if(d.disabled)return false;if(!c.target&&d.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);this.active.next().addClass('ui-accordion-content-active');var b=this.active.next(),i={options:d,newHeader:e([]),oldHeader:d.active,newContent:e([]),oldContent:b},g=(this.active=e([]));this._2(g,b,i);return false}var f=e(c.currentTarget||a);var h=f[0]==this.active[0];if(this.running||(!d.collapsible&&h)){return false}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);this.active.next().addClass('ui-accordion-content-active');if(!h){f.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected);f.next().addClass('ui-accordion-content-active')}var g=f.next(),b=this.active.next(),i={options:d,newHeader:h&&d.collapsible?e([]):f,oldHeader:this.active,newContent:h&&d.collapsible?e([]):g.find('> *'),oldContent:b.find('> *')},k=this.headers.index(this.active[0])>this.headers.index(f[0]);this.active=h?e([]):f;this._2(g,b,i,h,k);return false},_2:function(a,d,b,i,g){var f=this.options,h=this;this.toShow=a;this.toHide=d;this.data=b;var k=function(){if(!h)return;return h._5.apply(h,arguments)};this._6("changestart",null,this.data);this.running=d.size()===0?a.size():d.size();if(f.animated){var l={};if(f.collapsible&&i){l={toShow:e([]),toHide:d,complete:k,down:g,autoHeight:f.autoHeight||f.fillSpace}}else{l={toShow:a,toHide:d,complete:k,down:g,autoHeight:f.autoHeight||f.fillSpace}}if(!f.proxied){f.proxied=f.animated}if(!f.proxiedDuration){f.proxiedDuration=f.duration}f.animated=e.isFunction(f.proxied)?f.proxied(l):f.proxied;f.duration=e.isFunction(f.proxiedDuration)?f.proxiedDuration(l):f.proxiedDuration;var m=e.ui.accordion.animations,j=f.duration,n=f.animated;if(!m[n]){m[n]=function(c){this.slide(c,{easing:n,duration:j||700})}}m[n](l)}else{if(f.collapsible&&i){a.toggle()}else{d.hide();a.show()}k(true)}d.prev().attr('aria-expanded','false').attr("tabIndex","-1").blur();a.prev().attr('aria-expanded','true').attr("tabIndex","0").focus()},_5:function(c){var a=this.options;this.running=c?0:--this.running;if(this.running)return;if(a.clearStyle){this.toShow.add(this.toHide).css({height:"",overflow:""})}this._6('change',null,this.data)}});e.extend(e.ui.accordion,{version:"1.7.2",defaults:{active:null,alwaysOpen:true,animated:'slide',autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(b,i){b=e.extend({easing:"swing",duration:300},b,i);if(!b.toHide.size()){b.toShow.animate({height:"show"},b);return}if(!b.toShow.size()){b.toHide.animate({height:"hide"},b);return}var g=b.toShow.css('overflow'),f,h={},k={},l=["height","paddingTop","paddingBottom"],m;var j=b.toShow;m=j[0].style.width;j.width(parseInt(j.parent().width(),10)-parseInt(j.css("paddingLeft"),10)-parseInt(j.css("paddingRight"),10)-(parseInt(j.css("borderLeftWidth"),10)||0)-(parseInt(j.css("borderRightWidth"),10)||0));e.each(l,function(c,a){k[a]='hide';var d=(''+e.css(b.toShow[0],a)).match(/^([\d+-.]+)(.*)$/);h[a]={value:d[1],unit:d[2]||'px'}});b.toShow.css({height:0,overflow:'hidden'}).show();b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(k,{step:function(c,a){if(a.prop=='height'){f=(a.now-a.start)/(a.end-a.start)}b.toShow[0].style[a.prop]=(f*h[a.prop].value)+h[a.prop].unit},duration:b.duration,easing:b.easing,complete:function(){if(!b.autoHeight){b.toShow.css("height","")}b.toShow.css("width",m);b.toShow.css({overflow:g});b.complete()}})},bounceslide:function(c){this.slide(c,{easing:c.down?"easeOutBounce":"swing",duration:c.down?1000:200})},easeslide:function(c){this.slide(c,{easing:"easeinout",duration:700})}}})})(jQuery);