(function(f){f.widget("ui.autocomplete",{options:{minLength:1,delay:300},_3:function(){var c=this,g=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(a){var b=f.ui.keyCode;switch(a.keyCode){case b.PAGE_UP:c._1("previousPage",a);break;case b.PAGE_DOWN:c._1("nextPage",a);break;case b.UP:c._1("previous",a);a.preventDefault();break;case b.DOWN:c._1("next",a);a.preventDefault();break;case b.ENTER:if(c.menu.active){a.preventDefault()}case b.TAB:if(!c.menu.active){return}c.menu.select(a);break;case b.ESCAPE:c.element.val(c.term);c.close(a);break;case b.LEFT:case b.RIGHT:case b.SHIFT:case b.CONTROL:case b.ALT:break;default:clearTimeout(c.searching);c.searching=setTimeout(function(){c.search(null,a)},c.options.delay);break}}).bind("focus.autocomplete",function(){c.selectedItem=null;c.previous=c.element.val()}).bind("blur.autocomplete",function(a){clearTimeout(c.searching);c.closing=setTimeout(function(){c.close(a);c._4(a)},150)});this._2();this.response=function(){return c._5.apply(c,arguments)};this.menu=f("<ul></ul>").addClass("ui-autocomplete").appendTo("body",g).menu({focus:function(a,b){var d=b.item.data("item.autocomplete");if(false!==c._0("focus",null,{item:d})){if(/^key/.test(a.originalEvent.type)){c.element.val(d.value)}}},selected:function(a,b){var d=b.item.data("item.autocomplete");if(false!==c._0("select",a,{item:d})){c.element.val(d.value)}c.close(a);var e=c.previous;if(c.element[0]!==g.activeElement){c.element.focus();c.previous=e}c.selectedItem=d},blur:function(a,b){if(c.menu.element.is(":visible")){c.element.val(c.term)}}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");if(f.fn.bgiframe){this.menu.element.bgiframe()}},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();f.Widget.prototype.destroy.call(this)},_6:function(a){f.Widget.prototype._6.apply(this,arguments);if(a==="source"){this._2()}},_2:function(){var d,e;if(f.isArray(this.options.source)){d=this.options.source;this.source=function(a,b){b(f.ui.autocomplete.filter(d,a.term))}}else if(typeof this.options.source==="string"){e=this.options.source;this.source=function(a,b){f.getJSON(e,a,b)}}else{this.source=this.options.source}},search:function(a,b){a=a!=null?a:this.element.val();if(a.length<this.options.minLength){return this.close(b)}clearTimeout(this.closing);if(this._0("search")===false){return}return this._7(a)},_7:function(a){this.term=this.element.addClass("ui-autocomplete-loading").val();this.source({term:a},this.response)},_5:function(a){if(a.length){a=this._8(a);this._9(a);this._0("open")}else{this.close()}this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._0("close",a);this.menu.element.hide();this.menu.deactivate()}},_4:function(a){if(this.previous!==this.element.val()){this._0("change",a,{item:this.selectedItem})}},_8:function(b){if(b.length&&b[0].label&&b[0].value){return b}return f.map(b,function(a){if(typeof a==="string"){return{label:a,value:a}}return f.extend({label:a.label||a.value,value:a.value||a.label},a)})},_9:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1),d,e;this._a(b,a);this.menu.deactivate();this.menu.refresh();this.menu.element.show().position({my:"left top",at:"left bottom",of:this.element,collision:"none"});d=b.width("").width();e=this.element.width();b.width(Math.max(d,e))},_a:function(d,e){var c=this;f.each(e,function(a,b){c._b(d,b)})},_b:function(a,b){return f("<li></li>").data("item.autocomplete",b).append("<a>"+b.label+"</a>").appendTo(a)},_1:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term);this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element}});f.extend(f.ui.autocomplete,{escapeRegex:function(a){return a.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},filter:function(b,d){var e=new RegExp(f.ui.autocomplete.escapeRegex(d),"i");return f.grep(b,function(a){return e.test(a.label||a.value||a)})}})}(jQuery));(function(g){g.widget("ui.menu",{_3:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(a){if(!g(a.target).closest(".ui-menu-item a").length){return}a.preventDefault();b.select(a)});this.refresh()},refresh:function(){var b=this;var d=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");d.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(a){b.activate(a,g(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var d=b.offset().top-this.element.offset().top,e=this.element.attr("scrollTop"),c=this.element.height();if(d<0){this.element.attr("scrollTop",e+d)}else if(d>c){this.element.attr("scrollTop",e+d-c+b.height())}}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._0("focus",a,{item:b})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._0("blur");this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(a,b,d){if(!this.active){this.activate(d,this.element.children(b));return}var e=this.active[a+"All"](".ui-menu-item").eq(0);if(e.length){this.activate(d,e)}else{this.activate(d,this.element.children(b))}},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(":first"));return}var d=this.active.offset().top,e=this.element.height(),c=this.element.children("li").filter(function(){var a=g(this).offset().top-d-e+g(this).height();return a<10&&a>-10});if(!c.length){c=this.element.children(":last")}this.activate(b,c)}else{this.activate(b,this.element.children(!this.active||this.last()?":first":":last"))}},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(":last"));return}var d=this.active.offset().top,e=this.element.height();result=this.element.children("li").filter(function(){var a=g(this).offset().top-d+e-g(this).height();return a<10&&a>-10});if(!result.length){result=this.element.children(":first")}this.activate(b,result)}else{this.activate(b,this.element.children(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){this._0("selected",a,{item:this.active})}})}(jQuery));