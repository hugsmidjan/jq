jQuery.fn.goo_blockPopper=function(){return this;};var blockPopper={v:1,linkSelector:"a.popper",anchorClass:"stream",closeOnBlur:true,is:{closeLnkText:"Loka"},en:{closeLnkText:"Close"},_anchorPattrn:/^.*#(.+)$/,_currentLink:null,_autoCloser:function(B){var A=this._currentLink;if(A&&DOM.$(A._blockElmId)){Event.fire(A,"click");}else{Event.remove(document.body,"click",this._autoCloser,this);}return false;},close:function(A){if(!A){this._autoCloser();}if((A=DOM.$(A))&&A._isOpen){Event.fire(A._openerLinks[0],"click");}return false;},_toggle:function(C){C&&C.stopPropagation();var A=blockPopper;var D=DOM.$(this._blockElmId);if(D){DOM.toggleClass(D,"popperblock-open","popperblock-closed");if(D._isOpen){DOM.setHash(".");DOM.setFocus(this);DOM.removeNode(D._closeLnk);if(A.closeOnBlur){Event.remove(document.body,"click",A._autoCloser,A);A._currentLink=null;}}else{DOM.setHash(this._blockElmId);DOM.setFocus(D._focusElm);DOM.appendChild(D._closeLnk,D);if(A.closeOnBlur){if(A._currentLink){A._autoCloser(C);}A._currentLink=this;Event.add(document.body,"click",A._autoCloser,A);}}D._isOpen=!D._isOpen;var B=D._openerLinks.length;while(B--){DOM.toggleClass(D._openerLinks[B],"popper-open");}}return false;},init:function(D){D=(!D)?DOM.get(this.linkSelector):(D.join)?D:[D];for(var C=0,A;(A=D[C]);C++){var B=A.href.replace(this._anchorPattrn,"$1"),F=DOM.$(B);if(F){A._blockElmId=B;(F._openerLinks||(F._openerLinks=[])).push(A);Event.add(A,"click",this._toggle);if(!F.done){F._focusElm=DOM.makeElement('<a href="#'+B+'" class="'+this.anchorClass+' blockPopper_anchorElm">#</a>');DOM.prependChild(F._focusElm,F);var E=DOM.getLang(F)||"en";F._closeLnk=DOM.makeElement('<a href="#" class="closebutton">'+this[E].closeLnkText+"</a>");Event.add(F._closeLnk,"click",function(G){return Event.fire(this.parentNode._openerLinks[0],"click");});DOM.addClass(F,"popperblock popperblock-closed");F._isOpen=false;if(this.closeOnBlur){Event.add(F,"click",function(G){G.stopPropagation();return ;});}F.done=true;}}}}};
