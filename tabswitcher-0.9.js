(function(b){var l=function(i){return(/(#.+?)$/.test(i))?RegExp.$1:''},m=function(i,c,d){var a=b.fn.tabSwitcher.config,e=b(l(c.attr('href'))),f=c.parent();c.trigger('switchto.tabSwitcher');i.find('.'+a.current).removeClass(a.current);b(i.data('tabpanes')).hide();e.show();if(d!==false)e.find('input, a.stream').eq(0).trigger('focus');if(!f.is('li'))f=c;f.addClass(a.current)};b.fn.tabSwitcher=function(g){this.each(function(){var d=b(this),a=b.fn.tabSwitcher.config,e=d.find(a.linkselector),f=!d.hasClass(a.active),h=[];if(f){for(var j,k=0;k<e.length;k++){j=l(e[k].href);j&&h.push(j)}if(h.length){var n=h.join(', ');d.data('tabpanes',n);b(n).hide().prepend(a.focuslink)}}if(g==null){g=e.index(d.find('.'+a.current+' a'));g=(g==-1)?0:g}if(g>-1&&!(f&&!h.length)){m(d,e.eq(Math.min(e.length,g||0)),!f)}if(f&&h.length){d.find('a[href$='+h.join('],a[href$=')+']').bind('click',function(i){var c=b(this);if(c.is('a')){m(c.parents('.'+a.active),c)}return false}).end().addClass(a.active)}});return this};b.fn.tabSwitcher.config={linkselector:'li a[href^=#]',focuslink:'<a href="#" class="stream"></a>',active:'tabs-active',current:'current'}})(jQuery);
