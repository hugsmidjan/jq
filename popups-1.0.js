// encoding: utf-8
// $.fn.popUps 1.0  -- (c) 2008 Hugsmiðjan ehf.
(function(c,j,k,l,m){m=c.fn.popUps=function(a){a=a||{};a.titleSuffix=c.extend({},m.titleSuffix,a.titleSuffix||{});var e=[];if(a.width){e.push('width='+a.width)}if(a.height){e.push('height='+a.height)}c.each(['location','menubar','scrollbars','status','toolbar'],function(f,b){if(a[b]!==l){e.push(b+(a[b]?'=yes':'=no'))}else if(a.minimal){e.push(b+'=no')}});e.length&&e.push('resizable='+((a.resizable===l||a.resizable)?'yes':'no'));a._0=e.join(',');return this.each(function(f,b){var d=c(b);d.data(g,a);if(a.markTitle&&b.tagName!=='FORM'){var h=(c.lang&&c.lang(b))||c('html').attr('lang')||'en';b.title=(b.title||d.text()||b.value)+' '+(a.titleSuffix[h]||a.titleSuffix.en)}switch(b.tagName){case'FORM':d.bind('submit',i);break;case'INPUT':case'BUTTON':d.bind('click',o);break;default:d.bind('click',i);break}})};c.extend(c.fn.popUps,{v:1.0,titleSuffix:{is:'(opnast í nýjum glugga)',en:'(opens in a new window)'}});var g='pop'+(new Date()).getTime(),i=function(f){if(f.isDefaultPrevented&&!f.isDefaultPrevented()){var b=this,d=c(b).data(g),h=b.target||d.target||j+k;if(d.url||h.indexOf(j)!==0){var a,e=d.window||window,n=d.url||'about:'+k;try{a=e.open(n,h,d._0)}catch(ex){a=e.open(n,null,d._0);a.name=h}setTimeout(function(){c(b).trigger('popupsopen',[a,d])},0);setTimeout(function(){a.focus()},150)}if(!b.target){b.target=h;setTimeout(function(){b.target=''},150)}}},o=function(){var f=c(this.form),b=f.data(g);f.data(g,c(this).data(g)).bind('submit',i);setTimeout(function(){if(b){f.data(g,b)}else{f.removeData(g).unbind('submit',i)}},150)}})(jQuery,'_','blank');
