// encoding: utf-8
// $.fn.labelizor 1.0  -- (c) 2009 Hugsmi√∞jan ehf.
(function(d){d.fn.labelizor=function(a,n){var l=a&&a.charAt?a:'';a=d.extend({lRe:/(\*|:[\W\S]*$)/g,useLabel:true,blurClass:n||'labelized',hideClass:l||'stream'},!l&&a);var j=a.hideClass,k=a.blurClass,f=a.labelFilter,g=a.useLabel;return this.each(function(){var e=this,c=d(e);if(!c.data('labelizor')){var b=c.attr('placeholder');c.removeAttr('placeholder').data('labelizor',true);if(b||((e.id||e.title)&&c.is(':text, :password, textarea'))){b=a.labelText||b;var h=e.title,i=!g&&b&&!j?d([]):d(c.parents('form:first, :last').eq(0).find('label[for="'+e.id+'"]:first')),m=function(o){if(c.val()==b){c.val('').removeClass(k)}};if(!b){b=!g||!f?(a.preferTitle&&h)||(g&&i.text())||h:d.isFunction(f)?f(i,c):i.find(f).text();b=d.trim(b.replace(a.lRe||'',a.lPlace||''))}if(j&&(!a.condHide||(g&&(a.preferTitle&&b!=h)&&!a.labelText))){i.addClass(j)}c.attr('title',h||b).bind('focus',m).bind('blur',function(o){if(!c.val()){c.val(b).addClass(k)}});if(b&&(!e.value||e.value==b)){c.val(b).addClass(k)}d(e.form).bind('submit',m)}}})}})(jQuery);
