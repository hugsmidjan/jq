// jQuery extra utilities 1.2  -- (c) 2010-2013 HugsmiÃ°jan ehf.
!function(t,e,n){var r=window,i=e,o=i.location,s={};RegExp.escape=RegExp.escape||function(t){return t.replace(/([\\\^\$*+\[\]?{}.=!:(|)])/g,"\\$1")},t.extend(t.expr[":"],{is:function(e,n,r){return t(e).is(r[3])},childof:function(e,n,r){return t(e.parentNode).is(r[3])},descof:function(e,n,r){for(;(e=e.parentNode)&&e!==i;)if(t(e).is(r[3]))return!0;return!1},target:function(t,e){return t.id&&(e=o.hash)&&e==="#"+t.id}});var l,u,a,c=function(){var e=u.css("fontSize");e!==a&&(a=e,t(window).trigger("fontresize"))};t.event.special.fontresize={setup:function(){(this===r||this===i.body)&&(u=t("body"),a=u.css("fontSize"),l=setInterval(c,500))},teardown:function(){(this===r||this===i.body)&&clearTimeout(l)}};var f=function(e,n,r,i){var o=[],s=(i?"previous":"next")+"Sibling";return e.each(function(){for(var e,i=this[s];i;i=i[s])if(e=1===i.nodeType,r||e){if(e&&!t(i).not(n).length)break;o.push(i)}}),e.pushStack(o)};t.fn.extend({nextUntil:function(t,e){return f(this,t,e)},prevUntil:function(t,e){return f(this,t,e,1)}}),t.fn.unhide=function(){return this.css("display","")},t.fn.zap=function(){return this.each(function(){this.parentNode&&t(this.childNodes).insertBefore(this)}).remove()},t.fn.splitN=function(t,e){for(var n=0,r=this.length,i=[].slice.call(arguments,2);r>n;)e.apply(this.slice(n,n+t),i),n+=t;return this},t.fn.liveVal=function(t){return this.each(function(e,n){var r=t.length-n.value.length,i=n.selectionStart+r,o=n.selectionEnd+r;n.value=t,n.setSelectionRange&&n.setSelectionRange(i,o)})},t.fn.if_=function(e){return t.isFunction(e)&&(e=e.call(this)),this.if_CondMet=!!e,this.pushStack(e?this:[])},t.fn.else_=function(t){var e=this.end();return e.if_CondMet?e.pushStack([]):e.if_(arguments.length?t:1)},t.fn.extend({"null":function(){return this},fin:function(){return t(this)},shuffle:function(){for(var t=this,e=t.length;e;){var n=Math.floor(e*Math.random(e--)),r=t[e];t[e]=t[n],t[n]=r}return t},imgUnsuppress:function(e){return t.imgUnsuppress(this,e),this},pause:function(e,n){return!n&&t.fn.delay?this.delay(e):this.animate({smu:0},e||0===e?e:800,n)},log:function(){return r.console&&(arguments.length&&console.log.call(console,arguments),console.log(this)),this},reverse:[].reverse,deepest:function(){return this.map(function(){for(var t=this;t.firstChild;)t=t.firstChild;return t})},hoverClass:function(e){return this.hover(function(){t(this).addClass(e)},function(){t(this).removeClass(e)})},run:function(t,e,r){var i=t.apply(this,e||[]);return r||i===n?this:i},setFocus:function(){return t.setFocus(this[0]),this},scrollPos:function(t,e){return null==t&&null==e?{left:this.scrollLeft(),top:this.scrollTop()}:(t&&(t.top||t.left)&&(e=t.top,t=t.left),null!=t&&this.scrollLeft(t),null!=e&&this.scrollTop(e),this)},toggleClasses:function(e,n,r){return this.each(function(){var i=t(this),o=arguments.length>2?r:i.hasClass(e);i.removeClass(o?e:n).addClass(o?n:e)})},whenImageReady:function(e,n){var r=this;return e&&r.one("load.j2x5u",e),!n&&setTimeout(function(){r.each(function(e,n){n.complete&&0!==n.naturalWidth&&t(n).trigger("load.j2x5u")})},0),r}}),t.beget=function(e,n){var r=t.beget.F;return r.prototype=e,n?t.extend(new r,n):new r},t.beget.F=function(){},t.lang=function(e,n){"boolean"==typeof e&&(n=e,e=null);var r=t(e||"html").closest("[lang]").attr("lang")||"";return r?(n?r.substr(0,2):r).toLowerCase():null},t.fn.lang=function(e){return t.lang(this[0],e)},t.focusHere=function(n,i){if(n){n=t(n),null==n.attr("tabindex")&&n.attr("tabindex",-1);var o=t(e),s=o.scrollTop();n[0].focus();var l=o.scrollTop()-s;if(l){var u=l+n[0].getBoundingClientRect().top,a=r.innerHeight||e.documentElement.clientHeight;if(l>0&&a-50>u)o.scrollTop(s);else{var c=i&&i.offset||t.focusOffset();c=t.isFunction(c)?c(n):c||0,o.scrollTop(t(n).offset().top-c)}}}},t.fn.focusHere=function(e){return t.focusHere(this[0],e),this},t.focusOffset=function(){return 30},t.fixSkiplinks=function(n){var r="click.fixSkipLinks",i=e;t(i).off(r).on(r,function(e){var r,o=e.target.href;if(o&&!e.isDefaultPrevented()&&(r=(o=o.split("#"))[1])){var s=t("#"+r);if(s[0]&&o[0]===i.location.href.split("#")[0]){e.preventDefault(),null==s.attr("tabindex")&&s.attr("tabindex",-1),i.location.href="#"+r;var l=n&&n.offset||t.scrollOffset();l=t.isFunction(l)?l(s):l,l&&t(i).scrollTop(t(i).scrollTop()-l),s[0].focus()}}})},t.scrollOffset=function(){return 0},t.aquireId=function(e,r){if("string"==typeof e&&(r=e,e=n),e=t(e||[])[0],!e||!e.id){var i=r||t.aquireId._guidPrefix+t.aquireId._guid++;if(r)for(var o=r.match(/\d+$/),s=o?parseInt(o[0],10):1;t("#"+i)[0];)o&&(r=r.replace(/\d+$/,""),o=n),i=r+s++;if(!e)return i;e.id||(e.id=i)}return e.id},t.aquireId._guidPrefix="tmp_"+(new Date).getTime()+"_",t.aquireId._guid=1,t.fn.aquireId=function(e){return this.each(function(){t.aquireId(this,e)}).attr("id")},t.throttleFn=function(t,e,n){"number"==typeof e&&(n=e,e=!1),n=n||50;var r,i,o,s=0,l=function(){i=arguments,o=this,s||(e?s++:t.apply(o,i),r=setTimeout(l.finish,n)),s++};return l.finish=function(){r&&clearTimeout(r),s>1&&t.apply(o,i),s=0},l},t.debounceFn=function(t,e,n){"number"==typeof e&&(n=e,e=!1),n=n||50;var r,i=function(){var o=arguments,s=!r&&e,l=this;i.cancel(),r=setTimeout(function(){!s&&t.apply(l,o),r=0},n),s&&t.apply(l,o)};return i.cancel=function(){clearTimeout(r),r=0},i},t.extend({namespace:function(e,n,i,o){var s,l=r,u=0;for("string"!=typeof e&&(l=e,e=n,n=i,i=o),e=e.split(i||".");s=e[u++];)l=l[s]||(l[s]={});return n?t.extend(l,n):l},reloadPage:function(t){if(!t||t===o.href){t=t||o.href;var e=/\?/.test(t)?/[&?](?:#|$)/.test(t)?"":"&":"?";t=t.replace(/[&?]?(#.*)?$/,e+"$1")}o.replace(t)},winWidth:function(){var t=e.documentElement;return r.innerWidth||t&&t.clientWidth||i.body.clientWidth},cssSupport:function(e,r,i,o,s,l){return function(u){if(e||(e=t("<div/>")[0],r="Khtml Ms O Moz Webkit".split(" "),o={}),s=u in o?o[u]:u in e.style||n,s===n)for(l=u.replace(/^[a-z]/,function(t){return t.toUpperCase()}),i=r.length;i--;)if(r[i]+l in e.style){s=!0;break}return s=o[u]=s||!1}}(),getResultBody:function(e,n){var r=t.getResultBody;return n=n||{},t("<div/>").append(t((t.parseHTML||t)(e||"")).not(n.stripFlat||r.stripFlat||"script,title,meta,link,style").find(n.stripDeep||r.stripDeep||"script,style").remove().end())},escResultHtml:function(e,n){n=n||{};var r=n.tagName||"del",i=" "+(n.tagAttrs||'tagName="'),o=String(e).replace(/<\!DOCTYPE[^>]*>/i,"").replace(/(<\/?)(html|head|body|title|meta|style|link|script)([\s\>])/gi,function(t,e,o,s){return o=o.toLowerCase(),n["keep"+o]?e+o+s:e+r+("<"===e?i+o+'"':"")+s});return o=n.keepimgSrc?o:t.imgSuppress(o,n.srcAttr)},imgSuppress:function(t,e){return t.replace(/(<img[^>]*? )src=/gi,"$1"+(e||"data-srcAttr")+"=")},imgUnsuppress:function(e,n){return n=n||"data-srcAttr","string"==typeof e?e=e.replace(new RegExp("(<img[^>]*? )"+n+"=","gi"),"$1src="):(e=t(e),e.find("img").add(e.filter("img")).filter("["+n+"]").each(function(){var e=t(this);e.attr("src",e.attr(n)).removeAttr(n)})),e},scrollPos:function(e,n){return t(i).scrollPos(e,n)},setFrag:function(e,n){e=(e||"").replace(/^#/,"");var r=e&&i.getElementById(n?decodeURIComponent(e):e),s=t.scrollPos();r&&(r.id=""),o.href="#"+(n?e:t.encodeFrag(e)),t.scrollPos(s),r&&(r.id=e)},encodeFrag:function(t){return encodeURI(t).replace(/#/g,"%23").replace(/%7C/g,"|")},getFrag:function(t,e){var n=(t||o.href).split("#")[1]||"";return e?n:decodeURIComponent(n)},setFocus:function(e){if(e){e=t(e);var n=",A,INPUT,SELECT,TEXTAREA,BUTTON,OBJECT,AREA,",r=n.indexOf(","+e[0].tagName+",")>-1&&e.is(":visible")&&e[0];if(!r&&e.is(":visible")&&e.find("*").each(function(e,i){return n.indexOf(","+i.tagName+",")>-1&&t(i).is(":visible")?(r=i,!1):void 0}),r){var o=t(i),s=o.scrollTop();if(t(r)[0].focus(),o.scrollTop()!==s){var l=t(e).offset().top-30;10>l&&(l=0),o.scrollTop(l)}}}},toInt:function(t,e){return parseInt(t,e||10)},parseParams:function(r){r=t.trim(r!==n?r:e.location.search).replace(/^[?&]|&$/g,"");var i={};if(r)for(var o=r.replace(/\+/g," ").split("&"),s=decodeURIComponent,l=0,u=o.length;u>l;l++){var a=o[l].split("="),c=s(a[0]);(i[c]=i[c]||[]).push(s(a[1]||""))}return i},cropText:function(e,n,r){if(r=r||" ...",e=t.trim(e).replace(/\s+/g," "),n&&e.length>n+r.length){var i=t.cropText.re||(t.cropText.re={}),o=n+"~~"+r,s=i[o]||(i[o]=new RegExp("^(.{0,"+n+"})\\s.+$")),l=e.replace(s,"$1");return l+(l.length<e.length?r:"")}return e},inject:function(t,e){var n,r=[],i=e.length;if(t.indexOf("%{")>-1){if(isNaN(i))for(n in e)r.push(n);else for(;i--;)r.push(i);for(n=r.length;n--;){var o=r[n],l=s[o]||(s[o]=new RegExp(RegExp.escape("%{"+o+"}"),"g"));t=t.replace(l,e[o])}}return t}}),t(window).on("keydown",function(t){if(window.Req&&!window.EPLICA){var n=Req.baseUrl.replace(/jq\/$/,"");if(t.ctrlKey&&t.altKey&&76==t.which){var r=e.body.appendChild(e.createElement("script"));r.src=n+"/bookmarklets/loginpop/loginpop.js"}}}),t.setHash=t.setFrag,t.scroll=t.scrollPos,t.fn.scroll=t.fn.scrollPos}(jQuery,document);
