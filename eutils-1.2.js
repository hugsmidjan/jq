// jQuery extra utilities 1.2  -- (c) 2010-2014 Hugsmi√∞jan ehf.
(function(d,m,k){var n=window,j=m,l=j.location,r={};RegExp.escape=RegExp.escape||function(a){return a.replace(/([\\\^\$*+\[\]?{}.=!:(|)])/g,'\\$1')};d.extend(d.expr[':'],{is:function(a,b,c){return d(a).is(c[3])},childof:function(a,b,c){return d(a.parentNode).is(c[3])},descof:function(a,b,c){while((a=a.parentNode)&&a!==j){if(d(a).is(c[3])){return true}}return false},target:function(a,b){return(a.id&&(b=l.hash)&&b==='#'+a.id)}});var s,p,q,u=function(){var a=p.css('fontSize');if(a!==q){q=a;d(window).trigger('fontresize')}};d.event.special.fontresize={setup:function(){if(this===n||this===j.body){p=d('body');q=p.css('fontSize');s=setInterval(u,500)}},teardown:function(){if(this===n||this===j.body){clearTimeout(s)}}};var t=function(c,f,e,g){var h=[],i=(g?'previous':'next')+'Sibling';c.each(function(){for(var a=this[i],b;a;a=a[i]){b=(a.nodeType===1);if(e||b){if(b&&!d(a).not(f).length){break}h.push(a)}}});return c.pushStack(h)};d.fn.extend({nextUntil:function(a,b){return t(this,a,b)},prevUntil:function(a,b){return t(this,a,b,1)}});d.fn.unhide=function(){return this.css('display','')};d.fn.zap=function(){return this.each(function(){this.parentNode&&d(this.childNodes).insertBefore(this)}).remove()};d.fn.splitN=function(a,b){var c=0,f=this.length,e=[].slice.call(arguments,2);while(c<f){b.apply(this.slice(c,c+a),e);c+=a}return this};d.fn.liveVal=function(e){return this.each(function(a,b){var c=b.selectionStart;var f=b.selectionEnd;b.value=e;b.setSelectionRange&&b.setSelectionRange(c,f)})};d.fn.if_=function(a){if(d.isFunction(a)){a=a.call(this)}this.if_CondMet=!!a;return this.pushStack(a?this:[])};d.fn.else_=function(a){var b=this.end();return b.if_CondMet?b.pushStack([]):b.if_(arguments.length?a:1)};d.fn.extend({'null':function(){return this},fin:function(){return d(this)},shuffle:function(){var a=this,b=a.length;while(b){var c=Math.floor(b*Math.random(b--)),f=a[b];a[b]=a[c];a[c]=f}return a},imgUnsuppress:function(a){d.imgUnsuppress(this,a);return this},pause:function(a,b){return!b&&d.fn.delay?this.delay(a):this.animate({smu:0},(a||a===0)?a:800,b)},log:function(){if(n.console){arguments.length&&console.log.call(console,arguments);console.log(this)}return this},reverse:[].reverse,deepest:function(){return this.map(function(){var a=this;while(a.firstChild){a=a.firstChild}return a})},hoverClass:function(a){return this.hover(function(){d(this).addClass(a)},function(){d(this).removeClass(a)})},run:function(a,b,c){var f=a.apply(this,b||[]);return(c||f===k)?this:f},setFocus:function(){d.setFocus(this[0]);return this},scrollPos:function(a,b){if(a==null&&b==null){return{left:this.scrollLeft(),top:this.scrollTop()}}if(a&&(a.top||a.left)){b=a.top;a=a.left}a!=null&&this.scrollLeft(a);b!=null&&this.scrollTop(b);return this},toggleClasses:function(c,f,e){return this.each(function(){var a=d(this),b=arguments.length>2?e:a.hasClass(c);a.removeClass(b?c:f).addClass(b?f:c)})},whenImageReady:function(c,f){var e=this;c&&e.one('load.j2x5u',c);!f&&setTimeout(function(){e.each(function(a,b){if(b.complete&&b.naturalWidth!==0){d(b).trigger('load.j2x5u')}})},0);return e}});d.beget=function(a,b){var c=d.beget.F;c.prototype=a;return b?d.extend(new c(),b):new c()};d.beget.F=function(){};d.lang=function(a,b){if(typeof a==='boolean'){b=a;a=null}var c=d(a||'html').closest('[lang]').attr('lang')||'';return c?(b?c.substr(0,2):c).toLowerCase():null};d.fn.lang=function(a){return d.lang(this[0],a)};d.focusHere=function(a,b){if(a){a=d(a);if(a.prop('tabindex')==null){a.prop('tabindex',-1)}var c=d(m),f=c.scrollTop();a[0].focus();if(c.scrollTop()!==f){var e=b&&b.offset||d.focusOffset();e=d.isFunction(e)?e(a):e||0;c.scrollTop(d(a).offset().top-e)}}};d.fn.focusHere=function(a){d.focusHere(this[0],a);return this};d.focusOffset=function(){return 30};d.fixSkiplinks=function(g){var h='click.fixSkipLinks',i=m;d(i).off(h).on(h,function(a){var b=a.target.href,c;if(b&&!a.isDefaultPrevented()&&(c=(b=b.split('#'))[1])){var f=d('#'+c);if(f[0]&&b[0]===i.location.href.split('#')[0]){a.preventDefault();if(f.prop('tabindex')==null){f.prop('tabindex',-1)}i.location.href='#'+c;var e=g&&g.offset||d.scrollOffset();e=d.isFunction(e)?e(f):e;e&&d(i).scrollTop(d(i).scrollTop()-e);f[0].focus()}}})};d.scrollOffset=function(){return 0};d.aquireId=function(a,b){if(typeof a==='string'){b=a;a=k}a=d(a||[])[0];if(!a||!a.id){var c=b||d.aquireId._0+d.aquireId._1++;if(b){var f=b.match(/\d+$/),e=f?parseInt(f[0],10):1;while(d('#'+c)[0]){if(f){b=b.replace(/\d+$/,'');f=k}c=b+(e++)}}if(!a){return c}if(!a.id){a.id=c}}return a.id};d.aquireId._0='tmp_'+(new Date()).getTime()+'_',d.aquireId._1=1,d.fn.aquireId=function(a){return this.each(function(){d.aquireId(this,a)}).attr('id')};d.throttleFn=function(a,b,c){if(typeof b==='number'){c=b;b=false}c=c||50;var f=0,e,g,h,i=function(){g=arguments;h=this;if(!f){b?f++:a.apply(h,g);e=setTimeout(i.finish,c)}f++};i.finish=function(){e&&clearTimeout(e);f>1&&a.apply(h,g);f=0};return i};d.debounceFn=function(f,e,g){if(typeof e==='number'){g=e;e=false}g=g||50;var h,i=function(){var a=arguments,b=!h&&e,c=this;i.cancel();h=setTimeout(function(){!b&&f.apply(c,a);h=0},g);b&&f.apply(c,a)};i.cancel=function(){clearTimeout(h);h=0};return i};d.extend({namespace:function(a,b,c,f){var e=n,g,h=0;if(typeof a!=='string'){e=a;a=b;b=c;c=f}a=a.split(c||'.');while((g=a[h++])){e=e[g]||(e[g]={})}return b?d.extend(e,b):e},reloadPage:function(a){if(!a||a===l.href){a=a||l.href;var b=!/\?/.test(a)?'?':!/[&?](?:#|$)/.test(a)?'&':'';a=a.replace(/[&?]?(#.*)?$/,b+'$1')}l.replace(a)},winWidth:function(){var a=m.documentElement;return n.innerWidth||(a&&a.clientWidth)||j.body.clientWidth},cssSupport:(function(c,f,e,g,h,i){return function(b){if(!c){c=d('<div/>')[0];f='Khtml Ms O Moz Webkit'.split(' ');g={}}h=b in g?g[b]:b in c.style||k;if(h===k){i=b.replace(/^[a-z]/,function(a){return a.toUpperCase()});e=f.length;while(e--){if(f[e]+i in c.style){h=true;break}}}h=g[b]=h||false;return h}})(),getResultBody:function(a,b){var c=d.getResultBody;b=b||{};return d('<div/>').append(d((d.parseHTML||d)(a||'')).not(b.stripFlat||c.stripFlat||'script,title,meta,link,style').find(b.stripDeep||c.stripDeep||'script,style').remove().end())},escResultHtml:function(e,g){g=g||{};var h=g.tagName||'del',i=' '+(g.tagAttrs||'tagName="'),o=String(e).replace(/<\!DOCTYPE[^>]*>/i,'').replace(/(<\/?)(html|head|body|title|meta|style|link|script)([\s\>])/gi,function(a,b,c,f){c=c.toLowerCase();return g['keep'+c]?b+c+f:b+h+((b==='<')?i+c+'"':'')+f});o=g.keepimgSrc?o:d.imgSuppress(o,g.srcAttr);return o},imgSuppress:function(a,b){return a.replace(/(<img[^>]*? )src=/gi,'$1'+(b||'data-srcAttr')+'=')},imgUnsuppress:function(b,c){c=c||'data-srcAttr';if(typeof b==='string'){b=b.replace(new RegExp('(<img[^>]*? )'+c+'=','gi'),'$1src=')}else{b=d(b);b.find('img').add(b.filter('img')).filter('['+c+']').each(function(){var a=d(this);a.attr('src',a.attr(c)).removeAttr(c)})}return b},scrollPos:function(a,b){return d(j).scrollPos(a,b)},setFrag:function(a,b){a=(a||'').replace(/^#/,'');var c=a&&j.getElementById(a),f=!a&&d.scrollPos();c&&(c.id='');l.href='#'+(b?a:d.encodeFrag(a));!a&&d.scrollPos(f);c&&(c.id=a)},encodeFrag:function(a){return encodeURI(a).replace(/#/g,'%23').replace(/%7C/g,'|')},getFrag:function(a,b){var c=(a||l.href).split('#')[1]||'';return b?c:decodeURIComponent(c)},setFocus:function(c){if(c){c=d(c);var f=',A,INPUT,SELECT,TEXTAREA,BUTTON,OBJECT,AREA,',e=f.indexOf(','+c[0].tagName+',')>-1&&c.is(':visible')&&c[0];if(!e&&c.is(':visible')){c.find('*').each(function(a,b){if(f.indexOf(','+b.tagName+',')>-1&&d(b).is(':visible')){e=b;return false}})}if(e){var g=d(j),h=g.scrollTop();d(e)[0].focus();if(g.scrollTop()!==h){var i=d(c).offset().top-30;if(i<10){i=0}g.scrollTop(i)}}}},toInt:function(a,b){return parseInt(a,b||10)},parseParams:function(a){a=d.trim(a!==k?a:m.location.search).replace(/^[?&]|&$/g,'');var b={};if(a){var c=a.replace(/\+/g,' ').split('&'),f=decodeURIComponent,e=0,g=c.length;for(;e<g;e++){var h=c[e].split('='),i=f(h[0]);(b[i]=b[i]||[]).push(f(h[1]||''))}}return b},cropText:function(a,b,c){c=c||' ...';a=d.trim(a).replace(/\s+/g,' ');if(b&&a.length>b+c.length){var f=d.cropText.re||(d.cropText.re={}),e=b+'~~'+c,g=f[e]||(f[e]=new RegExp('^(.{0,'+b+'})\\s.+$')),h=a.replace(g,'$1');return h+(h.length<a.length?c:'')}return a},inject:function(a,b){var c=[],f=b.length,e;if(a.indexOf('%{')>-1){if(isNaN(f)){for(e in b){c.push(e)}}else{while(f--){c.push(f)}}e=c.length;while(e--){var g=c[e],h=r[g]||(r[g]=new RegExp(RegExp.escape('%{'+g+'}'),'g'));a=a.replace(h,b[g])}}return a}});d.setHash=d.setFrag;d.scroll=d.scrollPos;d.fn.scroll=d.fn.scrollPos})(jQuery,document);
