// jQuery extra utilities 1.2  -- (c) 2010-2012 HugsmiÃ°jan ehf.
(function(t,e){var n=window,r=document,i=r.location,s="tmp_"+(new Date).getTime()+"_",o=1,u=function(){},c={};RegExp.escape=RegExp.escape||function(t){return t.replace(/([\\\^\$*+\[\]?{}.=!:(|)])/g,"\\$1")};t.extend(t.expr[":"],{is:function(e,n,r){return t(e).is(r[3])},childof:function(e,n,r){return t(e.parentNode).is(r[3])},descof:function(e,n,i){while((e=e.parentNode)&&e!==r){if(t(e).is(i[3])){return true}}return false},target:function(t,e){return t.id&&(e=i.hash)&&e==="#"+t.id}});var a,l,f,h=function(){var e=l.css("fontSize");if(e!==f){f=e;t(window).trigger("fontresize")}};t.event.special.fontresize={setup:function(){if(this===n||this===r.body){l=t("body");f=l.css("fontSize");a=setInterval(h,500)}},teardown:function(){if(this===n||this===r.body){clearTimeout(a)}}};var p=function(e,n,r,i){var s=[],o=(i?"previous":"next")+"Sibling";e.each(function(){for(var e=this[o],i;e;e=e[o]){i=e.nodeType===1;if(r||i){if(i&&!t(e).not(n).length){break}s.push(e)}}});return e.pushStack(s)};t.fn.extend({nextUntil:function(t,e){return p(this,t,e)},prevUntil:function(t,e){return p(this,t,e,1)},"null":function(){return this},if_:function(e){if(t.isFunction(e)){e=e.call(this)}this.if_CondMet=!!e;return this.pushStack(e?this:[])},else_:function(t){var e=this.end();return e.if_CondMet?e.pushStack([]):e.if_(arguments.length?t:1)},fin:function(){return t(this)},shuffle:function(){var t=this,e=t.length;while(e){var n=Math.floor(e*Math.random(e--)),r=t[e];t[e]=t[n];t[n]=r}return t},imgUnsuppress:function(e){t.imgUnsuppress(this,e);return this},unhide:function(){return this.css("display","")},pause:function(e,n){return!n&&t.fn.delay?this.delay(e):this.animate({smu:0},e||e===0?e:800,n)},log:function(){if(n.console){arguments.length&&console.log.call(console,arguments);console.log(this)}return this},zap:function(){return this.each(function(){this.parentNode&&t(this.childNodes).insertBefore(this)}).remove()},deepest:function(){return this.map(function(){var t=this;while(t.firstChild){t=t.firstChild}return t})},hoverClass:function(e){return this.hover(function(){t(this).addClass(e)},function(){t(this).removeClass(e)})},run:function(t,n,r){var i=t.apply(this,n||[]);return r||i===e?this:i},aquireId:function(e){return this.each(function(){t.aquireId(this,e)}).attr("id")},setFocus:function(){t.setFocus(this[0]);return this},focusHere:function(){t.focusHere(this[0]);return this},scrollPos:function(t,n){if(t==e&&n==e){return{left:this.scrollLeft(),top:this.scrollTop()}}if(t&&(t.top||t.left)){n=t.top;t=t.left}t!=e&&this.scrollLeft(t);n!=e&&this.scrollTop(n);return this},toggleClasses:function(e,n,r){return this.each(function(){var i=t(this),s=arguments.length>2?r:i.hasClass(e);i.removeClass(s?e:n).addClass(s?n:e)})},lang:function(e){return t.lang(this[0],e)}});t.extend({beget:function(e,n){u.prototype=e;return n?t.extend(new u,n):new u},namespace:function(e,r,i,s){var o=n,u,c=0;if(typeof e!=="string"){o=e;e=r;r=i;i=s}e=e.split(i||".");while(u=e[c++]){o=o[u]||(o[u]={})}return r?t.extend(o,r):o},reloadPage:function(t){if(!t||t===i.href){t=t||i.href;var e=!/\?/.test(t)?"?":!/[&?](?:#|$)/.test(t)?"&":"";t=t.replace(/[&?]?(#.*)?$/,e+"$1")}i.replace(t)},winWidth:function(){var t=r.documentElement;return n.innerWidth||t&&t.clientWidth||r.body.clientWidth},aquireId:function(n,r){if(typeof n==="string"){r=n;n=e}n=t(n||[])[0];if(!n||!n.id){var i=r||s+o++;if(r){var u=r.match(/\d+$/),c=u?parseInt(u[0],10):1;while(t("#"+i)[0]){if(u){r=r.replace(/\d+$/,"");u=e}i=r+c++}}if(!n){return i}if(!n.id){n.id=i}}return n.id},cssSupport:function(n,r,i,s,o){return function(u){if(!n){n=t("<div/>")[0];r="Khtml Ms O Moz Webkit".split(" ");s={}}o=u in s?s[u]:u in n.style||e;if(o===e){u=u.replace(/^[a-z]/,function(t){return t.toUpperCase()});i=r.length;while(i--){if(r[i]+u in n.style){o=true;break}}}return s[u]=o||false}}(),getResultBody:function(e,n){var r=t.getResultBody;n=n||{};return t("<div/>").append(t(e||[]).not(n.stripFlat||r.stripFlat||"script,title,meta,link,style").find(n.stripDeep||r.stripDeep||"script,style").remove().end())},escResultHtml:function(e,n){n=n||{};var r=n.tagName||"del",i=" "+(n.tagAttrs||'tagName="'),s=String(e).replace(/<\!DOCTYPE[^>]*>/i,"").replace(/(<\/?)(html|head|body|title|meta|style|link|script)([\s\>])/gi,function(t,e,s,o){s=s.toLowerCase();return n["keep"+s]?e+s+o:e+r+(e==="<"?i+s+'"':"")+o});s=n.keepimgSrc?s:t.imgSuppress(s,n.srcAttr);return s},imgSuppress:function(t,e){return t.replace(/(<img[^>]*? )src=/gi,"$1"+(e||"data-srcAttr")+"=")},imgUnsuppress:function(e,n){n=n||"data-srcAttr";if(typeof e==="string"){e=e.replace(new RegExp("(<img[^>]*? )"+n+"=","gi"),"$1src=")}else{e=t(e);e.find("img").add(e.filter("img")).attr("src",function(){var e=t(this),r=e.attr(n);e.removeAttr(n);return r})}return e},lang:function(e,n){if(typeof e==="boolean"){n=e;e=null}var r=t(e||"html").closest("[lang]").attr("lang")||"";return r?(n?r.substr(0,2):r).toLowerCase():null},scrollPos:function(e,n){return t(r).scrollPos(e,n)},setFrag:function(e,n){e=(e||"").replace(/^#/,"");var s=e&&r.getElementById(e),o=!e&&t.scrollPos();s&&(s.id="");i.href="#"+(n?e:t.encodeFrag(e));!e&&t.scrollPos(o);s&&(s.id=e)},encodeFrag:function(t){return encodeURI(t).replace(/#/g,"%23").replace(/%7C/g,"|")},getFrag:function(t,e){var n=(t||i.href).split("#")[1]||"";return e?n:decodeURIComponent(n)},setFocus:function(e){if(e){e=t(e);var n=",A,INPUT,SELECT,TEXTAREA,BUTTON,OBJECT,AREA,",i=n.indexOf(","+e[0].tagName+",")>-1&&e.is(":visible")&&e[0];if(!i&&e.is(":visible")){e.each(function(e,r){if(n.indexOf(","+r.tagName+",")>-1&&t(r).is(":visible")){i=r;return false}})}if(i){var s=t(r),o=s.scrollTop();t(i)[0].focus();if(s.scrollTop()!==o){var u=t(e).offset().top-30;if(u<10){u=0}s.scrollTop(u)}}}},focusHere:function(n){if(n){n=t(n);var i=n.attr("tabindex");if(i==e){n.attr("tabindex",-1)}var s=t(r),o=s.scrollTop();n.trigger("focus");if(s.scrollTop()!==o){var u=t(n).offset().top-30;if(u<10){u=0}s.scrollTop(u)}}},fixSkiplinks:function(e){t(document).delegate(e||'a[href^="#"]',"click",function(e){if(!e.isDefaultPrevented()){var n=t(this).attr("href").substr(1);if(n){setTimeout(function(){t("#"+n).focusHere()},0);e.preventDefault()}}})},toInt:function(t,e){return parseInt(t,e||10)},parseParams:function(n){n=t.trim(n!==e?n:document.location.search).replace(/^[?&]|&$/g,"");var r={};if(n){var i=n.replace(/\+/g," ").split("&"),s=decodeURIComponent,o=0,u=i.length;for(;o<u;o++){var c=i[o].split("="),a=s(c[0]);(r[a]=r[a]||[]).push(s(c[1]||""))}}return r},cropText:function(e,n,r){r=r||" ...";if(n&&e.length>n+r.length){e=t.trim(e).replace(/\s+/g," ");var i=t.cropText.re||(t.cropText.re={}),s=n+"~~"+r,o=i[s]||(i[s]=new RegExp("^(.{0,"+n+"})\\s.+$")),u=e.replace(o,"$1");return u+(u.length<e.length?r:"")}return e},inject:function(t,e){var n=[],r=e.length,i;if(t.indexOf("%{")>-1){if(isNaN(r)){for(i in e){n.push(i)}}else{while(r--){n.push(r)}}i=n.length;while(i--){var s=n[i],o=c[s]||(c[s]=new RegExp(RegExp.escape("%{"+s+"}"),"g"));t=t.replace(o,e[s])}}return t}});t.setHash=t.setFrag;t.scroll=t.scrollPos;t.fn.scroll=t.fn.scrollPos})(jQuery);