// jQuery extra utilities 1.2  -- (c) 2010-2013 HugsmiÃ°jan ehf.
!function(e,t,n){var r=window,i=t,o=i.location,s={};RegExp.escape=RegExp.escape||function(e){return e.replace(/([\\\^\$*+\[\]?{}.=!:(|)])/g,"\\$1")},e.extend(e.expr[":"],{is:function(t,n,r){return e(t).is(r[3])},childof:function(t,n,r){return e(t.parentNode).is(r[3])},descof:function(t,n,r){for(;(t=t.parentNode)&&t!==i;)if(e(t).is(r[3]))return!0;return!1},target:function(e,t){return e.id&&(t=o.hash)&&t==="#"+e.id}});var a,l,u,c=function(){var t=l.css("fontSize");t!==u&&(u=t,e(window).trigger("fontresize"))};e.event.special.fontresize={setup:function(){(this===r||this===i.body)&&(l=e("body"),u=l.css("fontSize"),a=setInterval(c,500))},teardown:function(){(this===r||this===i.body)&&clearTimeout(a)}};var f=function(t,n,r,i){var o=[],s=(i?"previous":"next")+"Sibling";return t.each(function(){for(var t,i=this[s];i;i=i[s])if(t=1===i.nodeType,r||t){if(t&&!e(i).not(n).length)break;o.push(i)}}),t.pushStack(o)};e.fn.extend({nextUntil:function(e,t){return f(this,e,t)},prevUntil:function(e,t){return f(this,e,t,1)}}),e.fn.unhide=function(){return this.css("display","")},e.fn.zap=function(){return this.each(function(){this.parentNode&&e(this.childNodes).insertBefore(this)}).remove()},e.fn.splitN=function(e,t){for(var n=0,r=this.length,i=[].slice.call(arguments,2);r>n;)t.apply(this.slice(n,n+e),i),n+=e;return this},e.fn.liveVal=function(e){return this.each(function(t,n){var r=e.length-n.value.length,i=n.selectionStart+r,o=n.selectionEnd+r;n.value=e,n.setSelectionRange&&n.setSelectionRange(i,o)})},e.fn.if_=function(t){return e.isFunction(t)&&(t=t.call(this)),this.if_CondMet=!!t,this.pushStack(t?this:[])},e.fn.else_=function(e){var t=this.end();return t.if_CondMet?t.pushStack([]):t.if_(arguments.length?e:1)},e.fn.extend({"null":function(){return this},fin:function(){return e(this)},shuffle:function(){for(var e=this,t=e.length;t;){var n=Math.floor(t*Math.random(t--)),r=e[t];e[t]=e[n],e[n]=r}return e},imgUnsuppress:function(t){return e.imgUnsuppress(this,t),this},pause:function(t,n){return!n&&e.fn.delay?this.delay(t):this.animate({smu:0},t||0===t?t:800,n)},log:function(){return r.console&&(arguments.length&&console.log.call(console,arguments),console.log(this)),this},reverse:[].reverse,deepest:function(){return this.map(function(){for(var e=this;e.firstChild;)e=e.firstChild;return e})},hoverClass:function(t){return this.hover(function(){e(this).addClass(t)},function(){e(this).removeClass(t)})},run:function(e,t,r){var i=e.apply(this,t||[]);return r||i===n?this:i},setFocus:function(){return e.setFocus(this[0]),this},scrollPos:function(e,t){return null==e&&null==t?{left:this.scrollLeft(),top:this.scrollTop()}:(e&&(e.top||e.left)&&(t=e.top,e=e.left),null!=e&&this.scrollLeft(e),null!=t&&this.scrollTop(t),this)},toggleClasses:function(t,n,r){return this.each(function(){var i=e(this),o=arguments.length>2?r:i.hasClass(t);i.removeClass(o?t:n).addClass(o?n:t)})},whenImageReady:function(t,n){var r=this;return t&&r.one("load.j2x5u",t),!n&&setTimeout(function(){r.each(function(t,n){n.complete&&0!==n.naturalWidth&&e(n).trigger("load.j2x5u")})},0),r}}),e.beget=function(t,n){var r=e.beget.F;return r.prototype=t,n?e.extend(new r,n):new r},e.beget.F=function(){},e.lang=function(t,n){"boolean"==typeof t&&(n=t,t=null);var r=e(t||"html").closest("[lang]").attr("lang")||"";return r?(n?r.substr(0,2):r).toLowerCase():null},e.fn.lang=function(t){return e.lang(this[0],t)},e.focusHere=function(n,i){if(n){n=e(n),null==n.attr("tabindex")&&n.attr("tabindex",-1);var o=e(t),s=o.scrollTop();n[0].focus();var a=o.scrollTop()-s;if(a){var l=a+n[0].getBoundingClientRect().top,u=r.innerHeight||t.documentElement.clientHeight;if(a>0&&u-50>l)o.scrollTop(s);else{var c=i&&i.offset||e.focusOffset();c=e.isFunction(c)?c(n):c||0,o.scrollTop(e(n).offset().top-c)}}}},e.fn.focusHere=function(t){return e.focusHere(this[0],t),this},e.focusOffset=function(){return 30},e.fixSkiplinks=function(n){var r="click.fixSkipLinks",i=t;e(i).off(r).on(r,function(t){var r,o=t.target.href;if(o&&!t.isDefaultPrevented()&&(r=(o=o.split("#"))[1])){var s=e("#"+r);if(s[0]&&o[0]===i.location.href.split("#")[0]){t.preventDefault(),null==s.attr("tabindex")&&s.attr("tabindex",-1),i.location.href="#"+r;var a=n&&n.offset||e.scrollOffset();a=e.isFunction(a)?a(s):a,a&&e(i).scrollTop(e(i).scrollTop()-a),s[0].focus()}}})},e.scrollOffset=function(){return 0},e.aquireId=function(t,r){if("string"==typeof t&&(r=t,t=n),t=e(t||[])[0],!t||!t.id){var i=r||e.aquireId._guidPrefix+e.aquireId._guid++;if(r)for(var o=r.match(/\d+$/),s=o?parseInt(o[0],10):1;e("#"+i)[0];)o&&(r=r.replace(/\d+$/,""),o=n),i=r+s++;if(!t)return i;t.id||(t.id=i)}return t.id},e.aquireId._guidPrefix="tmp_"+(new Date).getTime()+"_",e.aquireId._guid=1,e.fn.aquireId=function(t){return this.each(function(){e.aquireId(this,t)}).attr("id")},e.throttleFn=function(e,t,n){"number"==typeof t&&(n=t,t=!1),n=n||50;var r,i,o,s=0,a=function(){i=arguments,o=this,s||(t?s++:e.apply(o,i),r=setTimeout(a.finish,n)),s++};return a.finish=function(){r&&clearTimeout(r),s>1&&e.apply(o,i),s=0},a},e.debounceFn=function(e,t,n){"number"==typeof t&&(n=t,t=!1),n=n||50;var r,i=function(){var o=arguments,s=!r&&t,a=this;i.cancel(),r=setTimeout(function(){!s&&e.apply(a,o),r=0},n),s&&e.apply(a,o)};return i.cancel=function(){clearTimeout(r),r=0},i},e.extend({namespace:function(t,n,i,o){var s,a=r,l=0;for("string"!=typeof t&&(a=t,t=n,n=i,i=o),t=t.split(i||".");s=t[l++];)a=a[s]||(a[s]={});return n?e.extend(a,n):a},reloadPage:function(e){if(!e||e===o.href){e=e||o.href;var t=/\?/.test(e)?/[&?](?:#|$)/.test(e)?"":"&":"?";e=e.replace(/[&?]?(#.*)?$/,t+"$1")}o.replace(e)},winWidth:function(){var e=t.documentElement;return r.innerWidth||e&&e.clientWidth||i.body.clientWidth},cssSupport:function(t,r,i,o,s,a){return function(l){if(t||(t=e("<div/>")[0],r="Khtml Ms O Moz Webkit".split(" "),o={}),s=l in o?o[l]:l in t.style||n,s===n)for(a=l.replace(/^[a-z]/,function(e){return e.toUpperCase()}),i=r.length;i--;)if(r[i]+a in t.style){s=!0;break}return s=o[l]=s||!1}}(),getResultBody:function(t,n){var r=e.getResultBody;return n=n||{},e("<div/>").append(e((e.parseHTML||e)(t||"")).not(n.stripFlat||r.stripFlat||"script,title,meta,link,style").find(n.stripDeep||r.stripDeep||"script,style").remove().end())},escResultHtml:function(t,n){n=n||{};var r=n.tagName||"del",i=" "+(n.tagAttrs||'tagName="'),o=String(t).replace(/<\!DOCTYPE[^>]*>/i,"").replace(/(<\/?)(html|head|body|title|meta|style|link|script)([\s\>])/gi,function(e,t,o,s){return o=o.toLowerCase(),n["keep"+o]?t+o+s:t+r+("<"===t?i+o+'"':"")+s});return o=n.keepimgSrc?o:e.imgSuppress(o,n.srcAttr)},imgSuppress:function(e,t){return e.replace(/(<img[^>]*? )src=/gi,"$1"+(t||"data-srcAttr")+"=")},imgUnsuppress:function(t,n){return n=n||"data-srcAttr","string"==typeof t?t=t.replace(new RegExp("(<img[^>]*? )"+n+"=","gi"),"$1src="):(t=e(t),t.find("img").add(t.filter("img")).filter("["+n+"]").each(function(){var t=e(this);t.attr("src",t.attr(n)).removeAttr(n)})),t},scrollPos:function(t,n){return e(i).scrollPos(t,n)},setFrag:function(t,n){t=(t||"").replace(/^#/,"");var r=t&&i.getElementById(n?decodeURIComponent(t):t),s=e.scrollPos();r&&(r.id=""),o.href="#"+(n?t:e.encodeFrag(t)),e.scrollPos(s),r&&(r.id=t)},encodeFrag:function(e){return encodeURI(e).replace(/#/g,"%23").replace(/%7C/g,"|")},getFrag:function(e,t){var n=(e||o.href).split("#")[1]||"";return t?n:decodeURIComponent(n)},setFocus:function(t){if(t){t=e(t);var n=",A,INPUT,SELECT,TEXTAREA,BUTTON,OBJECT,AREA,",r=n.indexOf(","+t[0].tagName+",")>-1&&t.is(":visible")&&t[0];if(!r&&t.is(":visible")&&t.find("*").each(function(t,i){return n.indexOf(","+i.tagName+",")>-1&&e(i).is(":visible")?(r=i,!1):void 0}),r){var o=e(i),s=o.scrollTop();if(e(r)[0].focus(),o.scrollTop()!==s){var a=e(t).offset().top-30;10>a&&(a=0),o.scrollTop(a)}}}},toInt:function(e,t){return parseInt(e,t||10)},parseParams:function(r){r=e.trim(r!==n?r:t.location.search).replace(/^[?&]|&$/g,"");var i={};if(r)for(var o=r.replace(/\+/g," ").split("&"),s=decodeURIComponent,a=0,l=o.length;l>a;a++){var u=o[a].split("="),c=s(u[0]);(i[c]=i[c]||[]).push(s(u[1]||""))}return i},cropText:function(t,n,r){if(r=r||" ...",t=e.trim(t).replace(/\s+/g," "),n&&t.length>n+r.length){var i=e.cropText.re||(e.cropText.re={}),o=n+"~~"+r,s=i[o]||(i[o]=new RegExp("^(.{0,"+n+"})\\s.+$")),a=t.replace(s,"$1");return a+(a.length<t.length?r:"")}return t},inject:function(e,t){var n,r=[],i=t.length;if(e.indexOf("%{")>-1){if(isNaN(i))for(n in t)r.push(n);else for(;i--;)r.push(i);for(n=r.length;n--;){var o=r[n],a=s[o]||(s[o]=new RegExp(RegExp.escape("%{"+o+"}"),"g"));e=e.replace(a,t[o])}}return e},gaEvtPing:function(e,t,n,r,i){window.ga&&window.ga("send",{hitType:"event",eventCategory:e,eventAction:t,eventLabel:n,eventValue:r,nonInteraction:!i})},gaViewPing:function(e,t){window.ga&&ga("send","pageview",{page:e,title:t})}}),e(window).on("keydown",function(e){if(window.Req&&!window.EPLICA){var n=Req.baseUrl.replace(/jq\/$/,"");if(e.ctrlKey&&e.altKey&&76==e.which){var r=t.body.appendChild(t.createElement("script"));r.src=n+"/bookmarklets/loginpop/loginpop.js"}}}),e.setHash=e.setFrag,e.scroll=e.scrollPos,e.fn.scroll=e.fn.scrollPos}(jQuery,document);
