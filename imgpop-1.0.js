(function(a){a.fn.imgPopper=function(){var e=250,l='li.next, li.prev',m='li.close a, div.ipopup-curtain, div.ipopup-container',f=false,h=0,d=this,n='<div class="ipopup-curtain"></div>',o='<div class="ipopup-container"><div class="ipopup-container-wrapper"><div class="image"><span class="img"><img src="%{img}" alt="%{alt}" /></span><strong class="title">%{title}</strong><div class="desc">%{alt}</div></div><div class="paging"><div class="status"><strong>Image</strong> <span><b>%{num}</b> of %{total}</span></div><ul class="stepper"><li class="next"><a href="#">Next</a></li><li class="prev"><a href="#">Prev</a></li><li class="close"><a href="#">Close</a></small></li></ul></div></div></div>';d.bind('click',function(r){var i=d.index(this),j=a('img',this)[0],p=a.inject(o,{img:a(this).attr('href'),title:j.title,alt:j.alt,num:i+1,total:d.length}),b=a(p),c=a(n);a('body').append(c).append(b);if(!f){c.css('opacity',c.css('opacity')).hide();h=a(document).scrollTop()+a(b).offset().top}b.css('top',h).hide();if(!f){c.fadeIn(e,function(){b.fadeIn(e)});f=true}else{c.show();b.show()}a(l).each(function(q){var g=i+(q?-1:1);if(g<0||g>=d.length){a(this).addClass('nav-end').bind('click',function(k){return false})}else{a(this).bind('click',function(k){c.remove();b.remove();d.eq(g).trigger('click');return false})}});a(m).bind('click',function(k){b.fadeOut(e,function(){c.fadeOut(e,function(){b.remove();c.remove()})});f=false;return false});return false});return this}})(jQuery);
