!function(u,n){var s,b={},T={},a="tabswitcher",g=a,k=function(a){var t=u("#"+a),e=t.data(g),i=e.config;e.tab.removeClass(i.currentTabClass),e.link.is("[aria-selected]")&&e.link.attr("aria-selected","false"),i.currentTabTag&&e.tab.find(i.currentTabTag).zap(),i.cssHide?(t.addClass(i.hiddenPaneClass),t.attr("aria-hidden",!0),t.attr("tabindex","-1")):t.hide(),i.openTabId===a&&delete i.openTabId,delete b[a],e.block.trigger("Tabclose",a),t.trigger("Panelclose",a)},l=function(a){var t=u(a.target).closest("a, area");if(t.is('[href*="#"]')&&!t.data(g+"Link")&&n.location.href.split("#")[0]===t[0].href.split("#")[0]){var e=u.getFrag(t[0].href);e&&T[e]&&(u.tabSwitcher.switchTo(e),a.preventDefault())}},p=function(a){u.tabSwitcher.switchTo(this),a.preventDefault()},v=function(){return u(this).parent().data(g).tab.setFocus(),!1},m=function(a){a.target!==this&&u.tabSwitcher.switchTo(this.id,!0)};u.extend({tabSwitcher:{version:1,fixInitScroll:!0,cookieName:a,cookiePath:"/",cookieTTL:1200,defaultConfig:{tabSelector:"li",stripActiveClass:"tabs-active",currentTabClass:"current",currentTabTag:"strong",paneClass:"tabpane",hiddenPaneClass:"tabpane-hidden",cssHide:!1,showFirst:!0,setCookie:!0,setFragment:!0,focusLinkTemplate:'<a href="#" class="focustarget">.</a>',returnLinkTemplate:'<a href="#" class="stream">.</a>',en:{backLinkText:"Back to "},is:{backLinkText:"Til baka Ã­ "}},switchTo:function(a,t){var e,i,r,n,s=a.href?u.getFrag(a.href):a+"",l=u("#"+s).data(g),o=l.config,c=o.openTabId;o&&(l.block.trigger("Tabswitch",{from:c,to:s}),o.openTabId!==s&&(o.openTabId&&k(o.openTabId),i=u("#"+(e=s)),r=i.data(g),n=r.config,r.tab.addClass(n.currentTabClass),r.link.is("[aria-selected]")&&r.link.attr("aria-selected","true"),n.currentTabTag&&!u(n.currentTabTag,r.link).length&&r.link.wrapInner("<"+n.currentTabTag+"/>"),n.cssHide?(i.removeClass(n.hiddenPaneClass),i.removeAttr("aria-hidden"),i.removeAttr("tabindex")):i.show(),n.openTabId=e,b[e]=!0,r.block.trigger("Tabopen",e),i.trigger("Panelopen",e)),t||(o.setFragment&&u.setFrag(s),l.focusLink&&u.setFocus(l.focusLink)),l.block.trigger("Tabswitched",{from:c,to:s}))}}}),u.fn.tabSwitcher=function(t){var f=u.getFrag();s=[[],[],[],[]],this.each(function(){var c=u(this),b=u.extend({},u.tabSwitcher.defaultConfig,t),a=u(b.tabSelector,this),d="",h=0;b.tabs={},b.tabBlock=this,a.each(function(a,t){var e={tab:u(t)},i=e.link="A"===t.tagName?e.tab:u("a",t),r=(i.closest("[lang]").attr("lang")||"en").substr(0,2);e.lang=b[r]?r:"en",e.config=b,e.block=c;var n=u.getFrag(i.attr("href")),s=i.attr("id"),l=u(n?"#"+n:[]);if(l.data(g,e),l.length){s&&l.attr("aria-labelledby",s),l.addClass(b.paneClass);var o=b[e.lang].backLinkText+e.tab.text();b.focusLinkTemplate&&(e.focusLink=u(b.focusLinkTemplate).attr("title",o).on("click",v).prependTo(l)),b.returnLinkTemplate&&(e.returnLink=u(b.returnLinkTemplate).attr("title",o).on("click",v).appendTo(l)),a||d||!b.showFirst||(d=n,h=1),h<2&&e.tab.hasClass(b.currentTabClass)&&(d=n,h=2),h<3&&b.setCookie,h<4&&f===n&&(u(window).scrollTop(0),d=n,h=4),e.tab.on("click",function(){return!1}),(e.tab.is("a")?e.tab:e.tab.find("a:first")).data(g+"Link",1).on("click",p),k(n),T[n]=!0,l.on("Tabswitch",m)}}),c.addClass(b.stripActiveClass),d&&s[h-1].unshift(d),u.tabSwitcher.fixInitScroll&&4===h&&!b.setFragment&&(n.location.hash="")});for(var a=0;a<4;a++)for(var e,i=s[a],r=0;e=i[r];r++)u.tabSwitcher.switchTo(e,!0);return u(n).on("click",l),this};var e=(u.fn.makeTabbox=function(i){i=u.beget(e,i);var a=[];if(this.length>=i.min){a=u(i.boxTempl).addClass(i.boxClass),i.ariaLabel&&(a.attr("aria-label",i.ariaLabel).attr("aria-role","tablist"),this.attr("role","tabpanel"));var r=i.tabContSel?u(i.tabContSel,a):a,t=this.eq(0).parent(),n=t.closest("[lang]").attr("lang")||"";t.attr("lang",n),this.each(function(){var a=u(this);a.aquireId(i.defaultId);var t=i.makeTab(a,i).appendTo(r),e=a.closest("[lang]").attr("lang");e&&e!==n&&t.attr("lang",e)}).eq(0).before(a)}return this.pushStack(a)}).defaults={ariaLabel:"",min:2,defaultId:"tab1",tabContSel:"ul",titleSel:"h1, h2, h3",boxClass:"tab-box",boxTempl:'<div><ul class="tabs" /></div>',tabTempl:'<li><a id="%{id}-tab" href="#%{id}" title="%{title}" aria-controls="#%{id}" role="tab" aria-selected="false">%{title}</a></li>',makeTab:function(a,t){var e=a.find(t.titleSel).eq(0);return u(u.inject(t.tabTempl,{id:a[0].id,title:e.text()}))}}}(jQuery,document);
