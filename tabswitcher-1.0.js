!function(t,a){var e,n,i={},r={},s="tabswitcher",o=s,l=function(a){var e=t("#"+a),n=e.data(o),r=n.config;n.tab.removeClass(r.currentTabClass),r.currentTabTag&&n.tab.find(r.currentTabTag).zap(),r.cssHide?e.addClass(r.hiddenPaneClass):e.hide(),r.openTabId==a&&delete r.openTabId,delete i[a],n.block.trigger("Tabclose",a),e.trigger("Panelclose",a)},c=function(a){var e=t("#"+a),n=e.data(o),r=n.config;n.tab.addClass(r.currentTabClass),r.currentTabTag&&!t(r.currentTabTag,n.link).length&&n.link.wrapInner("<"+r.currentTabTag+"/>"),r.cssHide?e.removeClass(r.hiddenPaneClass):e.show(),r.openTabId=a,i[a]=!0,n.block.trigger("Tabopen",a),e.trigger("Panelopen",a)},b=function(e){var n=t(e.target).closest("a, area");if(n.is('[href*="#"]')&&!n.data(o+"Link")&&a.location.href.split("#")[0]==n[0].href.split("#")[0]){var i=t.getFrag(n[0].href);i&&r[i]&&(t.tabSwitcher.switchTo(i),e.preventDefault())}},d=function(a){t.tabSwitcher.switchTo(this),a.preventDefault()},f=function(a){return t(this).parent().data(o).tab.setFocus(),!1},h=function(a){a.target!==this&&t.tabSwitcher.switchTo(this.id,!0)};t.extend({tabSwitcher:{version:1,fixInitScroll:!0,cookieName:s,cookiePath:"/",cookieTTL:1200,defaultConfig:{tabSelector:"li",stripActiveClass:"tabs-active",currentTabClass:"current",currentTabTag:"strong",paneClass:"tabpane",hiddenPaneClass:"tabpane-hidden",cssHide:!1,showFirst:!0,setCookie:!0,setFragment:!0,focusLinkTemplate:'<a href="#" class="focustarget">.</a>',returnLinkTemplate:'<a href="#" class="stream">.</a>',en:{backLinkText:"Back to "},is:{backLinkText:"Til baka Ã­ "}},switchTo:function(a,e){var n=a.href?t.getFrag(a.href):a+"",i=t("#"+n),r=i.data(o),s=r.config,b=s.openTabId;s&&(r.block.trigger("Tabswitch",{from:b,to:n}),s.openTabId!=n&&(s.openTabId&&l(s.openTabId),c(n)),e||(s.setFragment&&t.setFrag(n),r.focusLink&&t.setFocus(r.focusLink)),r.block.trigger("Tabswitched",{from:b,to:n}))}}}),t.fn.tabSwitcher=function(i){var s=t.getFrag();n=[[],[],[],[]],this.each(function(){var c=t(this),b=t.extend({},t.tabSwitcher.defaultConfig,i),u=t(b.tabSelector,this),T="",g=0;b.tabs={},b.tabBlock=this,u.each(function(a,n){var i={tab:t(n)},u=i.link="A"==n.tagName?i.tab:t("a",n),k=(u.closest("[lang]").attr("lang")||"en").substr(0,2);i.lang=b[k]?k:"en",i.config=b,i.block=c;var p=t.getFrag(u.attr("href")),v=t(p?"#"+p:[]);if(v.data(o,i),v.length){v.addClass(b.paneClass);var C=b[i.lang].backLinkText+i.tab.text();b.focusLinkTemplate&&(i.focusLink=t(b.focusLinkTemplate).attr("title",C).on("click",f).prependTo(v)),b.returnLinkTemplate&&(i.returnLink=t(b.returnLinkTemplate).attr("title",C).on("click",f).appendTo(v)),a||T||!b.showFirst||(T=p,g=1),2>g&&i.tab.hasClass(b.currentTabClass)&&(T=p,g=2),3>g&&b.setCookie&&e&&t.inArray(e,p)>-1&&(T=p,g=3),4>g&&s==p&&(t(window).scrollTop(0),T=p,g=4),i.tab.on("click",function(t){return!1}),(i.tab.is("a")?i.tab:i.tab.find("a:first")).data(o+"Link",1).on("click",d),l(p),r[p]=!0,v.on("Tabswitch",h)}}),c.addClass(b.stripActiveClass),T&&n[g-1].unshift(T),t.tabSwitcher.fixInitScroll&&4==g&&!b.setFragment&&(a.location.hash="")});for(var c=0;4>c;c++)for(var u,T=n[c],g=0;u=T[g];g++)t.tabSwitcher.switchTo(u,!0);return t(a).on("click",b),this};var u=t.fn.makeTabbox=function(a){a=t.beget(T,a);var e=[],n=this;if(n.length>=a.min){e=t(a.boxTempl).addClass(a.boxClass);var i=a.tabContSel?t(a.tabContSel,e):e,r=n.eq(0).parent(),s=r.closest("[lang]").attr("lang")||"";r.attr("lang",s),n.each(function(){var e=t(this);e.aquireId(a.defaultId);var n=a.makeTab(e,a).appendTo(i),r=e.closest("[lang]").attr("lang");r&&r!=s&&n.attr("lang",r)}).eq(0).before(e)}return this.pushStack(e)},T=u.defaults={min:2,defaultId:"tab1",tabContSel:"ul",titleSel:"h1, h2, h3",boxClass:"tab-box",boxTempl:'<div><ul class="tabs" /></div>',tabTempl:'<li><a href="#%{id}" title="%{title}">%{title}</a></li>',makeTab:function(a,e){return t(t.inject(e.tabTempl,{id:a[0].id,title:a.find(e.titleSel).eq(0).text()}))}}}(jQuery,document);
