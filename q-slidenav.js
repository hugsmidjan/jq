/* jQuery.fn.slideNav v 1.0  -- (c) 2016 Hugsmi√∞jan ehf.  @preserve */
!function(e){var t=function(t,a){var n=e(window),i=t,l=i.data("cfg");if(!l)return!1;var s=i.find(".boxbody").wrap('<div class="bbclip" />'),r='<button type="button" class="goback">'+l.backText+"</a>",c=i.find(".current").length?i.find(".current"):i.find(".parent:last"),d=0,o=0,f=1;return a?(n.off("resize.slNav"),s.find(l.branch).off("click.slNav",l.toggler),s.find(l.branch).find(l.toggler).each(function(){e(this).after(e(this).data("branch"))}),i.find(".bbclip").zap(),i.find(".col").zap(),i.find(".title").remove(),i.find(".goback").remove(),i.find(".toggler").remove(),i.find("[style]").removeAttr("style"),setTimeout(function(){i.find("[style]").removeAttr("style")},l.resizeThrottle),!1):(i.find("ul.level1").wrap('<div class="col lvl1" />'),c.length&&(d=c.is(".homecurrent")?0:parseInt(c.closest(s.find(l.branch).find("> ul").add(s.find(".level1"))).attr("class").match(/level(\d+)/)[1],10)-1,c.parents("ul").addClass("active")),s.find(l.branch).each(function(){var t=e(this).find("> ul"),a=parseInt(t.attr("class").match(/level(\d+)/)[1],0),n=this.className;t.prepend(e('<li class="title" />').addClass(e(this).is(".current")?"current":"").addClass(e(this).is(".parent")?"parent":"").append(r).append(l.linkTitle?e(this).find("> a").clone():"<span>"+e(this).find("> a").text()+"</span>")),s.find(".lvl"+a).length||(s.append('<div class="col lvl'+a+'" />'),f++),t.appendTo(s.find(".lvl"+a)),l.cloneBranchClass&&(n=e.trim(n.replace(/(branch|parent|current|first|last)/g,"")),t.find(">li").addClass(n)),l.doTogglers&&e(this).prepend('<a href="#" class="toggler">></a>'),e(this).find(l.toggler).data("branch",t)}),n.on("resize.slNav",e.throttleFn(function(e){o=i.width(),s.find(".col").width(o),s.addClass("no-animation"),s.css({left:-(d*o),width:f*o}),setTimeout(function(){s.removeClass("no-animation")},10)},l.resizeThrottle)).trigger("resize.slNav"),s.find(l.branch).on("click.slNav",l.toggler,function(t){t.preventDefault();var a=e(this).data("branch");d++,a.siblings().removeClass("active"),a.addClass("active"),s.css({left:-(d*o)})}),c.find(l.toggler).trigger("click"),void s.on("click.slNav",".goback",function(e){e.preventDefault(),d--,s.css({left:-(d*o)}),setTimeout(function(){s.find(".col.lvl"+(d+2)+" .active").removeClass("active")},l.slideTime)}))};e.fn.slideNav=function(a){var n=this;if("destroy"===a)t(n,!0);else{var i={backText:"is"===e.lang()?"Til baka":"Go back",branch:"li.branch",doTogglers:!0,toggler:"> a.toggler",cloneCatClass:!1,linkTitle:!0,resizeThrottle:150,slideTime:300},l=e.extend(i,a);e(n).data("cfg",l).each(function(){t(e(this))})}return n}}(jQuery);
