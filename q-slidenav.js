// $.fn.slideNav 1.0  -- (c) 2014 Hugsmi√∞jan ehf.
!function(a){a.fn.slideNav=function(){var e=a(window),i=this,l=i.find(".boxbody").wrap('<div class="bbclip" />'),s=a('<div class="goback hidden"><a href="#">Til baka</a></div>').prependTo(i),n=(i.find("ul.level1").wrap('<div class="col lvl1" />'),i.find(".current")),t=0,d=0,c=1;return n.length&&(t=parseInt(n.closest("ul").attr("class").match(/level(\d+)/)[1],0)-1,n.parents("ul").addClass("active")),l.find("li.branch").each(function(){var e=a(this).find("> ul"),i=parseInt(e.attr("class").match(/level(\d+)/)[1],0);e.prepend(a('<li class="title" />').addClass(a(this).is(".current")?"current":"").append(a(this).find("> a").clone())),a(this).append(a('<a href="#" class="expand">></a>').data("branch",e)),l.find(".lvl"+i).length||(l.append('<div class="col lvl'+i+'" />'),c++),e.appendTo(l.find(".lvl"+i))}),e.on("resize.slNav",a.throttleFn(function(){d=i.width(),l.find(".col").width(d),l.addClass("no-animation"),l.css({left:-(t*d),width:c*d}),setTimeout(function(){l.removeClass("no-animation")},10)},150)).trigger("resize.slNav"),l.on("click",".expand",function(e){e.preventDefault();var i=a(this).data("branch");t++,i.siblings().removeClass("active"),i.addClass("active"),l.css({left:-(t*d)}),s.addClass("visible")}),n.find("> .expand").trigger("click"),s.on("click",function(a){a.preventDefault(),t--,l.css({left:-(t*d)}),0===t&&s.removeClass("visible")}),t>0&&s.addClass("visible"),i}}(jQuery);
