/* jQuery.fn.slideNav v 1.0  -- (c) 2016 Hugsmi√∞jan ehf.  @preserve */
!function(v){var n=function(e,t){var a=v(window),i=e,n=i.data("cfg");if(!n)return!1;var l=i.find(".boxbody").wrap('<div class="bbclip" />'),s='<button type="button" class="goback">'+n.backText+"</a>",r=i.find(".current").length?i.find(".current"):i.find(".parent:last"),c=0,d=0,o=1;if(t)return a.off("resize.slNav"),l.find(n.branch).off("click.slNav",n.toggler),l.find(n.branch).find(n.toggler).each(function(){v(this).after(v(this).data("branch"))}),i.find(".bbclip").zap(),i.find(".col").zap(),i.find(".title").remove(),i.find(".goback").remove(),i.find(".toggler").remove(),i.find("[style]").removeAttr("style"),i.find("ul.active").removeClass("active"),setTimeout(function(){i.find("[style]").removeAttr("style")},n.resizeThrottle),!1;if(i.find("ul.level1").addClass("active").wrap('<div class="col lvl1" />'),r.length){var f=r.closest("ul").attr("class").match(/level(\d+)/);c=f?parseInt(f[1],10)-1:0,r.parents("ul").addClass("active")}l.find(n.branch).each(function(){var e=v(this).find("> ul"),t=parseInt(e.attr("class").match(/level(\d+)/)[1],0),a=this.className;e.prepend(v('<li class="title" />').addClass(v(this).is(".current")?"current":"").addClass(v(this).is(".parent")?"parent":"").append(s).append(n.linkTitle?v(this).find("> a").clone():"<span>"+v(this).find("> a").text()+"</span>")),l.find(".lvl"+t).length||(l.append('<div class="col lvl'+t+'" />'),o++),e.appendTo(l.find(".lvl"+t)),n.cloneBranchClass&&(a=v.trim(a.replace(/(branch|parent|current|first|last)/g,"")),e.find(">li").addClass(a)),n.doTogglers&&v(this).prepend('<a href="#" class="toggler">></a>'),v(this).find(n.toggler).data("branch",e)}),a.on("resize.slNav",v.throttleFn(function(e){d=i.width(),l.find(".col").css({width:d}),l.addClass("no-animation"),l.css({left:-c*d,width:o*d}),setTimeout(function(){l.removeClass("no-animation")},10)},n.resizeThrottle)).trigger("resize.slNav"),l.find(n.branch).on("click.slNav",n.toggler,function(e){e.preventDefault();var t=v(this).data("branch");c++,t.siblings().removeClass("active"),t.addClass("active"),l.css({left:-c*d})}),r.find(n.toggler).trigger("click"),l.on("click.slNav",".goback",function(e){e.preventDefault(),c--,l.css({left:-c*d}),setTimeout(function(){l.find(".col.lvl"+(c+2)+" .active").removeClass("active")},n.slideTime)})};v.fn.slideNav=function(e){var t=this;if("destroy"===e)n(t,!0);else{var a={backText:"is"===v.lang()?"Til baka":"Go back",branch:"li.branch",doTogglers:!0,toggler:"> a.toggler",cloneCatClass:!1,linkTitle:!0,resizeThrottle:150,slideTime:300},i=v.extend(a,e);v(t).data("cfg",i).each(function(){n(v(this))})}return t}}(jQuery);
