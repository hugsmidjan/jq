/* jQuery.fn.slideNav v 1.0  -- (c) 2016 Hugsmi√∞jan ehf.  @preserve */
!function(e){var t=function(t,a){var i=e(window),n=t,l=n.data("cfg");if(!l)return!1;var s=n.find(".boxbody").wrap('<div class="bbclip" />'),r='<button type="button" class="goback">'+l.backText+"</a>",c=n.find(".current").length?n.find(".current"):n.find(".parent:last"),d=0,o=0,f=1;if(a)return i.off("resize.slNav"),s.find(l.branch).off("click.slNav",l.toggler),s.find(l.branch).find(l.toggler).each(function(){e(this).after(e(this).data("branch"))}),n.find(".bbclip").zap(),n.find(".col").zap(),n.find(".title").remove(),n.find(".goback").remove(),n.find(".toggler").remove(),n.find("[style]").removeAttr("style"),n.find("ul.active").removeClass("active"),setTimeout(function(){n.find("[style]").removeAttr("style")},l.resizeThrottle),!1;n.find("ul.level1").addClass("active").wrap('<div class="col lvl1" />'),c.length&&(d=c.is(".homecurrent")?0:parseInt(c.closest(s.find(l.branch).find("> ul").add(s.find(".level1"))).attr("class").match(/level(\d+)/)[1],10)-1,c.parents("ul").addClass("active")),s.find(l.branch).each(function(){var t=e(this).find("> ul"),a=parseInt(t.attr("class").match(/level(\d+)/)[1],0),i=this.className;t.prepend(e('<li class="title" />').addClass(e(this).is(".current")?"current":"").addClass(e(this).is(".parent")?"parent":"").append(r).append(l.linkTitle?e(this).find("> a").clone():"<span>"+e(this).find("> a").text()+"</span>")),s.find(".lvl"+a).length||(s.append('<div class="col lvl'+a+'" />'),f++),t.appendTo(s.find(".lvl"+a)),l.cloneBranchClass&&(i=e.trim(i.replace(/(branch|parent|current|first|last)/g,"")),t.find(">li").addClass(i)),l.doTogglers&&e(this).prepend('<a href="#" class="toggler">></a>'),e(this).find(l.toggler).data("branch",t)}),i.on("resize.slNav",e.throttleFn(function(e){o=n.width(),s.find(".col").css({width:o}),s.addClass("no-animation"),s.css({left:-d*o,width:f*o}),setTimeout(function(){s.removeClass("no-animation")},10)},l.resizeThrottle)).trigger("resize.slNav"),s.find(l.branch).on("click.slNav",l.toggler,function(t){t.preventDefault();var a=e(this).data("branch");d++,a.siblings().removeClass("active"),a.addClass("active"),s.css({left:-d*o})}),c.find(l.toggler).trigger("click"),s.on("click.slNav",".goback",function(e){e.preventDefault(),d--,s.css({left:-d*o}),setTimeout(function(){s.find(".col.lvl"+(d+2)+" .active").removeClass("active")},l.slideTime)})};e.fn.slideNav=function(a){var i=this;if("destroy"===a)t(i,!0);else{var n={backText:"is"===e.lang()?"Til baka":"Go back",branch:"li.branch",doTogglers:!0,toggler:"> a.toggler",cloneCatClass:!1,linkTitle:!0,resizeThrottle:150,slideTime:300},l=e.extend(n,a);e(i).data("cfg",l).each(function(){t(e(this))})}return i}}(jQuery);
