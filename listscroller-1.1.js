//encoding: utf-8
(function($){$.listscroller={version:1.0,defaultConfig:{item:'',windowSize:3,stepSize:1,startPos:0,hideClass:'overflow',topClass:'at-top',bottomClass:'at-bottom',wrap:'both',overflow:'visible',controls:'below',animation:'none',easing:'swing',speed:600,aspect:'auto',paging:false,jumpPager:true,inputPager:false,statusPager:false,itemStatusPager:false,autoScrollDelay:0,initCallback:function(){},moveCallback:function(){},classPrefix:'listscroller',currentPageClass:'current',currentItemClass:'visible',cursorItemClass:'current',pagingTopClass:'paging-top',pagingBottomClass:'paging-bottom',pagingTemplate:'<div class="paging"><ul class="stepper"/></div>',nextBtnTemplate:'<li class="next"><a href="#"/></li>',prevBtnTemplate:'<li class="prev"><a href="#"/></li>',jumpTemplate:'<li class="jump"/>',jumpLabelTemplate:'<strong/>',jumpWrapTemplate:'<span/>',jumpBtnTemplate:'<a href="#"/>',statusTempl:'<div class="status"/>',statusLabelTempl:'<strong/>',statusWrapTempl:'<span/>',statusCurrTempl:'<b/>',statusTotalTempl:'<i/>',inputPagerTempl:'<input type="text" value="" size="2"/>'},i18n:{en:{labelNext:'Next',labelPrev:'Previous',titleNext:'Page forward',titlePrev:'Page back',jumpLabel:'Pages:',statusLabel:'Page: ',ofTotalSeparator:' of ',statusLabelAfter:''},is:{labelNext:'Næsta',labelPrev:'Fyrri',titleNext:'Fletta áfram',titlePrev:'Fletta til baka',jumpLabel:'Síður:',statusLabel:'Síða: ',ofTotalSeparator:' af ',statusLabelAfter:''}},animate:{none:function(l,c){},carousel:function(l,c){var p,w=l.eq(0).closest('.'+c.classPrefix+'-wrapper'),z=l.eq(l.length-1),last=l.length-c.stepSize,prop=(c.aspect==='horizontal')?'scrollLeft':'scrollTop',dimp=(c.aspect==='horizontal')?'outerWidth':'outerHeight',conf={};w.stop();p=l.eq(c.index).position();conf[prop]=p.left;if(c.wrap=='loop'&&c.lastIndex==0&&c.index==last){w[prop](z.position().left+z[dimp]());w.animate(conf,c.speed,c.easing)}else if(c.wrap=='loop'&&c.lastIndex==last&&c.index==0){conf[prop]=z.position().left+z[dimp]();w.animate(conf,c.speed,c.easing,function(){w[prop](0)})}else{w.animate(conf,c.speed,c.easing)}},crossfade:function(l,c){l.each(function(i,a,b){a=(i>=c.index&&i<c.index+c.windowSize);b=(c.lastIndex==null)||(i>=c.lastIndex&&i<c.lastIndex+c.windowSize);if(!a&&c.lastIndex==null){$(this).stop().hide()}else if(a&&!b){$(this).stop().hide().fadeIn(c.speed)}else if(!a&&b){$(this).stop().show().css({opacity:1}).fadeOut(c.speed)}})},accordion:function(l,c){var d,ap=(c.aspect=='vertical')?'height':'width';l.each(function(i,a,b){a=(i>=c.index&&i<c.index+c.windowSize);b=(c.lastIndex==null)||(i>=c.lastIndex&&i<c.lastIndex+c.windowSize);d={};if(!a&&c.lastIndex==null){$(this).stop().hide()}else{d[ap]=(a&&!b)?'show':(!a&&b)?'hide':undefined;d[ap]&&$(this).stop().animate(d,c.speed,c.easing,function(){this.style[ap]=''})}})}},wrap:{none:function(i,l,c){return Math.max(Math.min(i,max(l,c)),0)},start:function(i,l,c){var m=max(l,c);if(i<0){return(c.index==0)?m:0}if(i>m){return m}return i},end:function(i,l,c){var m=max(l,c);if(i<0){return 0}if(i>m){return(c.index==m)?0:m}return i},both:function(i,l,c){var m=max(l,c);if(i<0){return(c.index==0)?m:0}if(i>m){return(c.index==m)?0:m}return i},random:function(i,l,c){return Math.floor(Math.random()*l.length)},loop:function(i,l,c){return i%l.length}},aspectDefaults:{none:'vertical',carousel:'horizontal',crossfade:'horizontal',accordion:'vertical'}};function detectAspect(a){var b,i2=a.eq(1);p1=a.eq(0).offset(),p2=i2.offset();if(p2&&i2.is(':visible')){return(Math.abs(p2.top-p1.top)<=Math.abs(p2.left-p1.left))?'horizontal':'vertical'}return false}function max(a,b){var c=(b.overflow=='visible')?a.length-(a.length%b.stepSize||b.stepSize):a.length-b.windowSize;return c}function setPos(c,a,b){var d=c.block;var e=c.list;c.lastIndex=c.index;c.index=$.listscroller.wrap[c.wrap||'none'](a,e,c);e.addClass(c.hideClass).removeClass(c.cursorItemClass).removeClass(c.currentItemClass).slice(c.index,c.index+c.windowSize).addClass(c.currentItemClass).removeClass(c.hideClass).eq(0).addClass(c.cursorItemClass);if($.isFunction(c.moveCallback)){c.moveCallback.call(d,e,c)}if($.isFunction(c.animation)){c.animation.call(d,e,c)}else{$.listscroller.animate[c.animation||'none'].call(d,e,c)}d.removeClass(c.topClass).removeClass(c.bottomClass);if(c.index==0){d.addClass(c.topClass)}if(c.index==e.length-c.windowSize){d.addClass(c.bottomClass)}if(!b){d.addClass(c.classPrefix+'-changed');setTimeout(function(){d.removeClass(c.classPrefix+'-changed')},c.speed||1)}var f=Math.ceil(c.index/c.stepSize);if(c.jumps){c.jumps.removeClass(c.currentPageClass).eq(f).addClass(c.currentPageClass)}var g=c.itemStatusPager?c.index:f;c.inputPager&&c.inputPager.val(f+1);c.status&&c.status.text(g+1);if(c.status&&c.itemStatusPager&&c.windowSize>1){var h=g+c.windowSize;h=(h>e.length)?e.length:h;c.status.append('-'+h)}}function movePrev(e){var c=e.data;setPos(c,c.index-c.stepSize);return false}function moveNext(e){var c=e.data;setPos(c,c.index+c.stepSize);return false}function movePage(e){var c=e.data,p=(parseInt($(this).text(),10)-1)||0;setPos(c,p*c.stepSize);return false}function inputChange(e){var a=e.data,pageIndex=Math.max(0,parseInt('0'+$(this).val(),10)-1)||0,newPos=Math.min(pageIndex*a.stepSize,max(a.list,a));setPos(a,newPos);return false}function buildControls(b){var c=$(b.nextBtnTemplate),prevBtn=$(b.prevBtnTemplate),jumpMenu,status;c.find('a').andSelf().eq(0).bind('click',b,moveNext).attr('title',b.titleNext).text(b.labelNext);prevBtn.find('a').andSelf().eq(0).bind('click',b,movePrev).attr('title',b.titlePrev).text(b.labelPrev);if(b.paging){var d=Math.ceil(b.index/b.stepSize),numWindows=Math.ceil(b.list.length/b.stepSize),statusNumTotal=b.itemStatusPager?b.list.length:numWindows;if(b.statusPager||b.inputPager){status=$(b.statusTempl);$(b.statusLabelTempl).html(b.statusLabel).appendTo(status);var e=$(b.statusWrapTempl).appendTo(status);$(b.statusTotalTempl).html(b.ofTotalSeparator+statusNumTotal+b.statusLabelAfter).appendTo(e);if(b.inputPager){b.inputPager=$(b.inputPagerTempl).prependTo(e).val(d+1).bind('change',b,inputChange)}else{b.status=$(b.statusCurrTempl).prependTo(e)}}if(b.jumpPager){var f=[];jumpMenu=$(b.jumpTemplate);if(b.jumpLabelTemplate){$(b.jumpLabelTemplate).text(b.jumpLabel).appendTo(jumpMenu)}for(var i=0;i<numWindows;i++){var g=$(b.jumpBtnTemplate),a=g.find('a').andSelf().eq(0).text(i+1).addClass('p'+(i+1)).bind('click',b,movePage);if(b.index==i){a.addClass(b.currentPageClass)}f.push(a[0])}b.jumps=$(f);$(b.jumpWrapTemplate||[]).append(b.jumps).appendTo(jumpMenu)}}return $(b.pagingTemplate).deepest().append(c,prevBtn,jumpMenu).end().prepend(status)}function initScroller(c,a,b){if(a.hasClass(c.classPrefix+'-active')){return false}c.list=b;c.block=a;var d,_inner,_outer;if(b.eq(0).is('li')){_inner=b.parent()}else{_inner=b.wrapAll('<div />').parent()}_outer=_inner.wrap('<div />').parent();_inner.addClass(c.classPrefix+'-clip');_outer.addClass(c.classPrefix+'-wrapper');a.addClass(c.classPrefix+'-active');_inner.add(_outer).css('position','relative');_outer.addClass(c.classPrefix+'-'+c.aspect);if(c.wrap=='loop'){c.flipover=b.slice(0,c.windowSize).clone(true);b.parent().append(c.flipover)}if(c.controls!=='none'&&b.length>0){if(/^(above|both)$/.test(c.controls)){_outer.before(buildControls(c).addClass(c.pagingTopClass))}if(/^(below|both)$/.test(c.controls)){_outer.after(buildControls(c).addClass(c.pagingBottomClass))}}if(c.aspect=='auto'){c.aspect=detectAspect(b)||$.listscroller.aspectDefaults[c.animation]||'horizontal'}_outer.addClass(c.classPrefix+'-'+c.aspect);if(c.startPos=='random'){c.startPos=Math.floor(Math.ceil(b.length/c.stepSize)*Math.random())*c.stepSize}setPos(c,c.startPos||0,true);if(c.autoScrollDelay){function nexttrigger(e){setPos(c,c.index+c.stepSize)}scrollInterval=setInterval(nexttrigger,c.autoScrollDelay);a.hover(function(){clearInterval(scrollInterval)},function(){scrollInterval=setInterval(nexttrigger,c.autoScrollDelay)})}}$.fn.listscroller=function(a){var c=$.listscroller.defaultConfig;if((a&&a.item)||c.item){this.each(function(){var b=$(this),_lang=b.closest('[lang]').attr('lang')||'',i18n=$.listscroller.i18n,txts=i18n[_lang.toLowerCase()]||i18n[_lang.substr(0,2)]||i18n.en,cfg=$.extend({},c,txts,a);if(cfg.itemStatusPager){cfg.inputPager=false}initScroller(cfg,b,typeof cfg.item=='string'?b.find(cfg.item):cfg.item)})}else if(this.length){this.eq(0).parent().listscroller($.extend({},a,{item:this}))}return this}})(jQuery);
