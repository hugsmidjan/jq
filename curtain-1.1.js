// encoding: utf-8
// $.fn.curtain 1.1  -- (c) 2010 HugsmiÃ°jan ehf.
(function(b){var h='curtain',m='opacity',n=b[h]=function(a,c){if(a=='destroy'){var e=b.inArray(c,g);if(e>-1){b(c).remove();g.splice(e,1)}!g.length&&i.unbind('resize',l);return}if(a&&(a.tagName||a.jquery)){c=a;a={}}a=b.extend({className:h+'-overlay'},typeof(a)=='string'?{className:a}:typeof(a)=='boolean'&&a?{bg:'#888',opacity:.5,z:99}:a||{});var f='min-';if(b.browser.msie&&parseInt(b.browser.version,10)<7){a.fixed=0;f=''}var d=b(c||'<div />').hide().addClass(a.className).css({position:a.fixed?'fixed':'absolute',top:0,left:0}).css(f+'width','100%').css(f+'height','100%');if(!c||!c.parentNode){d.appendTo(document.body)}if(a.bg||a[m]||a.z){d.css({background:a.bg,opacity:a[m],zIndex:a.z})}if(!a.fixed){g.push(d[0]);j=j||b('body');i.bind('resize',l);l(1)}return d};b.fn[h]=function(a){return this.each(function(){b[h](a,this)})};var g=[],i=b(window),j,l=function(a){var c=g.length,e=-1,f=e;while(c--){var d=g[c];if(d&&((d.parentNode&&b(d).is(':visible'))||a==1)){e=e!=-1?e:Math.max(i.width(),j.innerWidth());f=f!=-1?f:Math.max(i.height(),j.innerHeight());var k=d.style;k.width=k.height='0';k.width=e+'px';k.height=f+'px'}}}})(jQuery);
