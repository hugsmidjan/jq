!function(e,t){e.fn.fieldsetCloner=t=function(n){return this.each(function(){var l=e(this),o=t.i18n[l.closest("[lang]").attr("lang")]||t.i18n.en,d=e.extend({},t.defaults,o,n);d.rowName=(l.attr(d.rowNameSel||"")||l.find(d.rowNameSel).eq(0).text()||d.rowName).replace(/:/g,""),d.$protoFS=l.clone(!!d.cloneEvents).each(function(){var t=e.trim(this.className);t&&(t=(t+" ").replace(/\s+/g,"-"+d.cloneClass+" ")+t),t+=" "+d.cloneClass,this.className=t}),d.$delBtn=d.addDelBtn&&e(d.delBtnTemplate.replace(/%\{className\}/g,d.delBtnClass).replace(/%\{label\}/g,d.delBtnLabel).replace(/%\{tooltip\}/g,d.delBtnTitle+d.rowName)).on("click",function(t){t.preventDefault();var a=e(this).data("$fsclnr");d.cloneCount--,a.slideUp(d.showSpeed,function(){a.remove()}),d.cloneMax&&d.cloneCount<d.cloneMax&&c.show(),"appendTo"===d.$place&&a.find("."+d.addBtnClass)[d.$place](a.prev())}),d.$place={after:"insertAfter",bottom:"appendTo"}[d.buttonPlacement]||"insertAfter",d.$num=d.initialCloneNo||0,d.cloneCount=1,d.cloneMax=parseInt(l.attr(d.cloneMaxSel||""),10)||null;var c=e(d.addBtnTemplate.replace(/%\{className\}/g,d.addBtnClass).replace(/%\{label\}/g,d.addBtnLabel+d.rowName).replace(/%\{tooltip\}/g,d.addBtnTitle+d.rowName))[d.$place](l);c.on("click",function(e){e.preventDefault();var t,n="appendTo"===d.$place,l=n?c.parent():c.prev();d.cloneCount++,d.cloneMax&&d.cloneCount===d.cloneMax&&c.hide(),n&&c.detach(),t=a(d).hide().insertAfter(l)[d.showFunc](d.showSpeed),n&&c[d.$place](t),d.afterClone&&d.afterClone(t)})})},t.defaults={buttonPlacement:"after",addBtnTemplate:'<a class="%{className}" href="#" title="%{tooltip}">%{label}</a>',addBtnClass:"addrow",cloneClass:"clone",cloneSep:"-",cloneClassAttributes:!0,showFunc:"slideDown",showSpeed:"fast",delBtnTemplate:'<a class="%{className}" href="#" title="%{tooltip}">%{label}</a>',delBtnClass:"delrow",attrsToInc:["id","for","name"]},t.i18n={en:{addBtnLabel:"Add ",addBtnTitle:"Add new ",delBtnLabel:"Delete",delBtnTitle:"Delete this ",rowName:"row"},is:{addBtnLabel:"Bæta við ",addBtnTitle:"Bæta við auka ",delBtnLabel:"Eyða",delBtnTitle:"Eyða þessari ",rowName:"röð"}};var a=function(e){var t,a,n=e.attrsToInc,l=e.$protoFS.clone(!!e.cloneEvents);return e.$num++,e.$delBtn&&e.$delBtn.clone(!0).data("$fsclnr",l).appendTo(l.find(e.delBtnAppendTo).add(l).last()),(t=l[0].id)&&(a=t.match(/^(.*)(\d+)(\D*)$/),l[0].id=a?a[1]+(parseInt(a[2],10)+e.$num)+a[3]:t+e.cloneSep+e.$num),l.find("*").each(function(){for(var l=this,o=0;o<n.length;o++)(t=l.getAttribute(n[o]))&&(a=t.match(/^(.*)(\d+)(\D*)$/),l.setAttribute(n[o],a?a[1]+(parseInt(a[2],10)+e.$num)+a[3]:t+e.cloneSep+e.$num))}),l}}(window.jQuery);
