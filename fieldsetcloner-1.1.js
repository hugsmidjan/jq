// jQuery.fn.fieldsetCloner v 1.1 - (c) 2011-2013 Hugsmiðjan ehf
!function(e,a){e.fn.fieldsetCloner=a=function(t){return this.each(function(){var n=e(this),r=a.i18n[n.closest("[lang]").attr("lang")]||a.i18n.en,o=e.extend({},a.defaults,r,t);o.rowName=(n.attr(o.rowNameSel||"")||n.find(o.rowNameSel).eq(0).text()||o.rowName).replace(/:/g,"");o.$protoFS=n.clone(!!o.cloneEvents).each(function(){var a=e.trim(this.className);a&&(a+=(a+" ").replace(/\s+/g,"-"+o.cloneClass+" "));a+=" "+o.cloneClass;this.className=a});o.$delBtn=o.addDelBtn&&e(o.delBtnTemplate.replace(/%\{className\}/g,o.delBtnClass).replace(/%\{label\}/g,o.delBtnLabel).replace(/%\{tooltip\}/g,o.delBtnTitle+o.rowName)).on("click",function(a){a.preventDefault();var t=e(this).data("$fsclnr");t.slideUp(o.showSpeed,function(){t.remove()});if(o.$place==="appendTo"){t.find("."+o.addBtnClass)[o.$place](t.prev())}}),o.$place={after:"insertAfter",bottom:"appendTo"}[o.buttonPlacement]||"insertAfter";o.$num=1;e(o.addBtnTemplate.replace(/%\{className\}/g,o.addBtnClass).replace(/%\{label\}/g,o.addBtnLabel+o.rowName).replace(/%\{tooltip\}/g,o.addBtnTitle+o.rowName))[o.$place](n).on("click",function(a){a.preventDefault();var t=e(this),n=o.$place==="appendTo",r=n?t.parent():t.prev(),s;n&&t.detach();s=l(o).hide().insertAfter(r).slideDown(o.showSpeed);n&&t[o.$place](s);o.afterClone&&o.afterClone(s)})})};a.defaults={buttonPlacement:"after",addBtnTemplate:'<a class="%{className}" href="#" title="%{tooltip}">%{label}</a>',addBtnClass:"addrow",cloneClass:"clone",showSpeed:"fast",delBtnTemplate:'<a class="%{className}" href="#" title="%{tooltip}">%{label}</a>',delBtnClass:"delrow"};a.i18n={en:{addBtnLabel:"Add ",addBtnTitle:"Add new ",delBtnLabel:"Delete",delBtnTitle:"Delete this ",rowName:"row"},is:{addBtnLabel:"Bæta við ",addBtnTitle:"Bæta við auka ",delBtnLabel:"Eyða",delBtnTitle:"Eyða þessari ",rowName:"röð"}};jQuery.fn.log=function(){if(window.console){arguments.length&&console.log.call(console,arguments);console.log(this)}return this};var t=8>parseInt((/MSIE ([\w.]+)/.exec(navigator.userAgent)||[])[1],10),l=function(a){var l=a.$protoFS.clone(!!a.cloneEvents),n,r,o="-"+(a.cloneClass||"clone")+"-",s=new RegExp("("+o+"\\d+)?$");o+=a.$num++;if(a.$delBtn){a.$delBtn.clone(true).data("$fsclnr",l).appendTo(l.find(a.delBtnAppendTo).add(l).last())}if(n=l[0].id){l[0].id=n.replace(s,o)}l.find("*").each(function(){var a=this;if(n=a.id){a.id=n.replace(s,o)}if(n=e(a).attr("for")){e(a).attr("for",n.replace(s,o))}if(n=a.name){var l=n.match(/^(.*)(\d+)(\D*)$/);a.name=l?l[1]+(parseInt(l[2],10)+1)+l[3]:n+"-2"}if(t&&/^(?:INPUT|SELECT|TEXTAREA|BUTTON)$/.test(a.tagName)){var r=e(a.outerHTML.replace(/( name=)[^ >]+/,'$1"'+n+'"'));e(a).replaceWith(r)}});return l}}(jQuery);
