// $.fn.islPostcodeSelect + $.av.postCodes.is -- (c) 2010 Hugsmiðjan ehf.
(function(a,q,r,j,f,k,e,l,m){m=' (pósthólf)';j=(a.av=a.av||{});r=(j.postCodes=j.postCodes||{}).is={};l='902;900|Vestmannaeyjum;880|Kirkjubæjarklaustri;870871|Vík;860861|Hvolsvelli;850851|Hellu;845|Flúðum;840|Laugarvatni;825|Stokkseyri;820|Eyrarbakka;816|Ölfus;815|Þorlákshöfn;810|Hveragerði;802;800801|Selfossi;785|Öræfum;780781|Höfn í Hornafirði;765|Djúpavogi;760|Breiðdalsvík;755|Stöðvarfirði;750|Fáskrúðsfirði;740|Neskaupstað;735|Eskifirði;730|Reyðarfirði;720|Borgarfirði (eystri);715|Mjóafirði;710|Seyðisfirði;700701|Egilsstöðum;690|Vopnafirði;685|Bakkafirði;680681|Þórshöfn;675|Raufarhöfn;670671|Kópaskeri;660|Mývatni;650|Laugum;645|Fosshólli;640641|Húsavík;630|Hrísey;625|Ólafsfirði;620621|Dalvík;611|Grímsey;610|Grenivík;603|Akureyri;602;600601|Akureyri;580|Siglufirði;570|Fljótum;565566|Hofsós;560|Varmahlíð;550551|Sauðárkróki;545|Skagaströnd;540541|Blönduósi;530531|Hvammstanga;524|Árneshreppi;520|Drangsnesi;510512|Hólmavík;500|Stað;470471|Þingeyri;465|Bíldudal;460|Tálknafirði;450451|Patreksfirði;430|Suðureyri;425|Flateyri;420|Súðavík;415|Bolungarvík;410|Hnífsdal;400401|Ísafirði;380|Reykhólahreppi;370371|Búðardal;360|Hellissandi;356|Snæfellsbæ;355|Ólafsvík;350|Grundarfirði;345|Flatey á Breiðafirði;340|Stykkishólmi;320|Reykholt í Borgarfirði;310311|Borgarnesi;302;300301|Akranesi;270271276|Mosfellsbæ;260|Reykjanesbæ;250|Garði;245|Sandgerði;240|Grindavík;233235|Reykjanesbæ;232;230|Reykjanesbæ;225|Álftanesi;222;220221|Hafnarfirði;212;210|Garðabæ;203|Kópavogi;202;200201|Kópavogi;190|Vogum;172;170|Seltjarnarnesi;123124125127128129130132150155;101103104105107108109110111112113116121|Reykjavík'.split(';');k=l.length;while(k--){e=l[k].split('|');f=0;while(f<e[0].length){r[e[0].substring(f,f+=3)]=e[1]||(q+m)}q=e[1]}var n={},g;a.fn.islPostcodeSelect=function(d){d=a.extend({},d);if(this.length){var o=d.noPOBoxes?'Short':'Long';g=n[o];if(!n[o]){g=n[o]=a('<select><option/></select>');a.each(a.av.postCodes.is,function(h,i){if(!(d.noPOBoxes&&i.indexOf(m)>0)){a('<option />').text(h+' - '+i).val(h).appendTo(g)}})}this.each(function(){var c=a(this),b;if(c.is('input')){b=c;c=b.closest('.fi_txt')}else{b=c.find('input:text:first');c=b.closest('.fi_txt')}var s=g.clone().val(b.val()).attr({name:b.attr('name'),id:b.attr('id')}),p=d.townField;if(p){(p.charAt?c.next(d.townField):p).hide().removeAttr('class').each(function(){var t=a(this);s.on('change',function(h){var i=a.trim(a(h.target).children(':selected').text().split('-')[1]||'');t.add(t.find('input')).filter('input:text').eq(0).val(i)})})}c.removeClass('fi_txt fi_postal_is fi_pnr').addClass('fi_sel postal_is');b.replaceWith(s)})}return this}})(jQuery);
