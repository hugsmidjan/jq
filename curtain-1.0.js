// encoding: utf-8
// $.fn.curtain 1.0  -- (c) 2009 HugsmiÃ°jan ehf.
(function(b){var l='curtain',f='opacity',n=b[l]=function(a,d){if(a=='destroy'){var e=b.inArray(d,g);if(e>-1){b(d).remove();g.splice(e,1)}!g.length&&h.unbind('resize',m);return}if(a&&(a.tagName||a.jquery)){d=a;a={}}a=b.extend({className:c+'-overlay'},typeof(a)=='string'?{className:a}:typeof(a)=='boolean'&&a?{bg:'#888',opacity:.5,z:99}:a||{});b.browser.msie&&parseInt(b.browser.version,10)<7&&(a.fixed=0);var c=b(d||'<div />').hide().addClass(a.className).css({position:a.fixed?'fixed':'absolute',top:0,left:0,width:'100%',height:'100%'});if(!d||!d.parentNode){c.appendTo(document.body)}if(a.bg||a[f]||a.z){c.css({background:a.bg,opacity:a[f],zIndex:a.z})}if(!a.fixed){if(a[f]&&!b.support[f]&&c.css(f)==1){c.css(f,c.css('filter').match(/opacity=(\d+)/)?RegExp.$1/100:1)}g.push(c[0]);i=i||b('body');h.bind('resize',m);m(1)}return c};b.fn[l]=function(a){return this.each(function(){b[l](a,this)})};var g=n.list=[],h=b(window),i,m=function(a){var d=g.length,e=-1,c=e;while(d--){var j=g[d];if(j&&((j.parentNode&&b(j).is(':visible'))||a==1)){e=e!=-1?e:Math.max(h.width(),i.innerWidth());c=c!=-1?c:Math.max(h.height(),i.innerHeight());var k=j.style;k.width=k.height='0';k.width=e+'px';k.height=c+'px'}}}})(jQuery);
