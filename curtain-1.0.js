jQuery(function($){var f=$.curtain=function(a,b){if(a=='destroy'){var c=$.inArray(b,_0);if(c>-1){$(b).remove();_0.splice(c,1)}if(!_0.length){w.unbind('resize',_1)}return}if(a&&(a.tagName||a.jquery)){b=a;a={}}a=$.extend({className:'curtain-overlay'},typeof(a)=='string'?{className:a}:typeof(a)=='boolean'&&a?{bgcol:'#888',opacity:.5,z:99}:a||{});var d=$(b||'<div />').remove().addClass(a.className).css({position:'absolute',top:0,left:0}).hide().bind('click',function(e){e.stopPropagation();return false});_0.push(d[0]);w.bind('resize',_1);_1('init');if(a.bgcol||a.opacity||a.z){d.css({backgroundColor:a.bgcol,opacity:a.opacity,zIndex:a.z})}return d},_0=f.list=[],w=$(window),b=$(document.body),_1=function(e){var i=_0.length,W=-1,H=W;while(i--){var a=_0[i];if(a&&(a.parentNode||e=='init')){W=W!=-1?W:Math.max(w.width(),b.innerWidth());H=H!=-1?H:Math.max(w.height(),b.innerHeight());var s=a.style;if($.browser.msie){s.width=s.height='0'}s.width=W+'px';s.height=H+'px'}}};$.fn.curtain=function(a){return this.each(function(){$.curtain(a,this)})}});
