// encoding: utf-8
// $.fn.treeCollapse 2.0  -- (c) 2009 HugsmiÃ°jan ehf. 
jQuery.fn.treeCollapse=function(a){var b=jQuery;a=b.extend({rootClass:'tree-active',branch:'li.branch',toggler:'> a',openClass:'open',closedClass:'closed',leaf:'li',parentClass:'parent',selectClass:'selected',doSelect:0,startOpen:'.parent, .selected, .open',togglerInt:'> a.expand',togglerHtml:'<a class="expand" href="#"></a>',togglerPlus:'+',togglerMinus:'-',doTogglers:0},a);var l=!a.branch;if(l){this.aquireId()}var i=a.branch,m=a.openClass,g=a.closedClass,n=a.parentClass,j=a.selectClass,o=a.togglerInt,p=a.togglerPlus,q=a.togglerMinus,k=a.doTogglers;this.addClass(a.rootClass).if_(a.doSelect).each(function(){var e=b(this),c=b(e).find(a.leaf+'.'+j).eq(0);b(e).bind('click',function(h){var d=b(h.target).closest(a.leaf);if(d[0]&&d[0]!==c[0]){var f=i||'#'+e.id;if(c.length){c.removeClass(j).parents(f).removeClass(n)}c=d;c.addClass(j).parents(f).addClass(n)}})}).end().each(function(){var e=this,c=i||'#'+e.id;b(e).bind('click',function(h){if(b(h.target).closest(c+' '+a.toggler)[0]){var d=b(h.target).closest(c),f=d.hasClass(g);b(this).trigger('Branch'+(f?'Open':'Close'),{branch:d[0]});d.toggleClasses(m,g).if_(k).find(o).text(f?q:p);return false}})});var r=l?this:this.find(i);r.if_(k).prepend(b(a.togglerHtml).text(p)).end().addClass(g).filter(a.startOpen).removeClass(g).addClass(m).if_(k).find(o).text(q);return this};
