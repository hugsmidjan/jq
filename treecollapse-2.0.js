!function(e){e.fn.treeCollapse=function(t){t=e.extend({rootClass:"tree-active",branch:"li:has(>ul)",toggler:"> a",openClass:"open",closedClass:"closed",leaf:"li",parentClass:"parent",selectClass:"selected",doSelect:0,startOpen:".parent, .selected, .open",togglerInt:"> a.expand",togglerHtml:'<a class="expand" href="#"></a>',togglerPlus:"+",togglerMinus:"-",doTogglers:0},t);var s={en:{plusTitle:"Show sub-items",minusTitle:"Hide sub-items"},is:{plusTitle:"Birta undirlínur",minusTitle:"Fela undirlínur"}},l=(this.closest("[lang]").attr("lang")||"en").substr(0,2),a=s[l]||s.en;s=l=void 0;var r=!t.branch;r&&this.aquireId();var n=t.branch,i=t.openClass,o=t.closedClass,d=t.parentClass,g=t.selectClass,c=t.togglerInt,u=t.togglerPlus,f=t.togglerMinus,C=a.plusTitle,h=a.minusTitle,p=t.doTogglers;this.addClass(t.rootClass).if_(t.doSelect).each(function(){var s=e(this),l=e(s).find(t.leaf+"."+g).eq(0);e(s).on("click",function(a){var r=e(a.target).closest(t.leaf);if(r[0]&&r[0]!==l[0]){var i=n||"#"+s.id;l.length&&l.removeClass(g).parents(i).removeClass(d),l=r,l.addClass(g).parents(i).addClass(d)}})}).end().each(function(){var s=this,l=n||"#"+s.id;e(s).on("click",function(s){if(e(s.target).closest(l+" "+t.toggler)[0]){var a=e(s.target).closest(l),r=a.hasClass(o);return e(this).trigger("Branch"+(r?"Open":"Close"),{branch:a[0]}),a.toggleClasses(i,o).if_(p).find(c).attr("title",r?h:C).text(r?f:u),!1}})});var v=r?this:this.find(n);return v.if_(p).prepend(e(t.togglerHtml).attr("title",C).text(u)).end().addClass(o).filter(t.startOpen).removeClass(o).addClass(i).if_(p).find(c).attr("title",h).text(f),this}}(jQuery);
