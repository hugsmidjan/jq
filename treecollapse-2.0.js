jQuery.fn.treeCollapse=function(c){var $=jQuery;c=$.extend({rootClass:'tree-active',branch:'li.branch',toggler:'> a',openClass:'open',closedClass:'closed',leaf:'li',parentClass:'parent',selectClass:'selected',doSelect:0,startOpen:'.parent, .selected, .open',togglerInt:'> a.expand',togglerHtml:'<a class="expand" href="#"></a>',togglerPlus:'+',togglerMinus:'-',doTogglers:0},c);var d=!c.branch;if(d){this.aquireId()}var f=c.branch,_5=c.openClass,_0=c.closedClass,_8=c.parentClass,_2=c.selectClass,_4=c.togglerInt,_6=c.togglerPlus,_3=c.togglerMinus,_1=c.doTogglers;this.addClass(c.rootClass).if_(c.doSelect).each(function(){var b=$(this).find(c.leaf+'.'+_2).eq(0);$(this).delegate(c.leaf,'click',function(e){var a=f||'#'+this.id;if(b.length){b.removeClass(_2).parents(a).removeClass(_8)}b=$(e.delegate);b.addClass(_2).parents(a).addClass(_8)})}).end().each(function(){var b=f||'#'+this.id;$(this).delegate(b+' '+c.toggler,'click',function(e){var a=$(e.delegate).parents(b).eq(0),_7=a.hasClass(_0);$(this).trigger('Branch'+(_7?'Open':'Close'),{branch:a[0]});a.toggleClasses(_5,_0).if_(_1).find(_4).text(_7?_3:_6);return false})});var g=d?this:this.find(f);g.if_(_1).prepend($(c.togglerHtml).text(_6)).end().addClass(_0).filter(c.startOpen).removeClass(_0).addClass(_5).if_(_1).find(_4).text(_3);return this};
