(function(f){f.listscroller={version:1.0,defaultConfig:{item:'',windowSize:3,stepSize:1,startPos:0,hideClass:'overflow',topClass:'at-top',bottomClass:'at-bottom',wrap:'both',overflow:'hidden',controls:'below',animation:'none',easing:'swing',speed:600,aspect:'auto',paging:false,inputPager:false,statusPager:false,autoScrollDelay:0,initCallback:function(){},moveCallback:function(){},classPrefix:'listscroller',currentPageClass:'current',currentItemClass:'visible',cursorItemClass:'current',pagingTopClass:'paging-top',pagingBottomClass:'paging-bottom',pagingTemplate:'<div class="paging"><ul class="stepper"/></div>',nextBtnTemplate:'<li class="next"><a href="#"/></li>',prevBtnTemplate:'<li class="prev"><a href="#"/></li>',jumpTemplate:'<li class="jump"/>',jumpLabelTemplate:'<strong/>',jumpWrapTemplate:'<span/>',jumpBtnTemplate:'<a href="#"/>',statusTemplate:'<i/>',totalTemplate:'<b/>',pagerTemplate:'<input type="text" value="" size="2"/>',statusLabel:'Viewing results:',jumpLabel:'Pages:',ofTotalSeparator:' of ',labelNext:'Next',labelPrev:'Previous',titleNext:'Page forward',titlePrev:'Page back'},i18n:function(b,a){return b},animate:{none:function(b,a){},carousel:function(b,a){var c,d=f('.'+a.classPrefix+'-wrapper',this),e=b.eq(b.length-1),g=b.length-a.stepSize,h=(a.aspect==='horizontal')?'scrollLeft':'scrollTop',j=(a.aspect==='horizontal')?'outerWidth':'outerHeight',i={};d.stop();c=b.eq(a.index).position();i[h]=c.left;if(a.wrap=='loop'&&a.lastIndex==0&&a.index==g){d[h](e.position().left+e[j]());d.animate(i,a.speed,a.easing)}else if(a.wrap=='loop'&&a.lastIndex==g&&a.index==0){i[h]=e.position().left+e[j]();d.animate(i,a.speed,a.easing,function(){d[h](0)})}else{d.animate(i,a.speed,a.easing)}},crossfade:function(d,e){d.each(function(b,a,c){a=(b>=e.index&&b<e.index+e.windowSize);c=(e.lastIndex==null)||(b>=e.lastIndex&&b<e.lastIndex+e.windowSize);if(a&&!c){f(this).stop().hide().fadeIn(e.speed)}else if(!a&&e.lastIndex==null){f(this).stop().hide()}else if(!a&&c){f(this).stop().show().fadeOut(e.speed)}})},accordion:function(d,e){var g,h=(e.aspect=='vertical')?'height':'width';d.each(function(b,a,c){a=(b>=e.index&&b<e.index+e.windowSize);c=(e.lastIndex==null)||(b>=e.lastIndex&&b<e.lastIndex+e.windowSize);g={};if(a&&!c){g[h]='show';f(this).stop().animate(g,e.speed,e.easing,function(){this.style[h]=''})}else if(!a&&e.lastIndex==null){f(this).stop().hide()}else if(!a&&c){g[h]='hide';f(this).stop().animate(g,e.speed,e.easing,function(){this.style[h]=''})}})}},wrap:{none:function(b,a,c){return Math.max(Math.min(b,l(a,c)),0)},start:function(b,a,c){var d=l(a,c);if(b<0){return(c.index==0)?d:0}if(b>d){return d}return b},end:function(b,a,c){var d=l(a,c);if(b<0){return 0}if(b>d){return(c.index==d)?0:d}return b},both:function(b,a,c){var d=l(a,c);if(b<0){return(c.index==0)?d:0}if(b>d){return(c.index==d)?0:d}return b},random:function(b,a,c){return Math.floor(Math.random()*a.length)},loop:function(b,a,c){return((a.length+b)%a.length)}},aspectDefaults:{none:'vertical',carousel:'horizontal',crossfade:'horizontal',accordion:'vertical'}};function u(b){var a,c=b.eq(1);p1=b.eq(0).offset(),p2=c.offset();if(p2&&c.is(':visible')){return(Math.abs(p2.top-p1.top)<=Math.abs(p2.left-p1.left))?'horizontal':'vertical'}return false}function l(b,a){return(a.overflow=='visible')?Math.floor(b.length/a.stepSize)*a.stepSize:b.length-a.windowSize}function k(b,a,c){var d=b.block;var e=b.list;b.lastIndex=b.index;b.index=f.listscroller.wrap[b.wrap||'none'](a,e,b);e.addClass(b.hideClass).removeClass(b.cursorItemClass).removeClass(b.currentItemClass).slice(b.index,b.index+b.windowSize).addClass(b.currentItemClass).removeClass(b.hideClass).eq(0).addClass(b.cursorItemClass);if(f.isFunction(b.moveCallback)){b.moveCallback.call(d,e,b)}if(f.isFunction(b.animation)){b.animation.call(d,e,b)}else{f.listscroller.animate[b.animation||'none'].call(d,e,b)}d.removeClass(b.topClass).removeClass(b.bottomClass);if(b.index==0){d.addClass(b.topClass)}if(b.index==e.length-b.windowSize){d.addClass(b.bottomClass)}if(!c){d.addClass(b.classPrefix+'-changed');setTimeout(function(){d.removeClass(b.classPrefix+'-changed')},b.speed||1)}if(b.jumps){b.jumps.removeClass(b.currentPageClass).eq(Math.ceil(b.index/b.stepSize)).addClass(b.currentPageClass)}else if(b.pager){b.pager.val(Math.ceil(b.index/b.stepSize)+1)}else if(b.status){b.status.text(Math.ceil(b.index/b.stepSize)+1)}}function v(b){var a=b.data;k(a,a.index-a.stepSize);return false}function w(b){var a=b.data;k(a,a.index+a.stepSize);return false}function x(b){var a=b.data,c=(parseInt(f(this).text(),10)-1)||0;k(a,c*a.stepSize);return false}function y(b){var a=b.data,c=(parseInt(f(this).val(),10)-1)||0;k(a,c*a.stepSize);return false}function p(a,c){var d=f(a.nextBtnTemplate),e=f(a.prevBtnTemplate),g=f([]),h=f.listscroller.i18n;d.find('a').andSelf().eq(0).bind('click',a,w).attr('title',h(a.titleNext,c)).text(h(a.labelNext,c));e.find('a').andSelf().eq(0).bind('click',a,v).attr('title',h(a.titlePrev,c)).text(h(a.labelPrev,c));if(a.paging){var j=[],i=Math.ceil(a.index/a.stepSize),n=Math.ceil(a.list.length/a.stepSize);g=f(a.jumpTemplate);if(a.jumpLabelTemplate){f(a.jumpLabelTemplate).text(h(a.jumpLabel,c)).appendTo(g)}if(a.inputPager){a.pager=f(a.pagerTemplate).appendTo(g);g.append(a.ofTotalSeparator);var o=f(a.totalTemplate).appendTo(g);a.pager.bind('change',a,y).val(i+1);o.text(n)}else if(a.statusPager){var q=f(a.jumpWrapTemplate).appendTo(g);a.status=f(a.totalTemplate).appendTo(q);var o=f(a.statusTemplate).appendTo(q);o.text(a.ofTotalSeparator+n)}else{for(var m=0;m<n;m++){var z=f(a.jumpBtnTemplate),r=z.find('a').andSelf().eq(0).text(m+1).bind('click',a,x);if(a.index==m){r.addClass(a.currentPageClass)}j.push(r[0])}a.jumps=f(j);f(a.jumpWrapTemplate||[]).append(a.jumps).appendTo(g)}}var s=f(a.pagingTemplate);s.map(function(){var b=this;while(b.firstChild)b=b.firstChild;return b}).append(d,e,g);return s}function t(a,c,d){if(c.hasClass(a.classPrefix+'-active')){return false}a.list=d;a.block=c;var e,g,h;if(d.eq(0).is('li')){g=d.parent()}else{g=d.wrapAll('<div />').parent()}h=g.wrap('<div />').parent();g.addClass(a.classPrefix+'-clip');h.addClass(a.classPrefix+'-wrapper');c.addClass(a.classPrefix+'-active');g.add(h).css('position','relative');h.addClass(a.classPrefix+'-'+a.aspect);if(a.wrap=='loop'){a.flipover=d.slice(0,a.windowSize).clone(true);d.parent().append(a.flipover)}if(a.controls!=='none'&&d.length>0){var j=d.parents('[lang]').attr('lang')||'en';if(/^(above|both)$/.test(a.controls)){h.before(p(a,j).addClass(a.pagingTopClass))}if(/^(below|both)$/.test(a.controls)){h.after(p(a,j).addClass(a.pagingBottomClass))}}if(a.aspect=='auto'){a.aspect=u(d)||f.listscroller.aspectDefaults[a.animation]||'horizontal'}h.addClass(a.classPrefix+'-'+a.aspect);k(a,a.startPos||0,true);if(a.autoScrollDelay){function i(b){c.find('.next a').click()}scrollInterval=setInterval(i,a.autoScrollDelay);c.bind('mouseenter',function(){clearInterval(scrollInterval)}).bind('mouseleave',function(){scrollInterval=setInterval(i,a.autoScrollDelay)})}}f.fn.listscroller=function(c){var d=f.listscroller.defaultConfig;if((c&&c.item)||d.item){this.each(function(){var b=f.extend({},d,c),a=f(this);t(b,a,a.find(b.item))})}else if(this.length){t(f.extend({},d,c),this.eq(0).parent(),this)}return this}})(jQuery);
