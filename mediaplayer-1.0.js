(function(b){b.fn.mediaPlayer=function(a){a=jQuery.extend({width:125,playerHTML:'<embed src="%{player}" width="%{width}" height="20" allowscriptaccess="always" allowfullscreen="true" flashvars="playlist=none&amp;height=20&amp;autostart=true" />',playerUrl:(document.location.protocol=='https:'?'https://secure.eplica.is/codecentre':'http://codecentre.eplica.is')+'/play/audio.swf?file=%{file}',},a);return this.each(function(){var d=this,e=d.href.split('?')[0];if(/\.(mp3|aac)$/.test(e)){var f=b(a.container||'<span class="mediaplayer" />')_0=b(f[0].previousSibling||document.body.lastChild),c=b(a.playerHTML.replace('%{width}',a.width).replace('%{player}',a.playerUrl).replace('%{file}',e));b(d).bind('click',function(g){if(c.parent()){c.remove()}else{c.insertAfter(_0)}g.preventDefault()})}})}})(jQuery);