// encoding: utf-8
// $.fn.mediaPlayer 1.0  -- (c) 2009 Hugsmi√∞jan ehf. 
(function($){var _currentPlayer,_currentLink;$.fn.mediaPlayer=function(cfg){cfg=jQuery.extend({width:150,height:20,playerUrl:(document.location.protocol=='https:'?'https://secure.eplica.is/codecentre':'http://codecentre.eplica.is')+'/play/audio.swf'},cfg);function _getPlayerHTML(fileUrl){return flashembed.getHTML({src:cfg.playerUrl,w3c:true,width:cfg.width,height:cfg.height},{file:fileUrl,playlist:'none',allowfullscreen:false,allowscriptaccess:'always',autostart:true,width:cfg.width,height:cfg.height})};return this.each(function(){var _this=this,_fileUrl=_this.href.split('?')[0],_container;if(/\.(mp3|aac)$/.test(_fileUrl)){$(_this).bind('click',function(e){if(_currentPlayer)_currentPlayer.empty().remove();if(_currentLink==_this){_currentPlayer.empty().remove();_currentPlayer=null;_currentLink=null}else{if(cfg.container){_container=$(cfg.container);_currentPlayer=$(_getPlayerHTML(_fileUrl));_container.append(_currentPlayer)}else{_currentPlayer=$('<span class="mediaplayer">'+_getPlayerHTML(_fileUrl)+'</span>');_currentPlayer.insertAfter(_this)}_currentLink=_this}e.preventDefault()})}})}})(jQuery);
